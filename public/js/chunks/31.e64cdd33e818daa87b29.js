(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{"27vA":function(e,a,t){"use strict";t.r(a);var s=t("o0o1"),i=t.n(s),r=t("Snq/"),o=t.n(r),n=t("w48C"),l=t.n(n),c=(t("K+Wz"),t("ksP6")),d=t.n(c),v=(t("Hj/Q"),{name:"addUser",components:{vueDropzone:d.a,"v-select":o.a,flatPickr:l.a},data:function(){return{dialog:!1,data:{name:"",email:"",password:"",confirm_password:"",profile:"/images/placeholder/placeholder.png"},dropzoneOptions:{url:route("file.upload.thumb"),maxFiles:1,addRemoveLinks:!0,dictDefaultMessage:"ដាក់រូបភាពបើមាន",thumbnailWidth:150,thumbnailHeight:150}}},computed:{},methods:{show:function(){this.dialog=!0},storeUser:function(){var e=this;this.$validator.validateAll().then((function(a){a?(e.$vs.loading(),e.$store.dispatch("storeUser",e.data).then((function(a){a?(e.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានបន្ថែម",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),e.resetField()):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"ទិន្នន័យមិនបានបន្ថែម",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"}),e.$vs.loading.close()}))):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"សូមបំពេញទិន្នន័យអោយបានត្រឹមត្រូវ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"})}))},resetField:function(){this.data={name:"",email:"",password:"",confirm_password:"",profile:"/images/placeholder/placeholder.png"}},successUpload:function(e,a){this.data.profile=a.path}}}),p=t("KHd+"),u=Object(p.a)(v,(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("q-dialog",{attrs:{persistent:"",maximized:!0,"transition-show":"slide-up","transition-hide":"slide-down"},model:{value:e.dialog,callback:function(a){e.dialog=a},expression:"dialog"}},[t("q-card",[t("q-bar",[t("q-space"),e._v(" "),t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}},[t("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[e._v("Close")])],1)],1),e._v(" "),t("q-card-section",[t("vx-card",{attrs:{"no-shadow":""}},[t("div",{staticClass:"vx-row"},[t("div",{staticClass:"vx-col md:w-3/4"},[t("div",{staticClass:"vx-row"},[t("div",{staticClass:"vx-col w-full"},[t("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{"label-placeholder":"ឈ្មោះ",name:"name"},model:{value:e.data.name,callback:function(a){e.$set(e.data,"name",a)},expression:"data.name"}}),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("name"),expression:"errors.has('name')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("name")))])],1),e._v(" "),t("div",{staticClass:"vx-col w-full mt-2"},[t("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"w-full",attrs:{"label-placeholder":"អ៊ីម៉ែល",name:"email"},model:{value:e.data.email,callback:function(a){e.$set(e.data,"email",a)},expression:"data.email"}}),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("email"),expression:"errors.has('email')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("email")))])],1),e._v(" "),t("div",{staticClass:"vx-col w-full mt-2"},[t("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"min:6|max:10",expression:"'min:6|max:10'"}],ref:"password",staticClass:"w-full",attrs:{type:"password","label-placeholder":"ពាក្យសម្ងាត់",name:"password"},model:{value:e.data.password,callback:function(a){e.$set(e.data,"password",a)},expression:"data.password"}}),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("password"),expression:"errors.has('password')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("password")))])],1),e._v(" "),t("div",{staticClass:"vx-col w-full mt-2"},[t("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"min:6|max:10|confirmed:password",expression:"'min:6|max:10|confirmed:password'"}],staticClass:"w-full",attrs:{type:"password","label-placeholder":"ផ្ទៀងផ្ទាត់ ពាក្យសម្ងាត់",name:"confirm_password"},model:{value:e.data.confirm_password,callback:function(a){e.$set(e.data,"confirm_password",a)},expression:"data.confirm_password"}}),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("confirm_password"),expression:"errors.has('confirm_password')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("confirm_password")))])],1)])]),e._v(" "),t("div",{staticClass:"vx-col md:w-1/4"},[t("label",[e._v("ប្រូហ្វាល")]),e._v(" "),t("vue-dropzone",{ref:"image",staticClass:"max-content p-1",attrs:{duplicateCheck:"",id:"dropzone",options:e.dropzoneOptions},on:{"vdropzone-success":e.successUpload}})],1)]),e._v(" "),t("vs-divider"),e._v(" "),t("div",{staticClass:"flex justify-end btn-group"},[t("vs-button",{attrs:{icon:"icon-save","icon-pack":"feather",type:"relief"},on:{click:e.storeUser}},[e._v("រក្សាទុក\n                        ")])],1)],1)],1)],1)],1)],1)}),[],!1,null,"1b536134",null).exports,m={name:"editUser",components:{vueDropzone:d.a,"v-select":o.a,flatPickr:l.a},data:function(){return{dialog:!1,data:{id:null,name:"",email:"",profile:"/images/placeholder/placeholder.png"},dropzoneOptions:{url:route("file.upload.thumb"),maxFiles:1,addRemoveLinks:!0,dictDefaultMessage:"ដាក់រូបភាពបើមាន",thumbnailWidth:150,thumbnailHeight:150}}},methods:{loadProfile:function(){this.$refs.profile.manuallyAddFile({size:123},this.data.profile)},show:function(e){this.dialog=!0,this.data.id=e.id,this.data.name=e.name,this.data.email=e.email,this.data.profile=e.profile},updateUser:function(){var e=this;this.$validator.validateAll().then((function(a){a?(e.$vs.loading(),e.$store.dispatch("updateUser",e.data).then((function(a){a?(e.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានបន្ថែម",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),e.$emit("finished")):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"ទិន្នន័យមិនបានបន្ថែម",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"}),e.$vs.loading.close()}))):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"សូមបំពេញទិន្នន័យអោយបានត្រឹមត្រូវ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"})}))},successUpload:function(e,a){this.data.profile=a.path}}},f=Object(p.a)(m,(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("q-dialog",{attrs:{persistent:"",maximized:!0,"transition-show":"slide-up","transition-hide":"slide-down"},model:{value:e.dialog,callback:function(a){e.dialog=a},expression:"dialog"}},[t("q-card",[t("q-bar",[t("q-space"),e._v(" "),t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}},[t("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[e._v("Close")])],1)],1),e._v(" "),t("q-card-section",[t("vx-card",{attrs:{"no-shadow":""}},[t("div",{staticClass:"vx-row"},[t("div",{staticClass:"vx-col md:w-3/4"},[t("div",{staticClass:"vx-row"},[t("div",{staticClass:"vx-col w-full"},[t("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{"label-placeholder":"ឈ្មោះ",name:"name"},model:{value:e.data.name,callback:function(a){e.$set(e.data,"name",a)},expression:"data.name"}}),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("name"),expression:"errors.has('name')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("name")))])],1),e._v(" "),t("div",{staticClass:"vx-col w-full mt-2"},[t("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"w-full",attrs:{"label-placeholder":"អ៊ីម៉ែល",name:"email"},model:{value:e.data.email,callback:function(a){e.$set(e.data,"email",a)},expression:"data.email"}}),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("email"),expression:"errors.has('email')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("email")))])],1)])]),e._v(" "),t("div",{staticClass:"vx-col md:w-1/4"},[t("label",[e._v("ប្រូហ្វាល")]),e._v(" "),t("vue-dropzone",{ref:"profile",staticClass:"max-content p-1",attrs:{duplicateCheck:"",id:"profile",options:e.dropzoneOptions},on:{"vdropzone-mounted":e.loadProfile,"vdropzone-success":e.successUpload}})],1)]),e._v(" "),t("vs-divider"),e._v(" "),t("div",{staticClass:"flex justify-end btn-group"},[t("vs-button",{attrs:{icon:"icon-edit","icon-pack":"feather",type:"relief"},on:{click:e.updateUser}},[e._v("កែប្រែ\n                        ")])],1)],1)],1)],1)],1)],1)}),[],!1,null,"5386227a",null).exports,h={name:"changePassword",data:function(){return{dialog:!1,data:{id:null,password:"",confirm_password:""}}},methods:{show:function(e){this.dialog=!0,this.data.id=e.id},updateUserPassword:function(){var e=this;this.$validator.validateAll().then((function(a){a?(e.$vs.loading(),e.$store.dispatch("updateUserPassword",e.data).then((function(a){a?(e.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានបន្ថែម",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),e.$emit("finished")):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"ទិន្នន័យមិនបានបន្ថែម",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"}),e.$vs.loading.close()}))):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"សូមបំពេញទិន្នន័យអោយបានត្រឹមត្រូវ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"})}))}}};function w(e,a,t,s,i,r,o){try{var n=e[r](o),l=n.value}catch(e){return void t(e)}n.done?a(l):Promise.resolve(l).then(s,i)}function _(e){return function(){var a=this,t=arguments;return new Promise((function(s,i){var r=e.apply(a,t);function o(e){w(r,s,i,o,n,"next",e)}function n(e){w(r,s,i,o,n,"throw",e)}o(void 0)}))}}var x,g={name:"User",components:{ChangePassword:Object(p.a)(h,(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("q-dialog",{attrs:{persistent:"",maximized:!0,"transition-show":"slide-up","transition-hide":"slide-down"},model:{value:e.dialog,callback:function(a){e.dialog=a},expression:"dialog"}},[t("q-card",[t("q-bar",[t("q-space"),e._v(" "),t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}},[t("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[e._v("Close")])],1)],1),e._v(" "),t("q-card-section",[t("vx-card",{attrs:{"no-shadow":""}},[t("div",{staticClass:"vx-row"},[t("div",{staticClass:"vx-col w-full mt-2"},[t("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:6|max:10",expression:"'required|min:6|max:10'"}],ref:"password",staticClass:"w-full",attrs:{type:"password","label-placeholder":"ពាក្យសម្ងាត់",name:"password"},model:{value:e.data.password,callback:function(a){e.$set(e.data,"password",a)},expression:"data.password"}}),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("password"),expression:"errors.has('password')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("password")))])],1),e._v(" "),t("div",{staticClass:"vx-col w-full mt-2"},[t("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:6|max:10|confirmed:password",expression:"'required|min:6|max:10|confirmed:password'"}],staticClass:"w-full",attrs:{type:"password","label-placeholder":"ផ្ទៀងផ្ទាត់ ពាក្យសម្ងាត់",name:"confirm_password"},model:{value:e.data.confirm_password,callback:function(a){e.$set(e.data,"confirm_password",a)},expression:"data.confirm_password"}}),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("confirm_password"),expression:"errors.has('confirm_password')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("confirm_password")))])],1)]),e._v(" "),t("vs-divider"),e._v(" "),t("div",{staticClass:"flex justify-end btn-group"},[t("vs-button",{attrs:{icon:"icon-edit","icon-pack":"feather",type:"relief"},on:{click:e.updateUserPassword}},[e._v("ប្តូរ\n                        ")])],1)],1)],1)],1)],1)],1)}),[],!1,null,"5f349220",null).exports,EditUser:f,AddUser:u},data:function(){return{selected:[]}},computed:{all_users:function(){return this.$store.getters.all_user}},methods:{confirmDelete:function(){this.$vs.dialog({type:"confirm",color:"danger",title:"ផ្ទៀងផ្ទាត់",text:"ចុចពាក្យ Accept ដើម្បីលុប!",accept:this.destroyUser})},destroyUser:(x=_(i.a.mark((function e(){var a,t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=this).$vs.loading(),t=a.selected.map(function(){var e=_(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.$store.dispatch("destroyUser",t.id);case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()),e.next=5,Promise.all(t).then((function(){a.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានលុប",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),a.selected=[],a.$vs.loading.close()}));case 5:case"end":return e.stop()}}),e,this)}))),function(){return x.apply(this,arguments)})}},b=Object(p.a)(g,(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("vx-card",{attrs:{"no-shadow":""}},[t("div",{staticClass:"flex btn-group"},[t("vs-button",{attrs:{type:"relief","icon-pack":"feather",icon:"icon-plus-square"},on:{click:function(a){return e.$refs.addUser.show()}}},[e._v("\n            បន្ថែម\n        ")]),e._v(" "),1===e.selected.length?t("vs-button",{attrs:{color:"success",type:"relief","icon-pack":"feather",icon:"icon-edit"},on:{click:function(a){return e.$refs.editUser.show(e.selected[0])}}},[e._v("\n            កែប្រែ\n        ")]):e._e(),e._v(" "),1===e.selected.length?t("vs-button",{attrs:{color:"dark",type:"relief","icon-pack":"feather",icon:"icon-edit"},on:{click:function(a){return e.$refs.changePassword.show(e.selected[0])}}},[e._v("\n            ប្តូរលេខសម្ងាត់\n        ")]):e._e(),e._v(" "),e.selected.length?t("vs-button",{attrs:{color:"danger",type:"relief","icon-pack":"feather",icon:"icon-trash"},on:{click:e.confirmDelete}},[e._v("\n            លុប\n        ")]):e._e()],1),e._v(" "),t("add-user",{ref:"addUser"}),e._v(" "),t("edit-user",{ref:"editUser",on:{finished:function(a){e.selected=[]}}}),e._v(" "),t("change-password",{ref:"changePassword",on:{finished:function(a){e.selected=[]}}}),e._v(" "),t("vs-table",{attrs:{multiple:"",stripe:"",search:"",data:e.all_users},scopedSlots:e._u([{key:"default",fn:function(a){var s=a.data;return e._l(s,(function(a,s){return t("vs-tr",{key:s,attrs:{data:a}},[t("vs-td",{attrs:{data:a.id}},[e._v("\n                    "+e._s(a.id)+"\n                ")]),e._v(" "),t("vs-td",{attrs:{data:a.profile}},[t("img",{attrs:{src:a.profile,width:"75",alt:a.profile}})]),e._v(" "),t("vs-td",{attrs:{data:a.name}},[e._v("\n                    "+e._s(a.name)+"\n                ")]),e._v(" "),t("vs-td",{attrs:{data:a.email}},[e._v("\n                    "+e._s(a.email)+"\n                ")])],1)}))}}]),model:{value:e.selected,callback:function(a){e.selected=a},expression:"selected"}},[t("template",{slot:"thead"},[t("vs-th",{attrs:{"sort-key":"id"}},[e._v("ID")]),e._v(" "),t("vs-th"),e._v(" "),t("vs-th",{attrs:{"sort-key":"name"}},[e._v("ឈ្មោះ")]),e._v(" "),t("vs-th",{attrs:{"sort-key":"email"}},[e._v("អ៊ីម៉ែល")])],1)],2)],1)}),[],!1,null,"513b8b1a",null);a.default=b.exports}}]);