(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"/uFq":function(e,t,a){var s=a("v/ur");"string"==typeof s&&(s=[[e.i,s,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(s,r);s.locals&&(e.exports=s.locals)},H6pF:function(e,t,a){var s=a("YMD/");"string"==typeof s&&(s=[[e.i,s,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(s,r);s.locals&&(e.exports=s.locals)},HShI:function(e,t,a){"use strict";var s=a("SJ3A");a.n(s).a},JtQy:function(e,t,a){(e.exports=a("I1BE")(!1)).push([e.i,"[dir] table[data-v-fec2fd80], [dir] td[data-v-fec2fd80], [dir] th[data-v-fec2fd80] {\n  border: 1px solid black;\n}\ntable[data-v-fec2fd80] {\n  border-collapse: collapse;\n  width: 100%;\n}\n[dir=ltr] th[data-v-fec2fd80] {\n  text-align: left;\n}\n[dir=rtl] th[data-v-fec2fd80] {\n  text-align: right;\n}\n",""])},SJ3A:function(e,t,a){var s=a("JtQy");"string"==typeof s&&(s=[[e.i,s,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(s,r);s.locals&&(e.exports=s.locals)},T8ub:function(e,t,a){"use strict";var s=a("H6pF");a.n(s).a},X0o1:function(e,t,a){"use strict";var s=a("/uFq");a.n(s).a},"YMD/":function(e,t,a){(e.exports=a("I1BE")(!1)).push([e.i,"[dir] table[data-v-f9666da2], [dir] td[data-v-f9666da2], [dir] th[data-v-f9666da2] {\n  border: 1px solid black;\n}\ntable[data-v-f9666da2] {\n  border-collapse: collapse;\n  width: 100%;\n}\n[dir=ltr] th[data-v-f9666da2] {\n  text-align: left;\n}\n[dir=rtl] th[data-v-f9666da2] {\n  text-align: right;\n}\n",""])},mxq3:function(e,t,a){"use strict";a.r(t);var s=a("o0o1"),r=a.n(s),n=a("Snq/"),o=a.n(n),i=a("w48C"),l=a.n(i),d=(a("K+Wz"),a("ksP6")),c=a.n(d),v=(a("Hj/Q"),{name:"addEmployee",components:{vueDropzone:c.a,"v-select":o.a,flatPickr:l.a},data:function(){return{dialog:!1,data:{user_id:{id:1,name:"ជ្រើសរើស"},dob:null,name:null,contact:null,address:null,gender:"ប្រុស",profile:"/images/placeholder/placeholder.png"},dropzoneOptions:{url:route("file.upload.thumb"),maxFiles:1,addRemoveLinks:!0,dictDefaultMessage:"ដាក់រូបភាពបើមាន",thumbnailWidth:150,thumbnailHeight:150}}},computed:{all_users:function(){return this.$store.getters.all_user}},methods:{show:function(){this.dialog=!0},storeEmployee:function(){var e=this;this.$validator.validateAll().then((function(t){t?(e.$vs.loading(),e.$store.dispatch("storeEmployee",e.data).then((function(t){t?(e.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានបន្ថែម",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),e.resetField()):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"ទិន្នន័យមិនបានបន្ថែម",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"}),e.$vs.loading.close()}))):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"សូមបំពេញទិន្នន័យអោយបានត្រឹមត្រូវ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"})}))},resetField:function(){this.data={dob:null,name:null,contact:null,address:null,gender:"ប្រុស",profile:"/images/placeholder/placeholder.png"}},successUpload:function(e,t){this.data.profile=t.path}}}),u=a("KHd+"),p=Object(u.a)(v,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-dialog",{attrs:{persistent:"",maximized:!0,"transition-show":"slide-up","transition-hide":"slide-down"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("q-card",[a("q-bar",[a("q-space"),e._v(" "),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}},[a("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[e._v("Close")])],1)],1),e._v(" "),a("q-card-section",[a("vx-card",{attrs:{"no-shadow":""}},[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-3/4"},[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-1/2 w-full mt-1"},[a("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{"label-placeholder":"ឈ្មោះ",name:"name"},model:{value:e.data.name,callback:function(t){e.$set(e.data,"name",t)},expression:"data.name"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("name"),expression:"errors.has('name')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("name")))])],1),e._v(" "),a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("label",[e._v("ភេទ")]),e._v(" "),a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"gender",options:["ប្រុស","ស្រី"]},model:{value:e.data.gender,callback:function(t){e.$set(e.data,"gender",t)},expression:"data.gender"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("gender"),expression:"errors.has('gender')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("gender")))])],1)]),e._v(" "),a("div",{staticClass:"vx-row mt-2"},[a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("label",[e._v("ថ្ងៃខែឆ្នាំកំណើត")]),e._v(" "),a("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"full-width",attrs:{dense:"",outlined:"",square:"",name:"dob"},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{ref:"datePurchase",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{on:{input:function(){return e.$refs.datePurchase.hide()}},model:{value:e.data.dob,callback:function(t){e.$set(e.data,"dob",t)},expression:"data.dob"}})],1)],1)]},proxy:!0}]),model:{value:e.data.dob,callback:function(t){e.$set(e.data,"dob",t)},expression:"data.dob"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("dob"),expression:"errors.has('dob')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("dob")))])],1),e._v(" "),a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("label",[e._v("អ្នកប្រើប្រាស់")]),e._v(" "),a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"user_id",label:"name",options:e.all_users},model:{value:e.data.user_id,callback:function(t){e.$set(e.data,"user_id",t)},expression:"data.user_id"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("user_id"),expression:"errors.has('user_id')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("user_id")))])],1)]),e._v(" "),a("div",{staticClass:"vx-row mt-2"},[a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("label",[e._v("ទំនាក់ទំនង")]),e._v(" "),a("vs-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"contact",label:"ទំនាក់ទំនង"},model:{value:e.data.contact,callback:function(t){e.$set(e.data,"contact",t)},expression:"data.contact"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("contact"),expression:"errors.has('contact')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("contact")))])],1),e._v(" "),a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("label",[e._v("អាស័យដ្ឋានបច្ចុប្បន្ន និងកំណើត")]),e._v(" "),a("vs-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"address",label:"អាស័យដ្ឋានបច្ចុប្បន្ន និងកំណើត"},model:{value:e.data.address,callback:function(t){e.$set(e.data,"address",t)},expression:"data.address"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("address"),expression:"errors.has('address')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("address")))])],1)])]),e._v(" "),a("div",{staticClass:"vx-col md:w-1/4"},[a("label",[e._v("ប្រូហ្វាល")]),e._v(" "),a("vue-dropzone",{ref:"image",staticClass:"max-content p-1",attrs:{duplicateCheck:"",id:"dropzone",options:e.dropzoneOptions},on:{"vdropzone-success":e.successUpload}})],1)]),e._v(" "),a("vs-divider"),e._v(" "),a("div",{staticClass:"flex justify-end btn-group"},[a("vs-button",{attrs:{icon:"icon-save","icon-pack":"feather",type:"relief"},on:{click:e.storeEmployee}},[e._v("រក្សាទុក\n                        ")])],1)],1)],1)],1)],1)],1)}),[],!1,null,"fedf4bb8",null).exports,f={name:"editEmployee",components:{vueDropzone:c.a,"v-select":o.a,flatPickr:l.a},data:function(){return{dialog:!1,data:{id:null,user_id:{id:1,name:"ជ្រើសរើស"},dob:null,name:null,contact:null,address:null,gender:"ប្រុស",profile:"/images/placeholder/placeholder.png"},dropzoneOptions:{url:route("file.upload.thumb"),maxFiles:1,addRemoveLinks:!0,dictDefaultMessage:"ដាក់រូបភាពបើមាន",thumbnailWidth:150,thumbnailHeight:150}}},computed:{all_users:function(){return this.$store.getters.all_user}},methods:{loadProfile:function(){this.$refs.profile.manuallyAddFile({size:123},this.data.profile)},show:function(e){this.dialog=!0,this.data.id=e.id,this.data.user_id=e.user,this.data.dob=e.dob,this.data.name=e.name,this.data.contact=e.contact,this.data.address=e.address,this.data.gender=e.gender,this.data.profile=e.profile},updateEmployee:function(){var e=this;this.$validator.validateAll().then((function(t){t?(e.$vs.loading(),e.$store.dispatch("updateEmployee",e.data).then((function(t){t?(e.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានកែប្រែ",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),e.$emit("finished")):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"ទិន្នន័យមិនបានកែប្រែ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"}),e.$vs.loading.close()}))):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"សូមបំពេញទិន្នន័យអោយបានត្រឹមត្រូវ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"})}))},successUpload:function(e,t){this.data.profile=t.path}}},m=Object(u.a)(f,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-dialog",{attrs:{persistent:"",maximized:!0,"transition-show":"slide-up","transition-hide":"slide-down"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("q-card",[a("q-bar",[a("q-space"),e._v(" "),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}},[a("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[e._v("Close")])],1)],1),e._v(" "),a("q-card-section",[a("vx-card",{attrs:{"no-shadow":""}},[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-3/4"},[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-1/2 w-full mt-1"},[a("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{"label-placeholder":"ឈ្មោះ",name:"name"},model:{value:e.data.name,callback:function(t){e.$set(e.data,"name",t)},expression:"data.name"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("name"),expression:"errors.has('name')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("name")))])],1),e._v(" "),a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("label",[e._v("ភេទ")]),e._v(" "),a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"gender",options:["ប្រុស","ស្រី"]},model:{value:e.data.gender,callback:function(t){e.$set(e.data,"gender",t)},expression:"data.gender"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("gender"),expression:"errors.has('gender')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("gender")))])],1)]),e._v(" "),a("div",{staticClass:"vx-row mt-2"},[a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("label",[e._v("ថ្ងៃខែឆ្នាំកំណើត")]),e._v(" "),a("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"full-width",attrs:{dense:"",outlined:"",square:"",name:"dob"},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{ref:"datePurchase",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{on:{input:function(){return e.$refs.datePurchase.hide()}},model:{value:e.data.dob,callback:function(t){e.$set(e.data,"dob",t)},expression:"data.dob"}})],1)],1)]},proxy:!0}]),model:{value:e.data.dob,callback:function(t){e.$set(e.data,"dob",t)},expression:"data.dob"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("dob"),expression:"errors.has('dob')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("dob")))])],1),e._v(" "),a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("label",[e._v("អ្នកប្រើប្រាស់")]),e._v(" "),a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"user_id",label:"name",options:e.all_users},model:{value:e.data.user_id,callback:function(t){e.$set(e.data,"user_id",t)},expression:"data.user_id"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("user_id"),expression:"errors.has('user_id')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("user_id")))])],1)]),e._v(" "),a("div",{staticClass:"vx-row mt-2"},[a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("label",[e._v("ទំនាក់ទំនង")]),e._v(" "),a("vs-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"contact",label:"ទំនាក់ទំនង"},model:{value:e.data.contact,callback:function(t){e.$set(e.data,"contact",t)},expression:"data.contact"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("contact"),expression:"errors.has('contact')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("contact")))])],1),e._v(" "),a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("label",[e._v("អាស័យដ្ឋានបច្ចុប្បន្ន និងកំណើត")]),e._v(" "),a("vs-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"address",label:"អាស័យដ្ឋានបច្ចុប្បន្ន និងកំណើត"},model:{value:e.data.address,callback:function(t){e.$set(e.data,"address",t)},expression:"data.address"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("address"),expression:"errors.has('address')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("address")))])],1)])]),e._v(" "),a("div",{staticClass:"vx-col md:w-1/4"},[a("label",[e._v("ប្រូហ្វាល")]),e._v(" "),a("vue-dropzone",{ref:"profile",staticClass:"max-content p-1",attrs:{duplicateCheck:"",id:"profile",options:e.dropzoneOptions},on:{"vdropzone-mounted":e.loadProfile,"vdropzone-success":e.successUpload}})],1)]),e._v(" "),a("vs-divider"),e._v(" "),a("div",{staticClass:"flex justify-end btn-group"},[a("vs-button",{attrs:{icon:"icon-edit","icon-pack":"feather",type:"relief"},on:{click:e.updateEmployee}},[e._v("កែប្រែ\n                        ")])],1)],1)],1)],1)],1)],1)}),[],!1,null,"05cf625e",null).exports,h=a("pS5H"),_={name:"addPayRoll",components:{"v-select":o.a,flatPickr:l.a,"money-format":h.a},data:function(){return{dialog:!1,data:{date:null,note:null,items:[{id:{id:0,name:"",contact:""},salary:0}]}}},computed:{total_salary:function(){return this.data.items.reduce((function(e,t){return e+parseFloat(t.salary)}),0)}},methods:{confirmStore:function(){this.$vs.dialog({type:"confirm",color:"success",title:"ផ្ទៀងផ្ទាត់",text:"ចុចពាក្យ Accept ដើម្បីរក្សាទុក!",accept:this.storePayroll})},show:function(e){var t=this;t.dialog=!0,t.data.items=[],e.forEach((function(e,a){t.data.items.push({id:e,salary:0})}))},storePayroll:function(){var e=this;this.$validator.validateAll().then((function(t){t?(e.$vs.loading(),e.$store.dispatch("storePayroll",e.data).then((function(t){t?(e.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានបន្ថែម",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),e.$emit("finished"),e.$modal.hide("add-payroll")):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"ទិន្នន័យមិនបានបន្ថែម",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"}),e.$vs.loading.close()}))):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"សូមបំពេញទិន្នន័យអោយបានត្រឹមត្រូវ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"})}))}}},x=(a("X0o1"),Object(u.a)(_,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-dialog",{attrs:{persistent:"",maximized:!0,"transition-show":"slide-up","transition-hide":"slide-down"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("q-card",[a("q-bar",[a("q-space"),e._v(" "),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}},[a("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[e._v("Close")])],1)],1),e._v(" "),a("q-card-section",[a("vx-card",{attrs:{"no-shadow":""}},[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-1/4 w-full"},[a("label",[e._v("កាលបរិច្ឋេទ")]),e._v(" "),a("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"full-width",attrs:{dense:"",outlined:"",square:"",name:"date"},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{ref:"datePurchase",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{on:{input:function(){return e.$refs.datePurchase.hide()}},model:{value:e.data.date,callback:function(t){e.$set(e.data,"date",t)},expression:"data.date"}})],1)],1)]},proxy:!0}]),model:{value:e.data.date,callback:function(t){e.$set(e.data,"date",t)},expression:"data.date"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("date"),expression:"errors.has('date')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("date")))])],1),e._v(" "),a("div",{staticClass:"vx-col md:w-3/4 w-full"},[a("label",[e._v("សំគាល់")]),e._v(" "),a("vs-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"note",label:"សំគាល់"},model:{value:e.data.note,callback:function(t){e.$set(e.data,"note",t)},expression:"data.note"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("note"),expression:"errors.has('note')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("note")))])],1)]),e._v(" "),a("div",{staticClass:"vx-row mt-2"},[a("div",{staticClass:"vx-col w-full"},[a("table",[a("thead",[a("tr",[a("th",[e._v("ល.រ")]),e._v(" "),a("th",[e._v("ឈ្មោះ")]),e._v(" "),a("th",[e._v("ទំនាក់ទំនង")]),e._v(" "),a("th",[e._v("ទឹកប្រាក់")])])]),e._v(" "),a("tbody",e._l(e.data.items,(function(t,s){return a("tr",{key:s},[a("td",{staticClass:"pl-3"},[e._v(e._s(s+1))]),e._v(" "),a("td",{staticClass:"pl-3"},[e._v(e._s(t.id.name))]),e._v(" "),a("td",{staticClass:"pl-3"},[e._v(e._s(t.id.contact))]),e._v(" "),a("td",{staticClass:"pl-3"},[a("vs-input-number",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{min:0,name:s+"-salary",color:"warning"},model:{value:t.salary,callback:function(a){e.$set(t,"salary",a)},expression:"item.salary"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has(s+"-salary"),expression:"errors.has(`${index}-salary`)"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first(s+"-salary")))])],1)])})),0),e._v(" "),a("tfoot",[a("tr",[a("td"),e._v(" "),a("td"),e._v(" "),a("td",{staticClass:"text-right"},[e._v("សរុប")]),e._v(" "),a("td",{staticClass:"pl-3"},[a("money-format",{attrs:{value:e.total_salary,locale:"en","currency-code":"USD"}})],1)])])])])]),e._v(" "),a("vs-divider"),e._v(" "),a("div",{staticClass:"flex justify-end btn-group"},[a("vs-button",{attrs:{icon:"icon-save","icon-pack":"feather",type:"relief"},on:{click:e.confirmStore}},[e._v("រក្សាទុក")])],1)],1)],1)],1)],1)],1)}),[],!1,null,"254c6fdf",null).exports),y={name:"editPayRoll",components:{"v-select":o.a,flatPickr:l.a,"money-format":h.a},data:function(){return{dialog:!1,data:{id:null,date:null,note:null,items:[{id:{id:0,name:"",contact:""},salary:0}]}}},computed:{total_salary:function(){return this.data.items.reduce((function(e,t){return e+parseFloat(t.salary)}),0)}},methods:{confirmUpdate:function(){this.$vs.dialog({type:"confirm",color:"success",title:"ផ្ទៀងផ្ទាត់",text:"ចុចពាក្យ Accept ដើម្បីរក្សាទុក!",accept:this.updatePayroll})},show:function(e){var t=this;t.dialog=!0,t.data.id=e.id,t.data.date=e.date,t.data.note=e.note,t.data.items=[],e.pay_roll_detail.forEach((function(e,a){t.data.items.push({id:e.employee,salary:e.salary})}))},updatePayroll:function(){var e=this;this.$validator.validateAll().then((function(t){t?(e.$vs.loading(),e.$store.dispatch("updatePayroll",e.data).then((function(t){t?(e.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានបន្ថែម",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),e.$emit("finished")):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"ទិន្នន័យមិនបានបន្ថែម",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"}),e.$vs.loading.close()}))):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"សូមបំពេញទិន្នន័យអោយបានត្រឹមត្រូវ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"})}))},removeLine:function(e){this.data.items.splice(e,1)}}},w=(a("T8ub"),Object(u.a)(y,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-dialog",{attrs:{persistent:"",maximized:!0,"transition-show":"slide-up","transition-hide":"slide-down"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("q-card",[a("q-bar",[a("q-space"),e._v(" "),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}},[a("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[e._v("Close")])],1)],1),e._v(" "),a("q-card-section",[a("vx-card",{attrs:{"no-shadow":""}},[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-1/4 w-full"},[a("label",[e._v("កាលបរិច្ឋេទ")]),e._v(" "),a("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"full-width",attrs:{dense:"",outlined:"",square:"",name:"date"},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{ref:"datePurchase",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{on:{input:function(){return e.$refs.datePurchase.hide()}},model:{value:e.data.date,callback:function(t){e.$set(e.data,"date",t)},expression:"data.date"}})],1)],1)]},proxy:!0}]),model:{value:e.data.date,callback:function(t){e.$set(e.data,"date",t)},expression:"data.date"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("date"),expression:"errors.has('date')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("date")))])],1),e._v(" "),a("div",{staticClass:"vx-col md:w-3/4 w-full"},[a("label",[e._v("សំគាល់")]),e._v(" "),a("vs-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"note",label:"សំគាល់"},model:{value:e.data.note,callback:function(t){e.$set(e.data,"note",t)},expression:"data.note"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("note"),expression:"errors.has('note')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("note")))])],1)]),e._v(" "),a("div",{staticClass:"vx-row mt-2"},[a("div",{staticClass:"vx-col w-full"},[a("table",[a("thead",[a("tr",[a("th",[e._v("ល.រ")]),e._v(" "),a("th",[e._v("ឈ្មោះ")]),e._v(" "),a("th",[e._v("ទំនាក់ទំនង")]),e._v(" "),a("th",[e._v("ទឹកប្រាក់")]),e._v(" "),a("th")])]),e._v(" "),a("tbody",e._l(e.data.items,(function(t,s){return a("tr",{key:s},[a("td",{staticClass:"pl-3"},[e._v(e._s(s+1))]),e._v(" "),a("td",{staticClass:"pl-3"},[e._v(e._s(t.id.name))]),e._v(" "),a("td",{staticClass:"pl-3"},[e._v(e._s(t.id.contact))]),e._v(" "),a("td",{staticClass:"pl-3"},[a("vs-input-number",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{min:0,name:s+"-salary",color:"warning"},model:{value:t.salary,callback:function(a){e.$set(t,"salary",a)},expression:"item.salary"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has(s+"-salary"),expression:"errors.has(`${index}-salary`)"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first(s+"-salary")))])],1),e._v(" "),a("td",{staticClass:"pl-4"},[a("vs-button",{attrs:{size:"small",radius:"",color:"danger",icon:"icon-minus-square","icon-pack":"feather",type:"flat"},on:{click:function(t){return e.removeLine(s)}}})],1)])})),0),e._v(" "),a("tfoot",[a("tr",[a("td"),e._v(" "),a("td"),e._v(" "),a("td",{staticClass:"text-right"},[e._v("សរុប")]),e._v(" "),a("td",{staticClass:"pl-3"},[a("money-format",{attrs:{value:e.total_salary,locale:"en","currency-code":"USD"}})],1),e._v(" "),a("td")])])])])]),e._v(" "),a("vs-divider"),e._v(" "),a("div",{staticClass:"flex justify-end btn-group"},[a("vs-button",{attrs:{icon:"icon-save","icon-pack":"feather",type:"relief"},on:{click:e.confirmUpdate}},[e._v("រក្សាទុក")])],1)],1)],1)],1)],1)],1)}),[],!1,null,"f9666da2",null).exports),b=a("q+Mi"),g=a("rdXg"),k=a.n(g);function q(e,t,a,s,r,n,o){try{var i=e[n](o),l=i.value}catch(e){return void a(e)}i.done?t(l):Promise.resolve(l).then(s,r)}function C(e){return function(){var t=this,a=arguments;return new Promise((function(s,r){var n=e.apply(t,a);function o(e){q(n,s,r,o,i,"next",e)}function i(e){q(n,s,r,o,i,"throw",e)}o(void 0)}))}}var $,P,N={name:"showPayRoll",components:{"v-select":o.a,flatPickr:l.a,"money-format":h.a,"bar-code":b.a},data:function(){return{dialog:!1,data:{id:null,date:null,note:null,items:[{id:{id:0,name:"",contact:""},salary:0}]}}},computed:{total_salary:function(){return this.data.items.reduce((function(e,t){return e+parseFloat(t.salary)}),0)}},methods:{_print:(P=C(r.a.mark((function e(){var t,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.querySelector("#printMe"),a={type:"dataURL"},e.next=4,this.$html2canvas(t,a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)}))),function(){return P.apply(this,arguments)}),printHtml:($=C(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._print();case 2:t=e.sent,k()(t,"image");case 4:case"end":return e.stop()}}),e,this)}))),function(){return $.apply(this,arguments)}),confirmUpdate:function(){this.$vs.dialog({type:"confirm",color:"success",title:"ផ្ទៀងផ្ទាត់",text:"ចុចពាក្យ Accept ដើម្បីរក្សាទុក!",accept:this.updatePayroll})},show:function(e){var t=this;t.dialog=!0,t.data.id=e.id,t.data.date=e.date,t.data.note=e.note,t.data.items=[],e.pay_roll_detail.forEach((function(e,a){t.data.items.push({id:e.employee,salary:e.salary})}))},updatePayroll:function(){var e=this;this.$validator.validateAll().then((function(t){t?(e.$vs.loading(),e.$store.dispatch("updatePayroll",e.data).then((function(t){t?(e.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានបន្ថែម",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),e.$emit("finished")):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"ទិន្នន័យមិនបានបន្ថែម",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"}),e.$vs.loading.close()}))):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"សូមបំពេញទិន្នន័យអោយបានត្រឹមត្រូវ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"})}))},removeLine:function(e){this.data.items.splice(e,1)}}};a("HShI");function E(e,t,a,s,r,n,o){try{var i=e[n](o),l=i.value}catch(e){return void a(e)}i.done?t(l):Promise.resolve(l).then(s,r)}function S(e){return function(){var t=this,a=arguments;return new Promise((function(s,r){var n=e.apply(t,a);function o(e){E(n,s,r,o,i,"next",e)}function i(e){E(n,s,r,o,i,"throw",e)}o(void 0)}))}}var z,D,A={name:"Employee",components:{ShowPayRoll:Object(u.a)(N,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-dialog",{attrs:{persistent:"",maximized:!0,"transition-show":"slide-up","transition-hide":"slide-down"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("q-card",[a("q-bar",[a("q-space"),e._v(" "),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}},[a("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[e._v("Close")])],1)],1),e._v(" "),a("q-card-section",[a("vx-card",{attrs:{"no-shadow":""}},[a("div",{attrs:{id:"printMe"}},[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col w-full"},[a("table",[a("thead",[a("tr",[a("th",[e._v("ថ្ងៃបើកប្រាក់ខែ")]),e._v(" "),a("th",[e._v("សំគាល់")]),e._v(" "),a("th",[e._v("Barcode")])])]),e._v(" "),a("tbody",[a("tr",[a("td",[e._v(e._s(e.data.date))]),e._v(" "),a("td",[e._v(e._s(e.data.note))]),e._v(" "),a("td",[a("bar-code",{attrs:{value:e.data.id,options:{displayValue:!0}}})],1)])])])])]),e._v(" "),a("div",{staticClass:"vx-row mt-2"},[a("div",{staticClass:"vx-col w-full"},[a("table",[a("thead",[a("tr",[a("th",[e._v("ល.រ")]),e._v(" "),a("th",[e._v("ឈ្មោះ")]),e._v(" "),a("th",[e._v("ទំនាក់ទំនង")]),e._v(" "),a("th",[e._v("ទឹកប្រាក់")])])]),e._v(" "),a("tbody",e._l(e.data.items,(function(t,s){return a("tr",{key:s},[a("td",{staticClass:"pl-3"},[e._v(e._s(s+1))]),e._v(" "),a("td",{staticClass:"pl-3"},[e._v(e._s(t.id.name))]),e._v(" "),a("td",{staticClass:"pl-3"},[e._v(e._s(t.id.contact))]),e._v(" "),a("td",{staticClass:"pl-3"},[a("money-format",{attrs:{value:parseFloat(t.salary),locale:"en","currency-code":"USD"}})],1)])})),0),e._v(" "),a("tfoot",[a("tr",[a("td"),e._v(" "),a("td"),e._v(" "),a("td",{staticClass:"text-right"},[e._v("សរុប")]),e._v(" "),a("td",{staticClass:"pl-3"},[a("money-format",{attrs:{value:e.total_salary,locale:"en","currency-code":"USD"}})],1)])])])])])]),e._v(" "),a("vs-divider"),e._v(" "),a("div",{staticClass:"flex justify-end btn-group"},[a("vs-button",{attrs:{icon:"icon-printer","icon-pack":"feather",type:"relief"},on:{click:e.printHtml}},[e._v("បោះពុម្ភ\n                        ")])],1)],1)],1)],1)],1)],1)}),[],!1,null,"fec2fd80",null).exports,EditPayRoll:w,AddPayRoll:x,EditEmployee:m,AddEmployee:p,"money-format":h.a},data:function(){return{selected:[],selected_payroll:[]}},computed:{all_employees:function(){return this.$store.getters.all_employee},all_payrolls:function(){return this.$store.getters.all_payroll}},methods:{confirmDelete:function(){this.$vs.dialog({type:"confirm",color:"danger",title:"ផ្ទៀងផ្ទាត់",text:"ចុចពាក្យ Accept ដើម្បីលុប!",accept:this.destroyEmployee})},confirmDeletePayroll:function(){this.$vs.dialog({type:"confirm",color:"danger",title:"ផ្ទៀងផ្ទាត់",text:"ចុចពាក្យ Accept ដើម្បីលុប!",accept:this.destroyPayroll})},calcTotalSalary:function(e){return e.reduce((function(e,t){return e+parseFloat(t.salary)}),0)},destroyEmployee:(D=S(r.a.mark((function e(){var t,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=this).$vs.loading(),a=t.selected.map(function(){var e=S(r.a.mark((function e(a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("destroyEmployee",a.id);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=5,Promise.all(a).then((function(){t.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានលុប",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),t.selected=[],t.$vs.loading.close()}));case 5:case"end":return e.stop()}}),e,this)}))),function(){return D.apply(this,arguments)}),destroyPayroll:(z=S(r.a.mark((function e(){var t,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=this).$vs.loading(),a=t.selected_payroll.map(function(){var e=S(r.a.mark((function e(a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("destroyPayroll",a.id);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=5,Promise.all(a).then((function(){t.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានលុប",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),t.selected_payroll=[],t.$vs.loading.close()}));case 5:case"end":return e.stop()}}),e,this)}))),function(){return z.apply(this,arguments)})}},F=Object(u.a)(A,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("vx-card",{attrs:{"no-shadow":""}},[a("vs-tabs",[a("vs-tab",{attrs:{label:"បុគ្គលិក"}},[a("div",{staticClass:"flex btn-group"},[a("vs-button",{attrs:{type:"relief","icon-pack":"feather",icon:"icon-plus-square"},on:{click:function(t){return e.$refs.addEmployee.show()}}},[e._v("\n                    បន្ថែម\n                ")]),e._v(" "),1===e.selected.length?a("vs-button",{attrs:{color:"warning",type:"relief","icon-pack":"feather",icon:"icon-edit"},on:{click:function(t){return e.$refs.editEmployee.show(e.selected[0])}}},[e._v("\n                    កែប្រែ\n                ")]):e._e(),e._v(" "),e.selected.length?a("vs-button",{attrs:{color:"danger",type:"relief","icon-pack":"feather",icon:"icon-trash"},on:{click:e.confirmDelete}},[e._v("\n                    លុប\n                ")]):e._e(),e._v(" "),e.selected.length?a("vs-button",{attrs:{type:"relief","icon-pack":"feather",icon:"icon-dollar-sign"},on:{click:function(t){return e.$refs.addPayRoll.show(e.selected)}}},[e._v("\n                    Payroll\n                ")]):e._e()],1),e._v(" "),a("add-employee",{ref:"addEmployee"}),e._v(" "),a("edit-employee",{ref:"editEmployee",on:{finished:function(t){e.selected=[]}}}),e._v(" "),a("add-pay-roll",{ref:"addPayRoll",on:{finished:function(t){e.selected=[]}}}),e._v(" "),a("vs-table",{attrs:{multiple:"",stripe:"",search:"",data:e.all_employees},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.data;return e._l(s,(function(t,s){return a("vs-tr",{key:s,attrs:{data:t}},[a("vs-td",{attrs:{data:t.email}},[e._v("\n                            "+e._s(t.email)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:t.profile}},[a("img",{attrs:{src:t.profile,width:"75",alt:t.profile}})]),e._v(" "),a("vs-td",{attrs:{data:t.name}},[e._v("\n                            "+e._s(t.name)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:t.gender}},[e._v("\n                            "+e._s(t.gender)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:t.dob}},[e._v("\n                            "+e._s(t.dob)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:t.contact}},[e._v("\n                            "+e._s(t.contact)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:t.address}},[e._v("\n                            "+e._s(t.address)+"\n                        ")])],1)}))}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},[a("template",{slot:"thead"},[a("vs-th",[e._v("ID")]),e._v(" "),a("vs-th"),e._v(" "),a("vs-th",{attrs:{"sort-key":"name"}},[e._v("ឈ្មោះ")]),e._v(" "),a("vs-th",{attrs:{"sort-key":"sex"}},[e._v("ភេទ")]),e._v(" "),a("vs-th",{attrs:{"sort-key":"dob"}},[e._v("ថ្ងៃខែឆ្នាំកំណើត")]),e._v(" "),a("vs-th",{attrs:{"sort-key":"contact"}},[e._v("ទំនាក់ទំនង")]),e._v(" "),a("vs-th",{attrs:{"sort-key":"address"}},[e._v("អាស័យដ្ឋាន")])],1)],2)],1),e._v(" "),a("vs-tab",{attrs:{label:"បើកប្រាក់ខែ"}},[a("div",{staticClass:"flex btn-group"},[1===e.selected_payroll.length?a("vs-button",{attrs:{type:"relief","icon-pack":"feather",icon:"icon-eye"},on:{click:function(t){return e.$refs.showPayroll.show(e.selected_payroll[0])}}},[e._v("\n                    បង្ហាញ\n                ")]):e._e(),e._v(" "),1===e.selected_payroll.length?a("vs-button",{attrs:{color:"warning",type:"relief","icon-pack":"feather",icon:"icon-edit"},on:{click:function(t){return e.$refs.editPayroll.show(e.selected_payroll[0])}}},[e._v("\n                    កែប្រែ\n                ")]):e._e(),e._v(" "),e.selected_payroll.length?a("vs-button",{attrs:{color:"danger",type:"relief","icon-pack":"feather",icon:"icon-trash"},on:{click:e.confirmDeletePayroll}},[e._v("\n                    លុប\n                ")]):e._e()],1),e._v(" "),a("show-pay-roll",{ref:"showPayroll",on:{finished:function(t){e.selected_payroll=[]}}}),e._v(" "),a("edit-pay-roll",{ref:"editPayroll",on:{finished:function(t){e.selected_payroll=[]}}}),e._v(" "),a("vs-table",{attrs:{multiple:"",stripe:"",search:"",data:e.all_payrolls},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.data;return e._l(s,(function(t,s){return a("vs-tr",{key:s,attrs:{data:t}},[a("vs-td",{attrs:{data:t.id}},[e._v("\n                            "+e._s(t.id)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:t.note}},[e._v("\n                            "+e._s(t.note)+"\n                        ")]),e._v(" "),a("vs-td",[a("money-format",{attrs:{value:e.calcTotalSalary(t.pay_roll_detail),locale:"en","currency-code":"USD"}})],1),e._v(" "),a("vs-td",{attrs:{data:t.date}},[e._v("\n                            "+e._s(t.date)+"\n                        ")])],1)}))}}]),model:{value:e.selected_payroll,callback:function(t){e.selected_payroll=t},expression:"selected_payroll"}},[a("template",{slot:"thead"},[a("vs-th",[e._v("ID")]),e._v(" "),a("vs-th",{attrs:{"sort-key":"note"}},[e._v("សំគាល់")]),e._v(" "),a("vs-th",[e._v("ទឹកប្រាក់បើកសរុប")]),e._v(" "),a("vs-th",{attrs:{"sort-key":"date"}},[e._v("ថ្ងៃខែឆ្នាំបើក")])],1)],2)],1)],1)],1)}),[],!1,null,"fe2a6fd8",null);t.default=F.exports},"v/ur":function(e,t,a){(e.exports=a("I1BE")(!1)).push([e.i,"[dir] table[data-v-254c6fdf], [dir] td[data-v-254c6fdf], [dir] th[data-v-254c6fdf] {\n  border: 1px solid black;\n}\ntable[data-v-254c6fdf] {\n  border-collapse: collapse;\n  width: 100%;\n}\n[dir=ltr] th[data-v-254c6fdf] {\n  text-align: left;\n}\n[dir=rtl] th[data-v-254c6fdf] {\n  text-align: right;\n}\n",""])}}]);