(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{"27vA":function(e,a,s){"use strict";s.r(a);var t=s("o0o1"),i=s.n(t),r=s("Snq/"),o=s.n(r),n=s("w48C"),l=s.n(n),c=(s("K+Wz"),s("ksP6")),d=s.n(c),v=(s("Hj/Q"),{name:"addUser",components:{vueDropzone:d.a,"v-select":o.a,flatPickr:l.a},data:function(){return{data:{name:"",email:"",password:"",confirm_password:"",profile:"/images/placeholder/placeholder.png"},dropzoneOptions:{url:route("file.upload.thumb"),maxFiles:1,addRemoveLinks:!0,dictDefaultMessage:"ដាក់រូបភាពបើមាន",thumbnailWidth:150,thumbnailHeight:150}}},computed:{},methods:{show:function(){this.$modal.show("add-user")},storeUser:function(){var e=this;this.$validator.validateAll().then((function(a){a?(e.$vs.loading(),e.$store.dispatch("storeUser",e.data).then((function(a){a?(e.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានបន្ថែម",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),e.resetField()):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"ទិន្នន័យមិនបានបន្ថែម",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"}),e.$vs.loading.close()}))):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"សូមបំពេញទិន្នន័យអោយបានត្រឹមត្រូវ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"})}))},resetField:function(){this.data={name:"",email:"",password:"",confirm_password:"",profile:"/images/placeholder/placeholder.png"}},successUpload:function(e,a){this.data.profile=a.path}}}),u=s("KHd+"),p=Object(u.a)(v,(function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("div",[s("modal",{attrs:{width:"50%",height:"auto",scrollable:!0,pivotY:.2,clickToClose:!1,name:"add-user"}},[s("div",{staticClass:"flex justify-end"},[s("i",{staticClass:"vs-icon vs-popup--close material-icons text-warning",staticStyle:{background:"rgb(255, 255, 255)"},on:{click:function(a){return e.$modal.hide("add-user")}}},[e._v("close")])]),e._v(" "),s("vx-card",{attrs:{"no-shadow":""}},[s("div",{staticClass:"vx-row"},[s("div",{staticClass:"vx-col md:w-3/4"},[s("div",{staticClass:"vx-row"},[s("div",{staticClass:"vx-col w-full"},[s("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{"label-placeholder":"ឈ្មោះ",name:"name"},model:{value:e.data.name,callback:function(a){e.$set(e.data,"name",a)},expression:"data.name"}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("name"),expression:"errors.has('name')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("name")))])],1),e._v(" "),s("div",{staticClass:"vx-col w-full mt-2"},[s("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"w-full",attrs:{"label-placeholder":"អ៊ីម៉ែល",name:"email"},model:{value:e.data.email,callback:function(a){e.$set(e.data,"email",a)},expression:"data.email"}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("email"),expression:"errors.has('email')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("email")))])],1),e._v(" "),s("div",{staticClass:"vx-col w-full mt-2"},[s("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"min:6|max:10",expression:"'min:6|max:10'"}],ref:"password",staticClass:"w-full",attrs:{type:"password","label-placeholder":"ពាក្យសម្ងាត់",name:"password"},model:{value:e.data.password,callback:function(a){e.$set(e.data,"password",a)},expression:"data.password"}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("password"),expression:"errors.has('password')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("password")))])],1),e._v(" "),s("div",{staticClass:"vx-col w-full mt-2"},[s("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"min:6|max:10|confirmed:password",expression:"'min:6|max:10|confirmed:password'"}],staticClass:"w-full",attrs:{type:"password","label-placeholder":"ផ្ទៀងផ្ទាត់ ពាក្យសម្ងាត់",name:"confirm_password"},model:{value:e.data.confirm_password,callback:function(a){e.$set(e.data,"confirm_password",a)},expression:"data.confirm_password"}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("confirm_password"),expression:"errors.has('confirm_password')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("confirm_password")))])],1)])]),e._v(" "),s("div",{staticClass:"vx-col md:w-1/4"},[s("label",[e._v("ប្រូហ្វាល")]),e._v(" "),s("vue-dropzone",{ref:"image",staticClass:"max-content p-1",attrs:{duplicateCheck:"",id:"dropzone",options:e.dropzoneOptions},on:{"vdropzone-success":e.successUpload}})],1)]),e._v(" "),s("vs-divider"),e._v(" "),s("div",{staticClass:"flex justify-end btn-group"},[s("vs-button",{attrs:{icon:"icon-save","icon-pack":"feather",type:"relief"},on:{click:e.storeUser}},[e._v("រក្សាទុក\n                ")])],1)],1)],1)],1)}),[],!1,null,"b8bd99ec",null).exports,m={name:"editUser",components:{vueDropzone:d.a,"v-select":o.a,flatPickr:l.a},data:function(){return{data:{id:null,name:"",email:"",profile:"/images/placeholder/placeholder.png"},dropzoneOptions:{url:route("file.upload.thumb"),maxFiles:1,addRemoveLinks:!0,dictDefaultMessage:"ដាក់រូបភាពបើមាន",thumbnailWidth:150,thumbnailHeight:150}}},methods:{loadProfile:function(){this.$refs.profile.manuallyAddFile({size:123},this.data.profile)},show:function(e){this.$modal.show("edit-user"),this.data.id=e.id,this.data.name=e.name,this.data.email=e.email,this.data.profile=e.profile},updateUser:function(){var e=this;this.$validator.validateAll().then((function(a){a?(e.$vs.loading(),e.$store.dispatch("updateUser",e.data).then((function(a){a?(e.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានបន្ថែម",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),e.fetchUser(),e.$emit("finished")):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"ទិន្នន័យមិនបានបន្ថែម",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"}),e.$vs.loading.close()}))):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"សូមបំពេញទិន្នន័យអោយបានត្រឹមត្រូវ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"})}))},successUpload:function(e,a){this.data.profile=a.path}}},f=Object(u.a)(m,(function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("div",[s("modal",{attrs:{width:"50%",height:"auto",scrollable:!0,pivotY:.2,clickToClose:!1,name:"edit-user"}},[s("div",{staticClass:"flex justify-end"},[s("i",{staticClass:"vs-icon vs-popup--close material-icons text-warning",staticStyle:{background:"rgb(255, 255, 255)"},on:{click:function(a){return e.$modal.hide("edit-user")}}},[e._v("close")])]),e._v(" "),s("vx-card",{attrs:{"no-shadow":""}},[s("div",{staticClass:"vx-row"},[s("div",{staticClass:"vx-col md:w-3/4"},[s("div",{staticClass:"vx-row"},[s("div",{staticClass:"vx-col w-full"},[s("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{"label-placeholder":"ឈ្មោះ",name:"name"},model:{value:e.data.name,callback:function(a){e.$set(e.data,"name",a)},expression:"data.name"}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("name"),expression:"errors.has('name')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("name")))])],1),e._v(" "),s("div",{staticClass:"vx-col w-full mt-2"},[s("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"w-full",attrs:{"label-placeholder":"អ៊ីម៉ែល",name:"email"},model:{value:e.data.email,callback:function(a){e.$set(e.data,"email",a)},expression:"data.email"}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("email"),expression:"errors.has('email')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("email")))])],1)])]),e._v(" "),s("div",{staticClass:"vx-col md:w-1/4"},[s("label",[e._v("ប្រូហ្វាល")]),e._v(" "),s("vue-dropzone",{ref:"profile",staticClass:"max-content p-1",attrs:{duplicateCheck:"",id:"profile",options:e.dropzoneOptions},on:{"vdropzone-mounted":e.loadProfile,"vdropzone-success":e.successUpload}})],1)]),e._v(" "),s("vs-divider"),e._v(" "),s("div",{staticClass:"flex justify-end btn-group"},[s("vs-button",{attrs:{icon:"icon-edit","icon-pack":"feather",type:"relief"},on:{click:e.updateUser}},[e._v("កែប្រែ\n                ")])],1)],1)],1)],1)}),[],!1,null,"00b24ea8",null).exports,h={name:"changePassword",data:function(){return{data:{id:null,password:"",confirm_password:""}}},methods:{show:function(e){this.$modal.show("change-password"),this.data.id=e.id},updateUserPassword:function(){var e=this;this.$validator.validateAll().then((function(a){a?(e.$vs.loading(),e.$store.dispatch("updateUserPassword",e.data).then((function(a){a?(e.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានបន្ថែម",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),e.$emit("finished")):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"ទិន្នន័យមិនបានបន្ថែម",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"}),e.$vs.loading.close()}))):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"សូមបំពេញទិន្នន័យអោយបានត្រឹមត្រូវ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"})}))}}};function w(e,a,s,t,i,r,o){try{var n=e[r](o),l=n.value}catch(e){return void s(e)}n.done?a(l):Promise.resolve(l).then(t,i)}function _(e){return function(){var a=this,s=arguments;return new Promise((function(t,i){var r=e.apply(a,s);function o(e){w(r,t,i,o,n,"next",e)}function n(e){w(r,t,i,o,n,"throw",e)}o(void 0)}))}}var x,g={name:"User",components:{ChangePassword:Object(u.a)(h,(function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("div",[s("modal",{attrs:{width:"30%",height:"auto",scrollable:!0,pivotY:.2,clickToClose:!1,name:"change-password"}},[s("div",{staticClass:"flex justify-end"},[s("i",{staticClass:"vs-icon vs-popup--close material-icons text-warning",staticStyle:{background:"rgb(255, 255, 255)"},on:{click:function(a){return e.$modal.hide("change-password")}}},[e._v("close")])]),e._v(" "),s("vx-card",{attrs:{"no-shadow":""}},[s("div",{staticClass:"vx-row"},[s("div",{staticClass:"vx-col w-full mt-2"},[s("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:6|max:10",expression:"'required|min:6|max:10'"}],ref:"password",staticClass:"w-full",attrs:{type:"password","label-placeholder":"ពាក្យសម្ងាត់",name:"password"},model:{value:e.data.password,callback:function(a){e.$set(e.data,"password",a)},expression:"data.password"}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("password"),expression:"errors.has('password')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("password")))])],1),e._v(" "),s("div",{staticClass:"vx-col w-full mt-2"},[s("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:6|max:10|confirmed:password",expression:"'required|min:6|max:10|confirmed:password'"}],staticClass:"w-full",attrs:{type:"password","label-placeholder":"ផ្ទៀងផ្ទាត់ ពាក្យសម្ងាត់",name:"confirm_password"},model:{value:e.data.confirm_password,callback:function(a){e.$set(e.data,"confirm_password",a)},expression:"data.confirm_password"}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("confirm_password"),expression:"errors.has('confirm_password')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("confirm_password")))])],1)]),e._v(" "),s("vs-divider"),e._v(" "),s("div",{staticClass:"flex justify-end btn-group"},[s("vs-button",{attrs:{icon:"icon-edit","icon-pack":"feather",type:"relief"},on:{click:e.updateUserPassword}},[e._v("ប្តូរ\n                ")])],1)],1)],1)],1)}),[],!1,null,"2052dcdf",null).exports,EditUser:f,AddUser:p},data:function(){return{selected:[],users:[{id:1,name:"Leanne Graham",username:"Bret",email:"Sincere@april.biz",website:"hildegard.org"},{id:2,name:"Ervin Howell",username:"Antonette",email:"Shanna@melissa.tv",website:"anastasia.net"},{id:3,name:"Clementine Bauch",username:"Samantha",email:"Nathan@yesenia.net",website:"ramiro.info"},{id:4,name:"Patricia Lebsack",username:"Karianne",email:"Julianne.OConner@kory.org",website:"kale.biz"}]}},computed:{all_users:function(){return this.$store.getters.all_user}},methods:{confirmDelete:function(){this.$vs.dialog({type:"confirm",color:"danger",title:"ផ្ទៀងផ្ទាត់",text:"ចុចពាក្យ Accept ដើម្បីលុប!",accept:this.destroyUser})},destroyUser:(x=_(i.a.mark((function e(){var a,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=this).$vs.loading(),s=a.selected.map(function(){var e=_(i.a.mark((function e(s){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.$store.dispatch("destroyUser",s.id);case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()),e.next=5,Promise.all(s).then((function(){a.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានលុប",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),a.selected=[],a.$vs.loading.close()}));case 5:case"end":return e.stop()}}),e,this)}))),function(){return x.apply(this,arguments)})}},k=Object(u.a)(g,(function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("vx-card",{attrs:{"no-shadow":""}},[s("div",{staticClass:"flex btn-group"},[s("vs-button",{attrs:{type:"relief","icon-pack":"feather",icon:"icon-plus-square"},on:{click:function(a){return e.$refs.addUser.show()}}},[e._v("\n            បន្ថែម\n        ")]),e._v(" "),1===e.selected.length?s("vs-button",{attrs:{color:"success",type:"relief","icon-pack":"feather",icon:"icon-edit"},on:{click:function(a){return e.$refs.editUser.show(e.selected[0])}}},[e._v("\n            កែប្រែ\n        ")]):e._e(),e._v(" "),1===e.selected.length?s("vs-button",{attrs:{color:"dark",type:"relief","icon-pack":"feather",icon:"icon-edit"},on:{click:function(a){return e.$refs.changePassword.show(e.selected[0])}}},[e._v("\n            ប្តូរលេខសម្ងាត់\n        ")]):e._e(),e._v(" "),e.selected.length?s("vs-button",{attrs:{color:"danger",type:"relief","icon-pack":"feather",icon:"icon-trash"},on:{click:e.confirmDelete}},[e._v("\n            លុប\n        ")]):e._e()],1),e._v(" "),s("add-user",{ref:"addUser"}),e._v(" "),s("edit-user",{ref:"editUser",on:{finished:function(a){e.selected=[]}}}),e._v(" "),s("change-password",{ref:"changePassword",on:{finished:function(a){e.selected=[]}}}),e._v(" "),s("vs-table",{attrs:{multiple:"",stripe:"",search:"",data:e.all_users},scopedSlots:e._u([{key:"default",fn:function(a){var t=a.data;return e._l(t,(function(a,t){return s("vs-tr",{key:t,attrs:{data:a}},[s("vs-td",{attrs:{data:a.id}},[e._v("\n                    "+e._s(a.id)+"\n                ")]),e._v(" "),s("vs-td",{attrs:{data:a.profile}},[s("img",{attrs:{src:a.profile,width:"75",alt:a.profile}})]),e._v(" "),s("vs-td",{attrs:{data:a.name}},[e._v("\n                    "+e._s(a.name)+"\n                ")]),e._v(" "),s("vs-td",{attrs:{data:a.email}},[e._v("\n                    "+e._s(a.email)+"\n                ")])],1)}))}}]),model:{value:e.selected,callback:function(a){e.selected=a},expression:"selected"}},[s("template",{slot:"thead"},[s("vs-th",{attrs:{"sort-key":"id"}},[e._v("ID")]),e._v(" "),s("vs-th"),e._v(" "),s("vs-th",{attrs:{"sort-key":"name"}},[e._v("ឈ្មោះ")]),e._v(" "),s("vs-th",{attrs:{"sort-key":"email"}},[e._v("អ៊ីម៉ែល")])],1)],2)],1)}),[],!1,null,"5e50f5c9",null);a.default=k.exports}}]);