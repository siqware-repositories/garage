(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{"4hyD":function(e,t,a){"use strict";var s={name:"addCategory",data:function(){return{category:""}},methods:{show:function(){this.$modal.show("add-category")},storeCategory:function(){var e=this;this.$validator.validateAll().then((function(t){t?(e.$vs.loading(),e.$store.dispatch("storeCategory",{name:e.category}).then((function(t){t?(e.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានបន្ថែម",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),e.resetField()):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"ទិន្នន័យមិនបានបន្ថែម",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"}),e.$vs.loading.close()}))):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"សូមបំពេញទិន្នន័យអោយបានត្រឹមត្រូវ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"})}))},resetField:function(){this.category=""}}},r=a("KHd+"),n=Object(r.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("modal",{attrs:{height:"auto",scrollable:!0,pivotY:.2,clickToClose:!1,name:"add-category"}},[a("div",{staticClass:"flex justify-end"},[a("i",{staticClass:"vs-icon vs-popup--close material-icons text-warning",staticStyle:{background:"rgb(255, 255, 255)"},on:{click:function(t){return e.$modal.hide("add-category")}}},[e._v("close")])]),e._v(" "),a("vx-card",{attrs:{"no-shadow":""}},[a("div",{staticClass:"vx-row mb-10"},[a("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{"label-placeholder":"ឈ្មោះ",name:"category"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.storeCategory(t)}},model:{value:e.category,callback:function(t){e.category=t},expression:"category"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("category"),expression:"errors.has('category')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("category")))])],1)])],1)}),[],!1,null,"b31718a8",null);t.a=n.exports},"9Dpo":function(e,t,a){"use strict";var s={name:"addBrand",data:function(){return{brand:""}},methods:{show:function(){this.$modal.show("add-brand")},storeBrand:function(){var e=this;this.$validator.validateAll().then((function(t){t?(e.$vs.loading(),e.$store.dispatch("storeBrand",{name:e.brand}).then((function(t){t?(e.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានបន្ថែម",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),e.resetField()):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"ទិន្នន័យមិនបានបន្ថែម",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"}),e.$vs.loading.close()}))):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"សូមបំពេញទិន្នន័យអោយបានត្រឹមត្រូវ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"})}))},resetField:function(){this.brand=""}}},r=a("KHd+"),n=Object(r.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("modal",{attrs:{height:"auto",scrollable:!0,pivotY:.2,clickToClose:!1,name:"add-brand"}},[a("div",{staticClass:"flex justify-end"},[a("i",{staticClass:"vs-icon vs-popup--close material-icons text-warning",staticStyle:{background:"rgb(255, 255, 255)"},on:{click:function(t){return e.$modal.hide("add-brand")}}},[e._v("close")])]),e._v(" "),a("vx-card",{attrs:{"no-shadow":""}},[a("div",{staticClass:"vx-row mb-10"},[a("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{"label-placeholder":"ឈ្មោះ",name:"brand"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.storeBrand(t)}},model:{value:e.brand,callback:function(t){e.brand=t},expression:"brand"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("brand"),expression:"errors.has('brand')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("brand")))])],1)])],1)}),[],!1,null,"1dd572a1",null);t.a=n.exports},CLzC:function(e,t,a){"use strict";var s=a("ksP6"),r=a.n(s),n=(a("Hj/Q"),a("yo3J")),i=a("4hyD"),o={name:"addSupplier",components:{AddBrand:a("9Dpo").a,AddCategory:i.a,AddUnit:n.a,vueDropzone:r.a},data:function(){return{supplier:{name:null,company:null,contact:null,note:null,address:null}}},computed:{all_units:function(){return this.$store.getters.all_unit},all_categories:function(){return this.$store.getters.all_category},all_brands:function(){return this.$store.getters.all_brand}},methods:{show:function(){this.$modal.show("add-supplier")},storeSupplier:function(){var e=this;this.$validator.validateAll().then((function(t){t?(e.$vs.loading(),e.$store.dispatch("storeSupplier",e.supplier).then((function(t){t?(e.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានបន្ថែម",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),e.resetField()):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"ទិន្នន័យមិនបានបន្ថែម",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"}),e.$vs.loading.close()}))):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"សូមបំពេញទិន្នន័យអោយបានត្រឹមត្រូវ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"})}))},resetField:function(){this.product={name:"",description:"",unit:"ដំុ",category:"គ្រឿងក្រោម",brand:"AKA",inventory_type:"inventory_part",purchase:1,sale:1,image:"placeholder/placeholder.png"}},successUpload:function(e,t){this.product.image=t.path}}},c=a("KHd+"),l=Object(c.a)(o,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("modal",{attrs:{width:"60%",height:"auto",scrollable:!0,pivotY:.2,clickToClose:!1,name:"add-supplier"}},[a("div",{staticClass:"flex justify-end"},[a("i",{staticClass:"vs-icon vs-popup--close material-icons text-warning",staticStyle:{background:"rgb(255, 255, 255)"},on:{click:function(t){return e.$modal.hide("add-supplier")}}},[e._v("close")])]),e._v(" "),a("vx-card",{attrs:{"no-shadow":""}},[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-2/3 w-full"},[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{"label-placeholder":"ឈ្មោះ",name:"name"},model:{value:e.supplier.name,callback:function(t){e.$set(e.supplier,"name",t)},expression:"supplier.name"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("name"),expression:"errors.has('name')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("name")))])],1),e._v(" "),a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{"label-placeholder":"ឈ្មោះក្រុមហ៊ុន",name:"company"},model:{value:e.supplier.company,callback:function(t){e.$set(e.supplier,"company",t)},expression:"supplier.company"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("company"),expression:"errors.has('company')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("company")))])],1)]),e._v(" "),a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col w-full"},[a("label",[e._v("ទំនាក់ទំនង")]),e._v(" "),a("vs-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{label:"ទំនាក់ទំនង",name:"contact"},model:{value:e.supplier.contact,callback:function(t){e.$set(e.supplier,"contact",t)},expression:"supplier.contact"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("contact"),expression:"errors.has('contact')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("contact")))])],1),e._v(" "),a("div",{staticClass:"vx-col w-full"},[a("label",[e._v("សំគាល់")]),e._v(" "),a("vs-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{label:"សំគាល់",name:"note"},model:{value:e.supplier.note,callback:function(t){e.$set(e.supplier,"note",t)},expression:"supplier.note"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("note"),expression:"errors.has('note')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("note")))])],1)])]),e._v(" "),a("div",{staticClass:"vx-col md:w-1/3 w-full"},[a("label",[e._v("អាស័យដ្ឋាន")]),e._v(" "),a("vs-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{label:"អាស័យដ្ឋាន",name:"address"},model:{value:e.supplier.address,callback:function(t){e.$set(e.supplier,"address",t)},expression:"supplier.address"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("address"),expression:"errors.has('address')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("address")))])],1)]),e._v(" "),a("vs-divider"),e._v(" "),a("div",{staticClass:"flex justify-end btn-group"},[a("vs-button",{attrs:{icon:"icon-save","icon-pack":"feather",type:"relief"},on:{click:e.storeSupplier}},[e._v("រក្សាទុក")])],1)],1)],1),e._v(" "),a("add-unit",{ref:"addUnit"}),e._v(" "),a("add-category",{ref:"addCategory"}),e._v(" "),a("add-brand",{ref:"addBrand"})],1)}),[],!1,null,"ef5ce976",null);t.a=l.exports},SZ4Y:function(e,t,a){"use strict";var s=a("o0o1"),r=a.n(s),n=a("w48C"),i=a.n(n),o=(a("K+Wz"),a("yo3J")),c=a("4hyD"),l=a("9Dpo"),u=a("CLzC"),d=a("Snq/"),p=a.n(d),v=a("q+Mi"),_=a("pS5H");function h(e,t,a,s,r,n,i){try{var o=e[n](i),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(s,r)}var m,f,y={name:"showPurchase",components:{AddSupplier:u.a,AddBrand:l.a,AddCategory:c.a,AddUnit:o.a,flatPickr:i.a,"v-select":p.a,"bar-code":v.a,"money-format":_.a},data:function(){return{output:null,purchase:{id:null,supplier:{name:""},location:"Ly Put Garage",purchase_date:null,purchase_status:"pending",description:"",total_balance:null,balance:null,due_balance:0,amount:0,qty:0,items:[{id:"",name:null,description:null,qty:1,purchase_price:1,sale_price:1,amount:1}]}}},methods:{printHtml:(m=r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:$("#printMe").printThis({pageTitle:"Print Invoice No: ".concat(this.purchase.id),beforePrintEvent:function(){console.log("after before print printing")},beforePrint:function(){console.log("before print printing")},afterPrint:function(){console.log("after print printing")}});case 1:case"end":return e.stop()}}),e,this)})),f=function(){var e=this,t=arguments;return new Promise((function(a,s){var r=m.apply(e,t);function n(e){h(r,a,s,n,i,"next",e)}function i(e){h(r,a,s,n,i,"throw",e)}n(void 0)}))},function(){return f.apply(this,arguments)}),show:function(e){var t=this;this.$modal.show("show-purchase"),this.purchase.id=e.id,this.purchase.supplier=e.supplier,this.purchase.location=e.location,this.purchase.purchase_date=e.date,this.purchase.purchase_status=e.purchase_status,this.purchase.description=e.description,this.purchase.balance=e.balance,this.purchase.amount=e.amount,this.purchase.due_balance=e.due_balance,t.purchase.items=[],e.purchase_detail.forEach((function(e,a){t.purchase.items.push({id:e.product,name:e.product.name,description:e.product.description,qty:e.qty,purchase_price:e.purchase,sale_price:e.sale,amount:e.amount})}))}}},b=a("KHd+"),w=Object(b.a)(y,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("modal",{attrs:{width:"60%",height:"auto",scrollable:!0,pivotY:.2,clickToClose:!1,name:"show-purchase"}},[a("div",{staticClass:"flex justify-end"},[a("i",{staticClass:"vs-icon vs-popup--close material-icons text-warning",staticStyle:{background:"rgb(255, 255, 255)"},on:{click:function(t){return e.$modal.hide("show-purchase")}}},[e._v("close")])]),e._v(" "),a("vx-card",{attrs:{"no-shadow":""}},[a("div",{attrs:{id:"printMe"}},[a("table",{staticClass:"custom"},[a("tr",[a("td",{staticClass:"custom"},[e._v("អ្នកផ្គត់ផ្គង់")]),e._v(" "),a("td",{staticClass:"custom"},[e._v("Purchase Status")]),e._v(" "),a("td",{staticClass:"custom"},[e._v("ទីតាំងទិញចូល")]),e._v(" "),a("td",{staticClass:"custom"},[e._v("ពិពណ៌នា")]),e._v(" "),a("td",{staticClass:"custom"},[e._v("ថ្ងៃខែឆ្នាំទិញចូល")]),e._v(" "),a("td",{staticClass:"custom"},[e._v("Barcode")])]),e._v(" "),a("tr",[a("td",{staticClass:"custom"},[e._v("\n                            ឈ្មោះ: "+e._s(e.purchase.supplier.name)),a("br"),e._v("\n                            ក្រុមហ៊ុន: "+e._s(e.purchase.supplier.company)),a("br"),e._v("\n                            ទំនាក់ទំនង: "+e._s(e.purchase.supplier.contact)),a("br")]),e._v(" "),a("td",{staticClass:"custom"},[e._v(e._s(e.purchase.purchase_status))]),e._v(" "),a("td",{staticClass:"custom"},[e._v(e._s(e.purchase.location))]),e._v(" "),a("td",{staticClass:"custom"},[e._v(e._s(e.purchase.description))]),e._v(" "),a("td",{staticClass:"custom"},[e._v(e._s(e.purchase.purchase_date))]),e._v(" "),a("td",{staticClass:"p-2"},[a("bar-code",{attrs:{value:e.purchase.id,tag:"img",options:{displayValue:!0}}})],1)])]),e._v(" "),a("vs-divider"),e._v(" "),a("table",{staticClass:"custom"},[a("thead",[a("tr",[a("th",{staticClass:"custom"},[e._v("ល.រ")]),e._v(" "),a("th",{staticClass:"custom"},[e._v("ឈ្មោះ")]),e._v(" "),a("th",{staticClass:"custom"},[e._v("ពិពណ៌នា")]),e._v(" "),a("th",{staticClass:"custom"},[e._v("ចំនួន")]),e._v(" "),a("th",{staticClass:"custom"},[e._v("តម្លៃទិញ")]),e._v(" "),a("th",{staticClass:"custom"},[e._v("តម្លៃលក់")]),e._v(" "),a("th",{staticClass:"custom"},[e._v("សរុប")])])]),e._v(" "),a("tbody",e._l(e.purchase.items,(function(t,s){return a("tr",{key:s},[a("td",{staticClass:"pl-2 custom"},[e._v("\n                            "+e._s(s+1)+"\n                        ")]),e._v(" "),a("td",{staticClass:"pl-2 custom"},[e._v("\n                            "+e._s(t.name)+"\n                        ")]),e._v(" "),a("td",{staticClass:"pl-2 custom"},[e._v("\n                            "+e._s(t.description)+"\n                        ")]),e._v(" "),a("td",{staticClass:"pl-2 custom"},[e._v("\n                            "+e._s(t.qty)+"\n                        ")]),e._v(" "),a("td",{staticClass:"pl-2 custom"},[a("money-format",{attrs:{value:parseFloat(t.purchase_price),locale:"en","currency-code":"USD"}})],1),e._v(" "),a("td",{staticClass:"pl-2 custom"},[a("money-format",{attrs:{value:parseFloat(t.sale_price),locale:"en","currency-code":"USD"}})],1),e._v(" "),a("td",{staticClass:"pl-2 custom"},[a("money-format",{attrs:{value:t.amount=t.purchase_price*t.qty,locale:"en","currency-code":"USD"}})],1)])})),0),e._v(" "),a("tfoot",[a("tr",[a("td",{staticClass:"custom"}),e._v(" "),a("td",{staticClass:"custom"}),e._v(" "),a("td",{staticClass:"custom"}),e._v(" "),a("td",{staticClass:"custom"}),e._v(" "),a("td",{staticClass:"custom"}),e._v(" "),a("td",{staticClass:"md:text-right"},[e._v("\n                            សរុប\n                        ")]),e._v(" "),a("td",{staticClass:"pl-2 custom"},[e._v("\n                            "+e._s(e.$formatter.format(e.purchase.amount))+"\n                        ")])])])]),e._v(" "),a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("vs-divider",{attrs:{position:"left"}},[e._v("Payment")]),e._v(" "),a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-1/2 print:w-1/2 w-full"},[a("label",[e._v("ប្រាក់ទិញទំនិញ")]),e._v(" "),a("div",[e._v("\n                                    "+e._s(e.$formatter.format(e.purchase.balance))+"\n                                ")])]),e._v(" "),a("div",{staticClass:"vx-col md:w-1/2 print:w-1/2 w-full"},[a("label",[e._v("ទឹកប្រាក់ជំពាក់")]),e._v(" "),a("money-format",{attrs:{value:parseFloat(e.purchase.due_balance),locale:"en","currency-code":"USD"}})],1)])],1)])],1),e._v(" "),a("img",{attrs:{src:e.output,alt:""}}),e._v(" "),a("div",{staticClass:"flex justify-end btn-group"},[a("vs-button",{attrs:{icon:"icon-printer","icon-pack":"feather",type:"relief"},on:{click:e.printHtml}},[e._v("បោះពុម្ភ\n                ")])],1)])],1),e._v(" "),a("add-supplier",{ref:"addSupplier"}),e._v(" "),a("add-unit",{ref:"addUnit"}),e._v(" "),a("add-category",{ref:"addCategory"}),e._v(" "),a("add-brand",{ref:"addBrand"})],1)}),[],!1,null,"66662476",null);t.a=w.exports},"o+M+":function(e,t,a){"use strict";a.r(t);var s=a("o0o1"),r=a.n(s),n=a("w48C"),i=a.n(n),o=(a("K+Wz"),a("yo3J")),c=a("4hyD"),l=a("9Dpo"),u=a("CLzC"),d=a("Snq/"),p=a.n(d);function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function _(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var h={name:"addPurchase",components:{AddSupplier:u.a,AddBrand:l.a,AddCategory:c.a,AddUnit:o.a,flatPickr:i.a,"v-select":p.a},data:function(){return{select:null,options:[],dialog:!1,purchase:{user_id:this.$store.state.AppActiveUser.uid,supplier:null,location:"Ly Put Garage",purchase_date:null,purchase_status:"pending",description:"",total_balance:null,balance:null,due_balance:0,amount:0,qty:0,items:[]}}},computed:{all_suppliers:function(){return this.$store.getters.all_supplier},all_products:function(){return this.$store.getters.all_product.sort((function(e,t){return e.id>t.id?1:-1}))},map_all_products:function(){return this.all_products.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(a,!0).forEach((function(t){_(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({label:"ID: ".concat(e.id," - ").concat(e.name," (តម្លៃលក់ ").concat(e.default_sale," តម្លៃទិញ ").concat(e.default_purchase,")"),value:e.id},e)}))},total:function(){var e=0;return this.purchase.items.forEach((function(t,a){e+=parseFloat(t.amount)})),this.purchase.total_balance=e,this.purchase.balance=e,e},total_qty:function(){var e=0;return this.purchase.items.forEach((function(t,a){e+=parseFloat(t.qty)})),this.purchase.qty=e,e}},updated:function(){this.total_qty,this.total},methods:{filterFn:function(e,t){var a=this;t(""!==e?function(){var t=e.toLowerCase();a.options=a.map_all_products.filter((function(e){return String(e.value).toLowerCase().indexOf(t)>-1}))}:function(){a.options=a.map_all_products})},onBarcodeScanned:function(e){this.addItemLine();var t=this.purchase.items.length-1;this.selectProduct({id:parseInt(e)},t)},searchSupplier:function(e,t,a){return String(t).toLowerCase().indexOf(a.toLowerCase())>-1||String(e.company).toLowerCase().indexOf(a.toLowerCase())>-1||String(e.contact).toLowerCase().indexOf(a.toLowerCase())>-1},searchProduct:function(e,t,a){return String(e.id).toLowerCase().indexOf(a.toLowerCase())>-1},addItemLine:function(){this.purchase.items.push({id:"",name:null,description:null,qty:null,purchase_price:1,sale_price:1,amount:1,inventory_type:""})},removeItemLine:function(e){this.purchase.items.splice(e,1)},selectProduct:function(e,t){if(e){var a=this.all_products.filter((function(t){return parseInt(t.id)===parseInt(e.id)}));this.purchase.items[t].name=a[0].name,this.purchase.items[t].id={id:a[0].id,name:"ID: ".concat(a[0].id," - ").concat(a[0].name),label:e.label,value:e.value},this.purchase.items[t].description=a[0].description,this.purchase.items[t].inventory_type=a[0].inventory_type,this.purchase.items[t].sale_price=null,this.purchase.items[t].purchase_price=null}},show:function(){this.dialog=!0,this.$barcodeScanner.init(this.onBarcodeScanned),this.purchase.items=[]},storePurchase:function(){var e=this;this.$validator.validateAll().then((function(t){t?(e.$vs.loading(),e.$store.dispatch("storePurchase",e.purchase).then((function(t){t?(e.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានបន្ថែម",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),e.resetField()):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"ទិន្នន័យមិនបានបន្ថែម",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"}),e.$vs.loading.close()}))):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"សូមបំពេញទិន្នន័យអោយបានត្រឹមត្រូវ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"})}))},resetField:function(){this.purchase.items=[],this.purchase.supplier=null,this.purchase.location="Ly Put Garage",this.purchase.purchase_date=null,this.purchase.purchase_status="pending",this.purchase.description="",this.$modal.hide("add")},successUpload:function(e,t){this.product.image=t.path}}},m=a("KHd+"),f=Object(m.a)(h,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-dialog",{attrs:{persistent:"",maximized:!0,"transition-show":"slide-up","transition-hide":"slide-down"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("q-card",[a("q-bar",[a("q-space"),e._v(" "),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}},[a("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[e._v("Close")])],1)],1),e._v(" "),a("q-card-section",[a("vx-card",{attrs:{"no-shadow":""}},[a("div",{staticClass:"vx-row my-3"},[a("div",{staticClass:"vx-col md:w-1/3 w-full"},[a("label",[e._v("អ្នកផ្គត់ផ្គង់")]),e._v(" "),a("vx-input-group",[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{filterBy:e.searchSupplier,label:"name",name:"supplier",options:e.all_suppliers},scopedSlots:e._u([{key:"option",fn:function(e){return[a("vs-list-item",{attrs:{title:"ឈ្មោះ​ "+e.name+" ក្រុមហ៊ុន "+e.company,subtitle:"ទំនាក់ទំនង "+e.contact+" អាស័យដ្ឋាន "+e.address}})]}}]),model:{value:e.purchase.supplier,callback:function(t){e.$set(e.purchase,"supplier",t)},expression:"purchase.supplier"}}),e._v(" "),a("template",{slot:"append"},[a("div",{staticClass:"append-text btn-addon",on:{click:function(t){return e.$refs.addSupplier.show()}}},[a("vs-button",{staticClass:"rounded-none",attrs:{type:"filled","icon-pack":"feather",icon:"icon-plus"}})],1)])],2),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("supplier"),expression:"errors.has('supplier')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("supplier")))])],1),e._v(" "),a("div",{staticClass:"vx-col md:w-1/3 w-full"},[a("label",[e._v("ទីតាំង")]),e._v(" "),a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"location",options:["Ly Put Garage"]},model:{value:e.purchase.location,callback:function(t){e.$set(e.purchase,"location",t)},expression:"purchase.location"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("location"),expression:"errors.has('location')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("location")))])],1),e._v(" "),a("div",{staticClass:"vx-col md:w-1/3 w-full"},[a("label",[e._v("ថ្ងៃខែឆ្នាំទិញ")]),e._v(" "),a("flat-pickr",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{name:"date",placeholder:"Choose Date"},model:{value:e.purchase.purchase_date,callback:function(t){e.$set(e.purchase,"purchase_date",t)},expression:"purchase.purchase_date"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("purchase_date"),expression:"errors.has('purchase_date')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("purchase_date")))])],1)]),e._v(" "),a("div",{staticClass:"vx-row my-3"},[a("div",{staticClass:"vx-col md:w-1/3 w-full"},[a("label",[e._v("Purchase Status")]),e._v(" "),a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"purchase_status",options:["received","pending"]},model:{value:e.purchase.purchase_status,callback:function(t){e.$set(e.purchase,"purchase_status",t)},expression:"purchase.purchase_status"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("status"),expression:"errors.has('status')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("status")))])],1),e._v(" "),a("div",{staticClass:"vx-col md:w-1/3 w-full"},[a("label",[e._v("ពិពណ៌នា")]),e._v(" "),a("vs-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{label:"ពិពណ៌នា",name:"description"},model:{value:e.purchase.description,callback:function(t){e.$set(e.purchase,"description",t)},expression:"purchase.description"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("description"),expression:"errors.has('description')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("description")))])],1),e._v(" "),a("div",{staticClass:"vx-col md:w-1/3"},[e._v("\n                            Amount\n                            "),a("span",{staticClass:"text-6xl block"},[e._v("$"+e._s(e.purchase.total_balance))])])]),e._v(" "),a("vs-divider",{attrs:{position:"left"}},[e._v("បញ្ជីទំនិញ")]),e._v(" "),a("table",{staticClass:"vs-table vs-table--tbody-table"},[a("thead",[a("tr",[a("th",[e._v("ល.រ")]),e._v(" "),a("th",[e._v("ឈ្មោះ")]),e._v(" "),a("th",[e._v("ពិពណ៌នា")]),e._v(" "),a("th",[e._v("Inventory Type")]),e._v(" "),a("th",[e._v("ចំនួន")]),e._v(" "),a("th",[e._v("តម្លៃទិញ")]),e._v(" "),a("th",[e._v("តម្លៃលក់")]),e._v(" "),a("th",[e._v("សរុប")]),e._v(" "),a("th")])]),e._v(" "),a("tbody",e._l(e.purchase.items,(function(t,s){return a("tr",{key:s},[a("td",{staticClass:"py-1"},[e._v("\n                                "+e._s(s+1)+"\n                            ")]),e._v(" "),a("td",{attrs:{width:"400"}},[a("q-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{outlined:"",square:"",dense:"","use-input":"","input-debounce":"0",label:"ជ្រើសរើសទំនិញ",options:Object.freeze(e.options),behavior:"dialog",name:"product-"+s,clearable:""},on:{filter:e.filterFn,input:function(a){return e.selectProduct(t.id,s)}},scopedSlots:e._u([{key:"no-option",fn:function(){return[a("q-item",[a("q-item-section",{staticClass:"text-grey"},[e._v("\n                                                No results\n                                            ")])],1)]},proxy:!0}],null,!0),model:{value:t.id,callback:function(a){e.$set(t,"id",a)},expression:"tr.id"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("product-"+s),expression:"errors.has(`product-${index}`)"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("product-"+s)))])],1),e._v(" "),a("td",[e._v("\n                                "+e._s(t.description)+"\n                            ")]),e._v(" "),a("td",[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"inventory_type-"+s,options:["inventory_part","service","sale_only","purchase_only"]},model:{value:t.inventory_type,callback:function(a){e.$set(t,"inventory_type",a)},expression:"tr.inventory_type"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("inventory_type-"+s),expression:"errors.has(`inventory_type-${index}`)"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("inventory_type-"+s)))])],1),e._v(" "),a("td",[a("vs-input-number",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{color:"danger",min:"0",name:"qty-"+s},model:{value:t.qty,callback:function(a){e.$set(t,"qty",a)},expression:"tr.qty"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("qty-"+s),expression:"errors.has(`qty-${index}`)"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("qty-"+s)))])],1),e._v(" "),a("td",[a("vs-input-number",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{color:"danger",min:"0",name:"purchase_price-"+s},model:{value:t.purchase_price,callback:function(a){e.$set(t,"purchase_price",a)},expression:"tr.purchase_price"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("purchase_price-"+s),expression:"errors.has(`purchase_price-${index}`)"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("purchase_price-"+s)))])],1),e._v(" "),a("td",[a("vs-input-number",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{color:"danger",min:"0",name:"sale_price-"+s},model:{value:t.sale_price,callback:function(a){e.$set(t,"sale_price",a)},expression:"tr.sale_price"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("sale_price-"+s),expression:"errors.has(`sale_price-${index}`)"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("sale_price-"+s)))])],1),e._v(" "),a("td",[e._v("\n                                "+e._s(t.amount=t.purchase_price*t.qty)+"\n                            ")]),e._v(" "),a("td",{staticClass:"py-1"},[a("vs-button",{attrs:{icon:"icon-trash-2",color:"warning","icon-pack":"feather",type:"flat"},on:{click:function(t){return e.removeItemLine(s)}}})],1)])})),0)]),e._v(" "),a("vs-button",{staticClass:"rounded-none my-3",attrs:{icon:"icon-plus","icon-pack":"feather",type:"line"},on:{click:e.addItemLine}},[e._v("បន្ថែមទំនិញ\n                    ")]),e._v(" "),a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("vs-divider",{attrs:{position:"left"}},[e._v("Payment")]),e._v(" "),a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("label",[e._v("ប្រាក់ទិញទំនិញ")]),e._v(" "),a("vs-input-number",{attrs:{color:"warning",min:"0",max:e.purchase.total_balance,label:"ប្រាក់ទិញទំនិញ:"},model:{value:e.purchase.balance,callback:function(t){e.$set(e.purchase,"balance",t)},expression:"purchase.balance"}})],1),e._v(" "),a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("label",[e._v("ទឹកប្រាក់ជំពាក់")]),e._v(" "),a("vs-input",{staticClass:"w-full",attrs:{step:"any",readonly:"",type:"number"},model:{value:e.purchase.due_balance=e.purchase.total_balance-e.purchase.balance,callback:function(t){e.$set(e.purchase.due_balance=e.purchase.total_balance-e.purchase,"balance",t)},expression:"purchase.due_balance = purchase.total_balance - purchase.balance"}})],1)])],1)]),e._v(" "),a("vs-divider"),e._v(" "),a("div",{staticClass:"flex justify-end btn-group"},[a("vs-button",{attrs:{icon:"icon-save","icon-pack":"feather",type:"relief"},on:{click:e.storePurchase}},[e._v("រក្សាទុក\n                        ")])],1)],1)],1)],1)],1),e._v(" "),a("add-supplier",{ref:"addSupplier"}),e._v(" "),a("add-unit",{ref:"addUnit"}),e._v(" "),a("add-category",{ref:"addCategory"}),e._v(" "),a("add-brand",{ref:"addBrand"})],1)}),[],!1,null,"92346f7c",null).exports,y={name:"addPayment",methods:{show:function(e){this.dialog=!0,this.data.id=e.id,this.data.balance=e.due_balance,this.data.input_balance=e.due_balance},updatePurchasePayment:function(){var e=this;this.$validator.validateAll().then((function(t){t?(e.$vs.loading(),e.$store.dispatch("updatePurchasePayment",e.data).then((function(t){t?(e.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទឹកប្រាក់បានបន្ថែម",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),e.$emit("finished"),e.$modal.hide("add-payment")):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"ទឹកប្រាក់មិនបានបន្ថែម",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"}),e.$vs.loading.close()}))):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"សូមបំពេញទិន្នន័យអោយបានត្រឹមត្រូវ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"})}))}},data:function(){return{dialog:!1,data:{id:null,balance:0,input_balance:0,due_balance:0}}},computed:{due_balance:function(){return this.data.due_balance=this.data.balance-this.data.input_balance}}},b=Object(m.a)(y,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-dialog",{attrs:{persistent:"",maximized:!0,"transition-show":"slide-up","transition-hide":"slide-down"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("q-card",[a("q-bar",[a("q-space"),e._v(" "),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}},[a("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[e._v("Close")])],1)],1),e._v(" "),a("q-card-section",[a("vx-card",{attrs:{"no-shadow":""}},[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("h4",[e._v("ទឹកប្រាក់ត្រូវសង")]),e._v(" "),a("span",{staticClass:"text-2xl"},[e._v("$"+e._s(e.data.balance))])]),e._v(" "),a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("h4",[e._v("ទឹកប្រាក់នៅសល់")]),e._v(" "),a("span",{staticClass:"text-2xl"},[e._v("$"+e._s(e.due_balance))])])]),e._v(" "),a("vs-divider"),e._v(" "),a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col w-full"},[a("vs-input-number",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{min:"0",max:e.data.balance,name:"input_balance"},model:{value:e.data.input_balance,callback:function(t){e.$set(e.data,"input_balance",t)},expression:"data.input_balance"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("input_balance"),expression:"errors.has('input_balance')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("input_balance")))])],1)]),e._v(" "),a("div",{staticClass:"flex justify-end btn-group"},[a("vs-button",{attrs:{icon:"icon-dollar-sign","icon-pack":"feather",type:"relief"},on:{click:e.updatePurchasePayment}},[e._v("ចំណាយ")])],1)],1)],1)],1)],1)}),[],!1,null,"99a8f456",null).exports,w=a("q+Mi");function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(a,!0).forEach((function(t){C(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function C(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var k={name:"editPurchase",components:{AddSupplier:u.a,AddBrand:l.a,AddCategory:c.a,AddUnit:o.a,flatPickr:i.a,"v-select":p.a,"bar-code":w.a},data:function(){return{dialog:!1,options:[],purchase:{user_id:this.$store.state.AppActiveUser.uid,id:null,supplier:null,location:"Ly Put Garage",purchase_date:null,purchase_status:"pending",description:"",total_balance:null,balance:null,due_balance:0,amount:0,qty:0,old_due:0,items:[]}}},computed:{all_suppliers:function(){return this.$store.getters.all_supplier},all_products:function(){return this.$store.getters.all_product.map((function(e){return g({},e,{modified:!0})})).sort((function(e,t){return e.id>t.id?1:-1}))},map_all_products:function(){return this.all_products.map((function(e){return g({label:"ID: ".concat(e.id," - ").concat(e.name," (តម្លៃលក់ ").concat(e.default_sale," តម្លៃទិញ ").concat(e.default_purchase,")"),value:e.id},e)}))},total:function(){var e=0;return this.purchase.items.forEach((function(t,a){e+=parseFloat(t.amount)})),this.purchase.total_balance=e,this.purchase.balance=e-this.purchase.old_due,e},total_qty:function(){var e=0;return this.purchase.items.forEach((function(t,a){e+=parseFloat(t.qty)})),this.purchase.qty=e,e}},updated:function(){this.total_qty,this.total},methods:{filterFn:function(e,t){var a=this;t(""!==e?function(){var t=e.toLowerCase();a.options=a.map_all_products.filter((function(e){return String(e.value).toLowerCase().indexOf(t)>-1}))}:function(){a.options=a.map_all_products})},onBarcodeScanned:function(e){this.addItemLine();var t=this.purchase.items.length-1;this.selectProduct({id:parseInt(e)},t)},searchSupplier:function(e,t,a){return String(t).toLowerCase().indexOf(a.toLowerCase())>-1||String(e.company).toLowerCase().indexOf(a.toLowerCase())>-1||String(e.contact).toLowerCase().indexOf(a.toLowerCase())>-1},searchProduct:function(e,t,a){return String(t).toLowerCase().indexOf(a.toLowerCase())>-1||String(e.id).toLowerCase().indexOf(a.toLowerCase())>-1},addItemLine:function(){this.purchase.items.push({id:"",name:null,description:null,qty:1,purchase_price:1,sale_price:1,amount:1,inventory_type:""})},removeItemLine:function(e){this.purchase.items.splice(e,1)},selectProduct:function(e,t){if(e){var a=this.all_products.filter((function(t){return parseInt(t.id)===parseInt(e.id)}));this.purchase.items[t].name=a[0].name,this.purchase.items[t].id={id:a[0].id,name:"ID: ".concat(a[0].id," - ").concat(a[0].name),label:e.label,value:e.value},this.purchase.items[t].description=a[0].description,this.purchase.items[t].sale_price=a[0].default_sale,this.purchase.items[t].inventory_type=a[0].inventory_type,this.purchase.items[t].purchase_price=a[0].default_purchase}},show:function(e){var t=this;this.dialog=!0,t.purchase.items=[],this.$barcodeScanner.init(this.onBarcodeScanned),this.purchase.items=[],this.purchase.id=e.id,this.purchase.supplier=e.supplier,this.purchase.location=e.location,this.purchase.purchase_date=e.date,this.purchase.purchase_status=e.purchase_status,this.purchase.description=e.description,this.purchase.balance=e.balance,this.purchase.old_due=e.due_balance,e.purchase_detail.sort((function(e,t){var a=e.product.id,s=t.product.id,r=0;return a>s?r=1:a<s&&(r=-1),r})),e.purchase_detail.forEach((function(e,a){t.purchase.items.push({id:{id:e.product.id,name:"ID: ".concat(e.product.id," - ").concat(e.product.name),label:"ID: ".concat(e.product.id," - ").concat(e.product.name," (តម្លៃលក់ ").concat(e.sale," តម្លៃទិញ ").concat(e.purchase,")"),value:e.product.id},name:e.product.name,description:e.product.description,qty:e.qty,purchase_price:e.purchase,sale_price:e.sale,amount:e.amount,inventory_type:e.inventory_type})}))},updatePurchase:function(){var e=this;this.$validator.validateAll().then((function(t){t?(e.$vs.loading(),e.$store.dispatch("updatePurchase",e.purchase).then((function(t){t?(e.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យកែប្រែ",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),e.$emit("finished")):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"ទិន្នន័យមិនកែប្រែ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"}),e.$vs.loading.close(),e.$modal.hide("edit-purchase")}))):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"សូមបំពេញទិន្នន័យអោយបានត្រឹមត្រូវ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"})}))},successUpload:function(e,t){this.product.image=t.path}}},q=Object(m.a)(k,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-dialog",{attrs:{persistent:"",maximized:!0,"transition-show":"slide-up","transition-hide":"slide-down"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("q-card",[a("q-bar",[a("q-space"),e._v(" "),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}},[a("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[e._v("\n                        Close\n                    ")])],1)],1),e._v(" "),a("q-card-section",[a("vx-card",{attrs:{"no-shadow":""}},[a("div",{staticClass:"vx-row my-3"},[a("div",{staticClass:"vx-col md:w-1/3 w-full"},[a("label",[e._v("អ្នកផ្គត់ផ្គង់")]),e._v(" "),a("vx-input-group",[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{filterBy:e.searchSupplier,label:"name",name:"supplier",options:e.all_suppliers},scopedSlots:e._u([{key:"option",fn:function(e){return[a("vs-list-item",{attrs:{title:"ឈ្មោះ​ "+e.name+" ក្រុមហ៊ុន "+e.company,subtitle:"ទំនាក់ទំនង "+e.contact+" អាស័យដ្ឋាន "+e.address}})]}}]),model:{value:e.purchase.supplier,callback:function(t){e.$set(e.purchase,"supplier",t)},expression:"purchase.supplier"}}),e._v(" "),a("template",{slot:"append"},[a("div",{staticClass:"append-text btn-addon",on:{click:function(t){return e.$refs.addSupplier.show()}}},[a("vs-button",{staticClass:"rounded-none",attrs:{type:"filled","icon-pack":"feather",icon:"icon-plus"}})],1)])],2),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("supplier"),expression:"errors.has('supplier')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("supplier")))])],1),e._v(" "),a("div",{staticClass:"vx-col md:w-1/3 w-full"},[a("label",[e._v("ទីតាំង")]),e._v(" "),a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"location",options:["Ly Put Garage"]},model:{value:e.purchase.location,callback:function(t){e.$set(e.purchase,"location",t)},expression:"purchase.location"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("location"),expression:"errors.has('location')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("location")))])],1),e._v(" "),a("div",{staticClass:"vx-col md:w-1/3 w-full"},[a("label",[e._v("ថ្ងៃខែឆ្នាំទិញ")]),e._v(" "),a("flat-pickr",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{name:"date",placeholder:"Choose Date"},model:{value:e.purchase.purchase_date,callback:function(t){e.$set(e.purchase,"purchase_date",t)},expression:"purchase.purchase_date"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("purchase_date"),expression:"errors.has('purchase_date')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("purchase_date")))])],1)]),e._v(" "),a("div",{staticClass:"vx-row my-3"},[a("div",{staticClass:"vx-col md:w-1/3 w-full"},[a("label",[e._v("Purchase\n                                Status")]),e._v(" "),a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"purchase_status",options:["received","pending"]},model:{value:e.purchase.purchase_status,callback:function(t){e.$set(e.purchase,"purchase_status",t)},expression:"purchase.purchase_status"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("status"),expression:"errors.has('status')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("status")))])],1),e._v(" "),a("div",{staticClass:"vx-col md:w-1/3 w-full"},[a("label",[e._v("ពិពណ៌នា")]),e._v(" "),a("vs-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{label:"ពិពណ៌នា",name:"description"},model:{value:e.purchase.description,callback:function(t){e.$set(e.purchase,"description",t)},expression:"purchase.description"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("description"),expression:"errors.has('description')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("description")))])],1),e._v(" "),a("div",{staticClass:"vx-col md:w-1/3 shadow-md"},[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-1/2 w-full"},[e._v("\n                                    Amount\n                                    "),a("span",{staticClass:"text-6xl block"},[e._v("$"+e._s(e.purchase.total_balance))])]),e._v(" "),a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("bar-code",{attrs:{value:e.purchase.id,options:{displayValue:!0}}})],1)])])]),e._v(" "),a("vs-divider",{attrs:{position:"left"}},[e._v("\n                        បញ្ជីទំនិញ\n                    ")]),e._v(" "),a("table",{staticClass:"vs-table vs-table--tbody-table"},[a("thead",[a("tr",[a("th",[e._v("\n                                ល.រ\n                            ")]),e._v(" "),a("th",[e._v("\n                                ឈ្មោះ\n                            ")]),e._v(" "),a("th",[e._v("\n                                ពិពណ៌នា\n                            ")]),e._v(" "),a("th",[e._v("\n                                Inventory\n                                Type\n                            ")]),e._v(" "),a("th",[e._v("\n                                ចំនួន\n                            ")]),e._v(" "),a("th",[e._v("\n                                តម្លៃទិញ\n                            ")]),e._v(" "),a("th",[e._v("\n                                តម្លៃលក់\n                            ")]),e._v(" "),a("th",[e._v("\n                                សរុប\n                            ")]),e._v(" "),a("th")])]),e._v(" "),a("tbody",e._l(e.purchase.items,(function(t,s){return a("tr",{key:s},[a("td",{staticClass:"py-1"},[e._v("\n                                "+e._s(s+1)+"\n                            ")]),e._v(" "),a("td",{attrs:{width:"400"}},[a("q-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{outlined:"",square:"",dense:"","use-input":"","input-debounce":"0",label:"ជ្រើសរើសទំនិញ",options:Object.freeze(e.options),behavior:"dialog",name:"product-"+s,clearable:""},on:{filter:e.filterFn,input:function(a){return e.selectProduct(t.id,s)}},scopedSlots:e._u([{key:"no-option",fn:function(){return[a("q-item",[a("q-item-section",{staticClass:"text-grey"},[e._v("\n                                                No\n                                                results\n                                            ")])],1)]},proxy:!0}],null,!0),model:{value:t.id,callback:function(a){e.$set(t,"id",a)},expression:"tr.id"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("product-"+s),expression:"errors.has(`product-${index}`)"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("product-"+s)))])],1),e._v(" "),a("td",[e._v("\n                                "+e._s(t.description)+"\n                            ")]),e._v(" "),a("td",[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"inventory_type-"+s,options:["inventory_part","service","sale_only","purchase_only"]},model:{value:t.inventory_type,callback:function(a){e.$set(t,"inventory_type",a)},expression:"tr.inventory_type"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("inventory_type-"+s),expression:"errors.has(`inventory_type-${index}`)"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("inventory_type-"+s)))])],1),e._v(" "),a("td",[a("vs-input-number",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{color:"danger",min:"0",name:"qty-"+s},model:{value:t.qty,callback:function(a){e.$set(t,"qty",a)},expression:"tr.qty"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("qty-"+s),expression:"errors.has(`qty-${index}`)"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("qty-"+s)))])],1),e._v(" "),a("td",[a("vs-input-number",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{color:"danger",min:"0",name:"purchase_price-"+s},model:{value:t.purchase_price,callback:function(a){e.$set(t,"purchase_price",a)},expression:"tr.purchase_price"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("purchase_price-"+s),expression:"errors.has(`purchase_price-${index}`)"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("purchase_price-"+s)))])],1),e._v(" "),a("td",[a("vs-input-number",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{color:"danger",min:"0",name:"sale_price-"+s},model:{value:t.sale_price,callback:function(a){e.$set(t,"sale_price",a)},expression:"tr.sale_price"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("sale_price-"+s),expression:"errors.has(`sale_price-${index}`)"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("sale_price-"+s)))])],1),e._v(" "),a("td",[e._v("\n                                "+e._s(t.amount=t.purchase_price*t.qty)+"\n                            ")]),e._v(" "),a("td",{staticClass:"py-1"},[a("vs-button",{attrs:{icon:"icon-trash-2",color:"warning","icon-pack":"feather",type:"flat"},on:{click:function(t){return e.removeItemLine(s)}}})],1)])})),0)]),e._v(" "),a("vs-button",{staticClass:"rounded-none my-3",attrs:{icon:"icon-plus","icon-pack":"feather",type:"line"},on:{click:e.addItemLine}},[e._v("\n                        បន្ថែមទំនិញ\n                    ")]),e._v(" "),a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("vs-divider",{attrs:{position:"left"}},[e._v("\n                                Payment\n                            ")]),e._v(" "),a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("label",[e._v("ប្រាក់ទិញទំនិញ")]),e._v(" "),a("vs-input-number",{attrs:{color:"warning",min:"0",max:e.purchase.total_balance,label:"ប្រាក់ទិញទំនិញ:"},model:{value:e.purchase.balance,callback:function(t){e.$set(e.purchase,"balance",t)},expression:"purchase.balance"}})],1),e._v(" "),a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("label",[e._v("ទឹកប្រាក់ជំពាក់")]),e._v(" "),a("vs-input",{staticClass:"w-full",attrs:{step:"any",readonly:"",type:"number"},model:{value:e.purchase.due_balance=e.purchase.total_balance-e.purchase.balance,callback:function(t){e.$set(e.purchase.due_balance=e.purchase.total_balance-e.purchase,"balance",t)},expression:"purchase.due_balance = purchase.total_balance - purchase.balance"}})],1)])],1)]),e._v(" "),a("vs-divider"),e._v(" "),a("div",{staticClass:"flex justify-end btn-group"},[a("vs-button",{attrs:{icon:"icon-edit","icon-pack":"feather",type:"relief"},on:{click:function(t){return e.updatePurchase()}}},[e._v("\n                            កែប្រែ\n                        ")])],1)],1)],1)],1)],1),e._v(" "),a("add-supplier",{ref:"addSupplier"}),e._v(" "),a("add-unit",{ref:"addUnit"}),e._v(" "),a("add-category",{ref:"addCategory"}),e._v(" "),a("add-brand",{ref:"addBrand"})],1)}),[],!1,null,"5d87693a",null).exports;function $(e,t,a,s,r,n,i){try{var o=e[n](i),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(s,r)}function P(e){return function(){var t=this,a=arguments;return new Promise((function(s,r){var n=e.apply(t,a);function i(e){$(n,s,r,i,o,"next",e)}function o(e){$(n,s,r,i,o,"throw",e)}i(void 0)}))}}var S,N={name:"Stock",components:{ShowPurchase:a("SZ4Y").a,EditPurchase:q,AddPayment:b,AddPurchase:f},data:function(){return{select:null,invoice_id:"",selected_pending:[],selected_received:[]}},computed:{all_product:function(){return this.$store.getters.all_product},all_purchases:function(){return this.$store.getters.all_purchase},all_purchase_received:function(){return this.all_purchases.filter((function(e){return"received"===e.purchase_status}))},search_all_purchase_received:function(){var e=this;return e.all_purchase_received.filter((function(t){return!e.invoice_id||t.id===parseInt(e.invoice_id)}))},suggestion_all_purchase_received:function(){return this.all_purchase_received.map((function(e){return{id:String(e.id)}}))},all_purchase_pending:function(){return this.all_purchases.filter((function(e){return"pending"===e.purchase_status}))},search_all_purchase_pending:function(){var e=this;return e.all_purchase_pending.filter((function(t){return!e.invoice_id||t.id===parseInt(e.invoice_id)}))},suggestion_all_purchase_pending:function(){return this.all_purchase_pending.map((function(e){return{id:String(e.id)}}))}},created:function(){this.$barcodeScanner.init(this.onBarcodeScanned)},destroyed:function(){this.$barcodeScanner.destroy()},methods:{onBarcodeScanned:function(e){var t=window.event;13===t.keyCode&&t.preventDefault(),this.invoice_id=String(parseInt(e))},destroyPurchase:(S=P(r.a.mark((function e(){var t,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=this).$vs.loading(),a=t.selected_pending.map(function(){var e=P(r.a.mark((function e(a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("destroyPurchase",a.id);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=5,Promise.all(a).then((function(){t.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានលុប",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),t.selected_pending=[],t.$vs.loading.close()}));case 5:case"end":return e.stop()}}),e,this)}))),function(){return S.apply(this,arguments)})}},O=Object(m.a)(N,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("vx-card",{attrs:{"no-shadow":""}},[a("div",{staticClass:"flex btn-group"},[a("vs-button",{attrs:{type:"relief","icon-pack":"feather",icon:"icon-plus-square"},on:{click:function(t){return e.$refs.addPurchase.show()}}},[e._v("បន្ថែម")])],1),e._v(" "),a("vs-tabs",[a("vs-tab",{attrs:{label:"Received"}},[a("div",{staticClass:"flex btn-group"},[1===e.selected_received.length&&e.selected_received[0].due_balance>0?a("vs-button",{attrs:{color:"warning",type:"relief","icon-pack":"feather",icon:"icon-dollar-sign"},on:{click:function(t){return e.$refs.addPayment.show(e.selected_received[0])}}},[e._v("Add Payment")]):e._e(),e._v(" "),1===e.selected_received.length?a("vs-button",{attrs:{type:"relief","icon-pack":"feather",icon:"icon-eye"},on:{click:function(t){return e.$refs.showPurchase.show(e.selected_received[0])}}},[e._v("បង្ហាញ")]):e._e()],1),e._v(" "),a("vue-instant",{staticClass:"mt-base",attrs:{id:"purchase_rec","suggestion-attribute":"id",suggestions:e.suggestion_all_purchase_received,type:"google"},on:{clear:function(t){e.invoice_id=""}},model:{value:e.invoice_id,callback:function(t){e.invoice_id=t},expression:"invoice_id"}}),e._v(" "),a("vs-table",{attrs:{multiple:"",pagination:"","max-items":"10",search:"",data:e.search_all_purchase_received},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.data;return e._l(s,(function(t,r){return a("vs-tr",{key:r,attrs:{data:t}},[a("vs-td",{attrs:{data:s[r].id}},[e._v("\n                            "+e._s(s[r].id)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:s[r].description}},[e._v("\n                            "+e._s(s[r].description)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:s[r].supplier.name}},[e._v("\n                            "+e._s(s[r].supplier.name)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:s[r].location}},[e._v("\n                            "+e._s(s[r].location)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:s[r].qty}},[e._v("\n                            "+e._s(s[r].qty)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:s[r].balance}},[e._v("\n                            "+e._s(s[r].balance)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:s[r].amount}},[e._v("\n                            "+e._s(s[r].amount)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:s[r].due_balance}},[e._v("\n                            "+e._s(s[r].due_balance)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:s[r].date}},[e._v("\n                            "+e._s(s[r].date)+"\n                        ")])],1)}))}}]),model:{value:e.selected_received,callback:function(t){e.selected_received=t},expression:"selected_received"}},[a("template",{slot:"thead"},[a("vs-th",{attrs:{"sort-key":"id"}},[e._v("ល.រ")]),e._v(" "),a("vs-th",{attrs:{"sort-key":"description"}},[e._v("Description")]),e._v(" "),a("vs-th",[e._v("Supplier")]),e._v(" "),a("vs-th",{attrs:{"sort-key":"location"}},[e._v("Location")]),e._v(" "),a("vs-th",{attrs:{"sort-key":"qty"}},[e._v("QTY")]),e._v(" "),a("vs-th",{attrs:{"sort-key":"balance"}},[e._v("Balance")]),e._v(" "),a("vs-th",{attrs:{"sort-key":"amount"}},[e._v("Amount")]),e._v(" "),a("vs-th",{attrs:{"sort-key":"due_balance"}},[e._v("Due Balance")]),e._v(" "),a("vs-th",{attrs:{"sort-key":"purchase_date"}},[e._v("Date")])],1)],2),e._v(" "),a("add-payment",{ref:"addPayment",on:{finished:function(t){e.selected_received=[]}}})],1),e._v(" "),a("vs-tab",{attrs:{label:"Pending"}},[a("div",{staticClass:"flex btn-group"},[1===e.selected_pending.length&&e.selected_pending[0].due_balance>0?a("vs-button",{attrs:{type:"relief","icon-pack":"feather",icon:"icon-dollar-sign"},on:{click:function(t){return e.$refs.addPaymentPending.show(e.selected_pending[0])}}},[e._v("Add Payment")]):e._e(),e._v(" "),1===e.selected_pending.length?a("vs-button",{attrs:{type:"relief","icon-pack":"feather",icon:"icon-eye"},on:{click:function(t){return e.$refs.showPurchase.show(e.selected_pending[0])}}},[e._v("បង្ហាញ")]):e._e(),e._v(" "),1===e.selected_pending.length?a("vs-button",{attrs:{color:"warning",type:"relief","icon-pack":"feather",icon:"icon-edit"},on:{click:function(t){return e.$refs.editPurchase.show(e.selected_pending[0])}}},[e._v("កែប្រែ")]):e._e(),e._v(" "),e.selected_pending.length?a("vs-button",{attrs:{color:"danger",type:"relief","icon-pack":"feather",icon:"icon-trash-2"},on:{click:e.destroyPurchase}},[e._v("លុប")]):e._e()],1),e._v(" "),a("add-payment",{ref:"addPaymentPending",on:{finished:function(t){e.selected_pending=[]}}}),e._v(" "),a("vue-instant",{staticClass:"mb-base mt-base",attrs:{id:"purchase_pen","suggestion-attribute":"id",suggestions:e.suggestion_all_purchase_pending,type:"google"},on:{clear:function(t){e.invoice_id=""}},model:{value:e.invoice_id,callback:function(t){e.invoice_id=t},expression:"invoice_id"}}),e._v(" "),a("vs-table",{attrs:{multiple:"",pagination:"","max-items":"10",data:e.search_all_purchase_pending},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.data;return e._l(s,(function(t,r){return a("vs-tr",{key:r,attrs:{data:t}},[a("vs-td",{attrs:{data:s[r].id}},[e._v("\n                            "+e._s(s[r].id)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:s[r].description}},[e._v("\n                            "+e._s(s[r].description)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:s[r].supplier.name}},[e._v("\n                            "+e._s(s[r].supplier.name)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:s[r].location}},[e._v("\n                            "+e._s(s[r].location)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:s[r].qty}},[e._v("\n                            "+e._s(s[r].qty)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:s[r].balance}},[e._v("\n                            "+e._s(s[r].balance)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:s[r].amount}},[e._v("\n                            "+e._s(s[r].amount)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:s[r].due_balance}},[e._v("\n                            "+e._s(s[r].due_balance)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:s[r].date}},[e._v("\n                            "+e._s(s[r].date)+"\n                        ")])],1)}))}}]),model:{value:e.selected_pending,callback:function(t){e.selected_pending=t},expression:"selected_pending"}},[a("template",{slot:"thead"},[a("vs-th",{attrs:{"sort-key":"id"}},[e._v("ល.រ")]),e._v(" "),a("vs-th",{attrs:{"sort-key":"description"}},[e._v("Description")]),e._v(" "),a("vs-th",[e._v("Supplier")]),e._v(" "),a("vs-th",{attrs:{"sort-key":"location"}},[e._v("Location")]),e._v(" "),a("vs-th",{attrs:{"sort-key":"qty"}},[e._v("QTY")]),e._v(" "),a("vs-th",{attrs:{"sort-key":"balance"}},[e._v("Balance")]),e._v(" "),a("vs-th",{attrs:{"sort-key":"amount"}},[e._v("Amount")]),e._v(" "),a("vs-th",{attrs:{"sort-key":"due_balance"}},[e._v("Due Balance")]),e._v(" "),a("vs-th",{attrs:{"sort-key":"purchase_date"}},[e._v("Date")])],1)],2)],1)],1),e._v(" "),a("show-purchase",{ref:"showPurchase"}),e._v(" "),a("add-purchase",{ref:"addPurchase"}),e._v(" "),a("edit-purchase",{ref:"editPurchase",on:{finished:function(t){e.selected_pending=[]}}})],1)}),[],!1,null,"7f0dcf64",null);t.default=O.exports},pS5H:function(e,t,a){"use strict";var s={props:{value:Number,locale:{type:String,default:"en"},currencyCode:{type:String,default:"USD"},supplementalPrecision:{type:Number,default:0},subunitsValue:{type:Boolean,default:!1},subunitsToUnit:{type:Number,default:1},hideSubunits:{type:Boolean,default:!1}},methods:{formatMoney:function(e,t,a,s,r,n,i){let o=0;if(Number.isFinite(e))try{let c=new Intl.NumberFormat(t,{style:"currency",currency:a}),l=c.resolvedOptions();l.minimumFractionDigits;r>1?e/=r:1==s&&(e/=10**l.minimumFractionDigits),1==n?c=new Intl.NumberFormat(t,{style:"currency",currency:a,minimumFractionDigits:0,maximumFractionDigits:0}):i>0&&(c=new Intl.NumberFormat(t,{style:"currency",currency:a,minimumFractionDigits:l.minimumFractionDigits+i,maximumFractionDigits:l.maximumFractionDigits+i})),o=c.format(e)}catch(e){o=e.message}else o="#NaN!";return o}}},r=a("KHd+"),n=Object(r.a)(s,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"money_format"},[e._v("\n  "+e._s(e.formatMoney(e.value,e.locale,e.currencyCode,e.subunitsValue,e.subunitsToUnit,e.hideSubunits,e.supplementalPrecision))+"\n")])}),[],!1,null,null,null).exports;t.a=n},yo3J:function(e,t,a){"use strict";var s={name:"addUnit",data:function(){return{unit:""}},methods:{show:function(){this.$modal.show("add-unit")},storeUnit:function(){var e=this;this.$validator.validateAll().then((function(t){t?(e.$vs.loading(),e.$store.dispatch("storeUnit",{name:e.unit}).then((function(t){t?(e.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានបន្ថែម",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),e.resetField()):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"ទិន្នន័យមិនបានបន្ថែម",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"}),e.$vs.loading.close()}))):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"សូមបំពេញទិន្នន័យអោយបានត្រឹមត្រូវ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"})}))},resetField:function(){this.unit=""}}},r=a("KHd+"),n=Object(r.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("modal",{attrs:{height:"auto",scrollable:!0,pivotY:.2,clickToClose:!1,name:"add-unit"}},[a("div",{staticClass:"flex justify-end"},[a("i",{staticClass:"vs-icon vs-popup--close material-icons text-warning",staticStyle:{background:"rgb(255, 255, 255)"},on:{click:function(t){return e.$modal.hide("add-unit")}}},[e._v("close")])]),e._v(" "),a("vx-card",{attrs:{"no-shadow":""}},[a("div",{staticClass:"vx-row mb-10"},[a("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{"label-placeholder":"ឈ្មោះ",name:"unit"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.storeUnit(t)}},model:{value:e.unit,callback:function(t){e.unit=t},expression:"unit"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("unit"),expression:"errors.has('unit')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("unit")))])],1)])],1)}),[],!1,null,"da88d7b4",null);t.a=n.exports}}]);