(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{"27vA":function(e,t,a){"use strict";a.r(t);var s=a("o0o1"),r=a.n(s),i=a("Snq/"),n=a.n(i),o=a("w48C"),c=a.n(o),l=(a("K+Wz"),a("ksP6")),d=a.n(l),v=(a("Hj/Q"),{name:"addUser",components:{vueDropzone:d.a,"v-select":n.a,flatPickr:c.a},data:function(){return{data:{name:"",email:"",password:"",confirm_password:"",profile:"/images/placeholder/placeholder.png"},dropzoneOptions:{url:route("file.upload.thumb"),maxFiles:1,addRemoveLinks:!0,dictDefaultMessage:"ដាក់រូបភាពបើមាន",thumbnailWidth:150,thumbnailHeight:150}}},computed:{},methods:{show:function(){this.$modal.show("add-user")},storeUser:function(){var e=this;this.$validator.validateAll().then((function(t){t?(e.$vs.loading(),e.$store.dispatch("storeUser",e.data).then((function(t){t?(e.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានបន្ថែម",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),e.resetField()):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"ទិន្នន័យមិនបានបន្ថែម",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"}),e.$vs.loading.close()}))):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"សូមបំពេញទិន្នន័យអោយបានត្រឹមត្រូវ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"})}))},resetField:function(){this.data={name:"",email:"",password:"",confirm_password:"",profile:"/images/placeholder/placeholder.png"}},successUpload:function(e,t){this.data.profile=t.path}}}),u=a("KHd+"),p=Object(u.a)(v,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("modal",{attrs:{width:"50%",height:"auto",scrollable:!0,pivotY:.2,clickToClose:!1,name:"add-user"}},[a("div",{staticClass:"flex justify-end"},[a("i",{staticClass:"vs-icon vs-popup--close material-icons text-warning",staticStyle:{background:"rgb(255, 255, 255)"},on:{click:function(t){return e.$modal.hide("add-user")}}},[e._v("close")])]),e._v(" "),a("vx-card",{attrs:{"no-shadow":""}},[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-3/4"},[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col w-full"},[a("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{"label-placeholder":"ឈ្មោះ",name:"name"},model:{value:e.data.name,callback:function(t){e.$set(e.data,"name",t)},expression:"data.name"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("name"),expression:"errors.has('name')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("name")))])],1),e._v(" "),a("div",{staticClass:"vx-col w-full mt-2"},[a("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"w-full",attrs:{"label-placeholder":"អ៊ីម៉ែល",name:"email"},model:{value:e.data.email,callback:function(t){e.$set(e.data,"email",t)},expression:"data.email"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("email"),expression:"errors.has('email')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("email")))])],1),e._v(" "),a("div",{staticClass:"vx-col w-full mt-2"},[a("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"min:6|max:10",expression:"'min:6|max:10'"}],ref:"password",staticClass:"w-full",attrs:{type:"password","label-placeholder":"ពាក្យសម្ងាត់",name:"password"},model:{value:e.data.password,callback:function(t){e.$set(e.data,"password",t)},expression:"data.password"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("password"),expression:"errors.has('password')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("password")))])],1),e._v(" "),a("div",{staticClass:"vx-col w-full mt-2"},[a("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"min:6|max:10|confirmed:password",expression:"'min:6|max:10|confirmed:password'"}],staticClass:"w-full",attrs:{type:"password","label-placeholder":"ផ្ទៀងផ្ទាត់ ពាក្យសម្ងាត់",name:"confirm_password"},model:{value:e.data.confirm_password,callback:function(t){e.$set(e.data,"confirm_password",t)},expression:"data.confirm_password"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("confirm_password"),expression:"errors.has('confirm_password')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("confirm_password")))])],1)])]),e._v(" "),a("div",{staticClass:"vx-col md:w-1/4"},[a("label",[e._v("ប្រូហ្វាល")]),e._v(" "),a("vue-dropzone",{ref:"image",staticClass:"max-content p-1",attrs:{duplicateCheck:"",id:"dropzone",options:e.dropzoneOptions},on:{"vdropzone-success":e.successUpload}})],1)]),e._v(" "),a("vs-divider"),e._v(" "),a("div",{staticClass:"flex justify-end btn-group"},[a("vs-button",{attrs:{icon:"icon-save","icon-pack":"feather",type:"relief"},on:{click:e.storeUser}},[e._v("រក្សាទុក\n                ")])],1)],1)],1)],1)}),[],!1,null,"b8bd99ec",null).exports;function m(e,t,a,s,r,i,n){try{var o=e[i](n),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(s,r)}var f,h,w={name:"editUser",components:{vueDropzone:d.a,"v-select":n.a,flatPickr:c.a},data:function(){return{data:{id:null,name:"",email:"",profile:"/images/placeholder/placeholder.png"},dropzoneOptions:{url:route("file.upload.thumb"),maxFiles:1,addRemoveLinks:!0,dictDefaultMessage:"ដាក់រូបភាពបើមាន",thumbnailWidth:150,thumbnailHeight:150}}},methods:{fetchUser:(f=r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("fetchUser");case 2:case"end":return e.stop()}}),e,this)})),h=function(){var e=this,t=arguments;return new Promise((function(a,s){var r=f.apply(e,t);function i(e){m(r,a,s,i,n,"next",e)}function n(e){m(r,a,s,i,n,"throw",e)}i(void 0)}))},function(){return h.apply(this,arguments)}),loadProfile:function(){this.$refs.profile.manuallyAddFile({size:123},this.data.profile)},show:function(e){this.$modal.show("edit-user"),this.data.id=e.id,this.data.name=e.name,this.data.email=e.email,this.data.profile=e.profile},updateUser:function(){var e=this;this.$validator.validateAll().then((function(t){t?(e.$vs.loading(),e.$store.dispatch("updateUser",e.data).then((function(t){t?(e.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានបន្ថែម",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),e.fetchUser(),e.$emit("finished")):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"ទិន្នន័យមិនបានបន្ថែម",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"}),e.$vs.loading.close()}))):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"សូមបំពេញទិន្នន័យអោយបានត្រឹមត្រូវ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"})}))},successUpload:function(e,t){this.data.profile=t.path}}},x=Object(u.a)(w,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("modal",{attrs:{width:"50%",height:"auto",scrollable:!0,pivotY:.2,clickToClose:!1,name:"edit-user"}},[a("div",{staticClass:"flex justify-end"},[a("i",{staticClass:"vs-icon vs-popup--close material-icons text-warning",staticStyle:{background:"rgb(255, 255, 255)"},on:{click:function(t){return e.$modal.hide("edit-user")}}},[e._v("close")])]),e._v(" "),a("vx-card",{attrs:{"no-shadow":""}},[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-3/4"},[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col w-full"},[a("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{"label-placeholder":"ឈ្មោះ",name:"name"},model:{value:e.data.name,callback:function(t){e.$set(e.data,"name",t)},expression:"data.name"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("name"),expression:"errors.has('name')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("name")))])],1),e._v(" "),a("div",{staticClass:"vx-col w-full mt-2"},[a("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"w-full",attrs:{"label-placeholder":"អ៊ីម៉ែល",name:"email"},model:{value:e.data.email,callback:function(t){e.$set(e.data,"email",t)},expression:"data.email"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("email"),expression:"errors.has('email')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("email")))])],1)])]),e._v(" "),a("div",{staticClass:"vx-col md:w-1/4"},[a("label",[e._v("ប្រូហ្វាល")]),e._v(" "),a("vue-dropzone",{ref:"profile",staticClass:"max-content p-1",attrs:{duplicateCheck:"",id:"profile",options:e.dropzoneOptions},on:{"vdropzone-mounted":e.loadProfile,"vdropzone-success":e.successUpload}})],1)]),e._v(" "),a("vs-divider"),e._v(" "),a("div",{staticClass:"flex justify-end btn-group"},[a("vs-button",{attrs:{icon:"icon-edit","icon-pack":"feather",type:"relief"},on:{click:e.updateUser}},[e._v("កែប្រែ\n                ")])],1)],1)],1)],1)}),[],!1,null,"3f7436e8",null).exports,_={name:"changePassword",data:function(){return{data:{id:null,password:"",confirm_password:""}}},methods:{show:function(e){this.$modal.show("change-password"),this.data.id=e.id},updateUserPassword:function(){var e=this;this.$validator.validateAll().then((function(t){t?(e.$vs.loading(),e.$store.dispatch("updateUserPassword",e.data).then((function(t){t?(e.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានបន្ថែម",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),e.$emit("finished")):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"ទិន្នន័យមិនបានបន្ថែម",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"}),e.$vs.loading.close()}))):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"សូមបំពេញទិន្នន័យអោយបានត្រឹមត្រូវ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"})}))}}};function g(e,t,a,s,r,i,n){try{var o=e[i](n),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(s,r)}function k(e){return function(){var t=this,a=arguments;return new Promise((function(s,r){var i=e.apply(t,a);function n(e){g(i,s,r,n,o,"next",e)}function o(e){g(i,s,r,n,o,"throw",e)}n(void 0)}))}}var b,C,$={name:"User",components:{ChangePassword:Object(u.a)(_,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("modal",{attrs:{width:"30%",height:"auto",scrollable:!0,pivotY:.2,clickToClose:!1,name:"change-password"}},[a("div",{staticClass:"flex justify-end"},[a("i",{staticClass:"vs-icon vs-popup--close material-icons text-warning",staticStyle:{background:"rgb(255, 255, 255)"},on:{click:function(t){return e.$modal.hide("change-password")}}},[e._v("close")])]),e._v(" "),a("vx-card",{attrs:{"no-shadow":""}},[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col w-full mt-2"},[a("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:6|max:10",expression:"'required|min:6|max:10'"}],ref:"password",staticClass:"w-full",attrs:{type:"password","label-placeholder":"ពាក្យសម្ងាត់",name:"password"},model:{value:e.data.password,callback:function(t){e.$set(e.data,"password",t)},expression:"data.password"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("password"),expression:"errors.has('password')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("password")))])],1),e._v(" "),a("div",{staticClass:"vx-col w-full mt-2"},[a("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:6|max:10|confirmed:password",expression:"'required|min:6|max:10|confirmed:password'"}],staticClass:"w-full",attrs:{type:"password","label-placeholder":"ផ្ទៀងផ្ទាត់ ពាក្យសម្ងាត់",name:"confirm_password"},model:{value:e.data.confirm_password,callback:function(t){e.$set(e.data,"confirm_password",t)},expression:"data.confirm_password"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("confirm_password"),expression:"errors.has('confirm_password')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("confirm_password")))])],1)]),e._v(" "),a("vs-divider"),e._v(" "),a("div",{staticClass:"flex justify-end btn-group"},[a("vs-button",{attrs:{icon:"icon-edit","icon-pack":"feather",type:"relief"},on:{click:e.updateUserPassword}},[e._v("ប្តូរ\n                ")])],1)],1)],1)],1)}),[],!1,null,"2052dcdf",null).exports,EditUser:x,AddUser:p},data:function(){return{selected:[],users:[{id:1,name:"Leanne Graham",username:"Bret",email:"Sincere@april.biz",website:"hildegard.org"},{id:2,name:"Ervin Howell",username:"Antonette",email:"Shanna@melissa.tv",website:"anastasia.net"},{id:3,name:"Clementine Bauch",username:"Samantha",email:"Nathan@yesenia.net",website:"ramiro.info"},{id:4,name:"Patricia Lebsack",username:"Karianne",email:"Julianne.OConner@kory.org",website:"kale.biz"}]}},computed:{all_users:function(){return this.$store.getters.all_user}},created:(C=k(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchUser();case 2:case"end":return e.stop()}}),e,this)}))),function(){return C.apply(this,arguments)}),methods:{confirmDelete:function(){this.$vs.dialog({type:"confirm",color:"danger",title:"ផ្ទៀងផ្ទាត់",text:"ចុចពាក្យ Accept ដើម្បីលុប!",accept:this.destroyUser})},fetchUser:function(){var e=k(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("fetchUser");case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),destroyUser:(b=k(r.a.mark((function e(){var t,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=this).$vs.loading(),a=t.selected.map(function(){var e=k(r.a.mark((function e(a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("destroyUser",a.id);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=5,Promise.all(a).then((function(){t.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានលុប",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),t.selected=[],t.$vs.loading.close()}));case 5:case"end":return e.stop()}}),e,this)}))),function(){return b.apply(this,arguments)})}},y=Object(u.a)($,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("vx-card",{attrs:{"no-shadow":""}},[a("div",{staticClass:"flex btn-group"},[a("vs-button",{attrs:{type:"relief","icon-pack":"feather",icon:"icon-plus-square"},on:{click:function(t){return e.$refs.addUser.show()}}},[e._v("\n            បន្ថែម\n        ")]),e._v(" "),1===e.selected.length?a("vs-button",{attrs:{color:"warning",type:"relief","icon-pack":"feather",icon:"icon-edit"},on:{click:function(t){return e.$refs.editUser.show(e.selected[0])}}},[e._v("\n            កែប្រែ\n        ")]):e._e(),e._v(" "),1===e.selected.length?a("vs-button",{attrs:{color:"dark",type:"relief","icon-pack":"feather",icon:"icon-edit"},on:{click:function(t){return e.$refs.changePassword.show(e.selected[0])}}},[e._v("\n            ប្តូរលេខសម្ងាត់\n        ")]):e._e(),e._v(" "),e.selected.length?a("vs-button",{attrs:{color:"danger",type:"relief","icon-pack":"feather",icon:"icon-trash"},on:{click:e.confirmDelete}},[e._v("\n            លុប\n        ")]):e._e()],1),e._v(" "),a("add-user",{ref:"addUser"}),e._v(" "),a("edit-user",{ref:"editUser",on:{finished:function(t){e.selected=[]}}}),e._v(" "),a("change-password",{ref:"changePassword",on:{finished:function(t){e.selected=[]}}}),e._v(" "),a("vs-table",{attrs:{multiple:"",stripe:"",search:"",data:e.all_users},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.data;return e._l(s,(function(t,s){return a("vs-tr",{key:s,attrs:{data:t}},[a("vs-td",{attrs:{data:t.id}},[e._v("\n                    "+e._s(t.id)+"\n                ")]),e._v(" "),a("vs-td",{attrs:{data:t.profile}},[a("img",{attrs:{src:t.profile,width:"75",alt:t.profile}})]),e._v(" "),a("vs-td",{attrs:{data:t.name}},[e._v("\n                    "+e._s(t.name)+"\n                ")]),e._v(" "),a("vs-td",{attrs:{data:t.email}},[e._v("\n                    "+e._s(t.email)+"\n                ")])],1)}))}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},[a("template",{slot:"thead"},[a("vs-th",{attrs:{"sort-key":"id"}},[e._v("ID")]),e._v(" "),a("vs-th"),e._v(" "),a("vs-th",{attrs:{"sort-key":"name"}},[e._v("ឈ្មោះ")]),e._v(" "),a("vs-th",{attrs:{"sort-key":"email"}},[e._v("អ៊ីម៉ែល")])],1)],2)],1)}),[],!1,null,"62c6670c",null);t.default=y.exports}}]);