(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"4hyD":function(e,t,a){"use strict";var s={name:"addCategory",data:function(){return{category:""}},methods:{show:function(){this.$modal.show("add-category")},storeCategory:function(){var e=this;this.$validator.validateAll().then((function(t){t?(e.$vs.loading(),e.$store.dispatch("storeCategory",{name:e.category}).then((function(t){t?(e.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានបន្ថែម",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),e.resetField()):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"ទិន្នន័យមិនបានបន្ថែម",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"}),e.$vs.loading.close()}))):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"សូមបំពេញទិន្នន័យអោយបានត្រឹមត្រូវ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"})}))},resetField:function(){this.category=""}}},r=a("KHd+"),n=Object(r.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("modal",{attrs:{height:"auto",scrollable:!0,pivotY:.2,clickToClose:!1,name:"add-category"}},[a("div",{staticClass:"flex justify-end"},[a("i",{staticClass:"vs-icon vs-popup--close material-icons text-warning",staticStyle:{background:"rgb(255, 255, 255)"},on:{click:function(t){return e.$modal.hide("add-category")}}},[e._v("close")])]),e._v(" "),a("vx-card",{attrs:{"no-shadow":""}},[a("div",{staticClass:"vx-row mb-10"},[a("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{"label-placeholder":"ឈ្មោះ",name:"category"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.storeCategory(t)}},model:{value:e.category,callback:function(t){e.category=t},expression:"category"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("category"),expression:"errors.has('category')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("category")))])],1)])],1)}),[],!1,null,"b31718a8",null);t.a=n.exports},"9Dpo":function(e,t,a){"use strict";var s={name:"addBrand",data:function(){return{brand:""}},methods:{show:function(){this.$modal.show("add-brand")},storeBrand:function(){var e=this;this.$validator.validateAll().then((function(t){t?(e.$vs.loading(),e.$store.dispatch("storeBrand",{name:e.brand}).then((function(t){t?(e.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានបន្ថែម",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),e.resetField()):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"ទិន្នន័យមិនបានបន្ថែម",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"}),e.$vs.loading.close()}))):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"សូមបំពេញទិន្នន័យអោយបានត្រឹមត្រូវ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"})}))},resetField:function(){this.brand=""}}},r=a("KHd+"),n=Object(r.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("modal",{attrs:{height:"auto",scrollable:!0,pivotY:.2,clickToClose:!1,name:"add-brand"}},[a("div",{staticClass:"flex justify-end"},[a("i",{staticClass:"vs-icon vs-popup--close material-icons text-warning",staticStyle:{background:"rgb(255, 255, 255)"},on:{click:function(t){return e.$modal.hide("add-brand")}}},[e._v("close")])]),e._v(" "),a("vx-card",{attrs:{"no-shadow":""}},[a("div",{staticClass:"vx-row mb-10"},[a("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{"label-placeholder":"ឈ្មោះ",name:"brand"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.storeBrand(t)}},model:{value:e.brand,callback:function(t){e.brand=t},expression:"brand"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("brand"),expression:"errors.has('brand')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("brand")))])],1)])],1)}),[],!1,null,"1dd572a1",null);t.a=n.exports},CLzC:function(e,t,a){"use strict";var s=a("ksP6"),r=a.n(s),n=(a("Hj/Q"),a("yo3J")),i=a("4hyD"),o={name:"addSupplier",components:{AddBrand:a("9Dpo").a,AddCategory:i.a,AddUnit:n.a,vueDropzone:r.a},data:function(){return{supplier:{name:null,company:null,contact:null,note:null,address:null}}},computed:{all_units:function(){return this.$store.getters.all_unit},all_categories:function(){return this.$store.getters.all_category},all_brands:function(){return this.$store.getters.all_brand}},methods:{show:function(){this.$modal.show("add-supplier")},storeSupplier:function(){var e=this;this.$validator.validateAll().then((function(t){t?(e.$vs.loading(),e.$store.dispatch("storeSupplier",e.supplier).then((function(t){t?(e.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានបន្ថែម",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),e.resetField()):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"ទិន្នន័យមិនបានបន្ថែម",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"}),e.$vs.loading.close()}))):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"សូមបំពេញទិន្នន័យអោយបានត្រឹមត្រូវ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"})}))},resetField:function(){this.product={name:"",description:"",unit:"ដំុ",category:"គ្រឿងក្រោម",brand:"AKA",inventory_type:"inventory_part",purchase:1,sale:1,image:"placeholder/placeholder.png"}},successUpload:function(e,t){this.product.image=t.path}}},c=a("KHd+"),l=Object(c.a)(o,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("modal",{attrs:{width:"60%",height:"auto",scrollable:!0,pivotY:.2,clickToClose:!1,name:"add-supplier"}},[a("div",{staticClass:"flex justify-end"},[a("i",{staticClass:"vs-icon vs-popup--close material-icons text-warning",staticStyle:{background:"rgb(255, 255, 255)"},on:{click:function(t){return e.$modal.hide("add-supplier")}}},[e._v("close")])]),e._v(" "),a("vx-card",{attrs:{"no-shadow":""}},[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-2/3 w-full"},[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{"label-placeholder":"ឈ្មោះ",name:"name"},model:{value:e.supplier.name,callback:function(t){e.$set(e.supplier,"name",t)},expression:"supplier.name"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("name"),expression:"errors.has('name')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("name")))])],1),e._v(" "),a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{"label-placeholder":"ឈ្មោះក្រុមហ៊ុន",name:"company"},model:{value:e.supplier.company,callback:function(t){e.$set(e.supplier,"company",t)},expression:"supplier.company"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("company"),expression:"errors.has('company')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("company")))])],1)]),e._v(" "),a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col w-full"},[a("label",[e._v("ទំនាក់ទំនង")]),e._v(" "),a("vs-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{label:"ទំនាក់ទំនង",name:"contact"},model:{value:e.supplier.contact,callback:function(t){e.$set(e.supplier,"contact",t)},expression:"supplier.contact"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("contact"),expression:"errors.has('contact')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("contact")))])],1),e._v(" "),a("div",{staticClass:"vx-col w-full"},[a("label",[e._v("សំគាល់")]),e._v(" "),a("vs-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{label:"សំគាល់",name:"note"},model:{value:e.supplier.note,callback:function(t){e.$set(e.supplier,"note",t)},expression:"supplier.note"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("note"),expression:"errors.has('note')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("note")))])],1)])]),e._v(" "),a("div",{staticClass:"vx-col md:w-1/3 w-full"},[a("label",[e._v("អាស័យដ្ឋាន")]),e._v(" "),a("vs-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{label:"អាស័យដ្ឋាន",name:"address"},model:{value:e.supplier.address,callback:function(t){e.$set(e.supplier,"address",t)},expression:"supplier.address"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("address"),expression:"errors.has('address')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("address")))])],1)]),e._v(" "),a("vs-divider"),e._v(" "),a("div",{staticClass:"flex justify-end btn-group"},[a("vs-button",{attrs:{icon:"icon-save","icon-pack":"feather",type:"relief"},on:{click:e.storeSupplier}},[e._v("រក្សាទុក")])],1)],1)],1),e._v(" "),a("add-unit",{ref:"addUnit"}),e._v(" "),a("add-category",{ref:"addCategory"}),e._v(" "),a("add-brand",{ref:"addBrand"})],1)}),[],!1,null,"ef5ce976",null);t.a=l.exports},HYsX:function(e,t,a){var s=a("tRha");"string"==typeof s&&(s=[[e.i,s,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(s,r);s.locals&&(e.exports=s.locals)},SZ4Y:function(e,t,a){"use strict";var s=a("o0o1"),r=a.n(s),n=a("w48C"),i=a.n(n),o=(a("K+Wz"),a("yo3J")),c=a("4hyD"),l=a("9Dpo"),d=a("CLzC"),u=a("Snq/"),p=a.n(u),v=a("q+Mi"),h=a("pS5H"),_=a("rdXg"),m=a.n(_);function f(e,t,a,s,r,n,i){try{var o=e[n](i),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(s,r)}function x(e){return function(){var t=this,a=arguments;return new Promise((function(s,r){var n=e.apply(t,a);function i(e){f(n,s,r,i,o,"next",e)}function o(e){f(n,s,r,i,o,"throw",e)}i(void 0)}))}}var w,y,b,g={name:"showPurchase",components:{AddSupplier:d.a,AddBrand:l.a,AddCategory:c.a,AddUnit:o.a,flatPickr:i.a,"v-select":p.a,"bar-code":v.a,"money-format":h.a},data:function(){return{output:null,purchase:{id:null,supplier:{name:""},location:"Ly Put Garage",purchase_date:null,purchase_status:"pending",description:"",total_balance:null,balance:null,due_balance:0,amount:0,qty:0,items:[{id:"",name:null,description:null,qty:1,purchase_price:1,sale_price:1,amount:1}]}}},computed:{all_suppliers:function(){return this.$store.getters.all_supplier},all_products:function(){return this.$store.getters.all_product},total:function(){var e=0;return this.purchase.items.forEach((function(t,a){e+=parseFloat(t.amount)})),this.purchase.total_balance=e,this.purchase.balance=e,e},total_qty:function(){var e=0;return this.purchase.items.forEach((function(t,a){e+=parseFloat(t.qty)})),this.purchase.qty=e,e}},updated:function(){this.total_qty,this.total},methods:{_print:(b=x(r.a.mark((function e(){var t,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.querySelector("#printMe"),a={type:"dataURL"},e.next=4,this.$html2canvas(t,a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)}))),function(){return b.apply(this,arguments)}),printHtml:(y=x(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._print();case 2:t=e.sent,m()(t,"image");case 4:case"end":return e.stop()}}),e,this)}))),function(){return y.apply(this,arguments)}),fetchPurchase:(w=x(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("fetchPurchase");case 2:case"end":return e.stop()}}),e,this)}))),function(){return w.apply(this,arguments)}),searchSupplier:function(e,t,a){return String(t).toLowerCase().indexOf(a.toLowerCase())>-1||String(e.company).toLowerCase().indexOf(a.toLowerCase())>-1||String(e.contact).toLowerCase().indexOf(a.toLowerCase())>-1},searchProduct:function(e,t,a){return String(t).toLowerCase().indexOf(a.toLowerCase())>-1||String(e.id).toLowerCase().indexOf(a.toLowerCase())>-1},addItemLine:function(){this.purchase.items.push({id:"",name:null,description:null,qty:1,purchase_price:1,sale_price:1,amount:1})},removeItemLine:function(e){this.purchase.items.splice(e,1)},selectProduct:function(e,t){var a=this.all_products.filter((function(t){return parseInt(t.id)===parseInt(e.id)}));this.purchase.items[t].name=a[0].name,this.purchase.items[t].description=a[0].description,this.purchase.items[t].sale_price=a[0].default_sale,this.purchase.items[t].purchase_price=a[0].default_purchase},show:function(e){var t=this;this.$modal.show("show-purchase"),this.purchase.id=e.id,this.purchase.supplier=e.supplier,this.purchase.location=e.location,this.purchase.purchase_date=e.date,this.purchase.purchase_status=e.purchase_status,this.purchase.description=e.description,this.purchase.balance=e.balance,t.purchase.items=[],e.purchase_detail.forEach((function(e,a){t.purchase.items.push({id:e.product,name:e.product.name,description:e.product.description,qty:e.qty,purchase_price:e.purchase,sale_price:e.sale,amount:e.amount})}))},updatePurchase:function(){var e=this;this.$validator.validateAll().then((function(t){t?(e.$vs.loading(),e.$store.dispatch("updatePurchase",e.purchase).then((function(t){t?(e.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យកែប្រែ",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),e.$emit("finished"),e.fetchPurchase()):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"ទិន្នន័យមិនកែប្រែ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"}),e.$vs.loading.close()}))):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"សូមបំពេញទិន្នន័យអោយបានត្រឹមត្រូវ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"})}))},successUpload:function(e,t){this.product.image=t.path}}},C=(a("gVpz"),a("KHd+")),k=Object(C.a)(g,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("modal",{attrs:{width:"60%",height:"auto",scrollable:!0,pivotY:.2,clickToClose:!1,name:"show-purchase"}},[a("div",{staticClass:"flex justify-end"},[a("i",{staticClass:"vs-icon vs-popup--close material-icons text-warning",staticStyle:{background:"rgb(255, 255, 255)"},on:{click:function(t){return e.$modal.hide("show-purchase")}}},[e._v("close")])]),e._v(" "),a("vx-card",{attrs:{"no-shadow":""}},[a("div",{attrs:{id:"printMe"}},[a("table",[a("tr",[a("td",[e._v("អ្នកផ្គត់ផ្គង់")]),e._v(" "),a("td",[e._v("Purchase Status")]),e._v(" "),a("td",[e._v("ទីតាំងទិញចូល")]),e._v(" "),a("td",[e._v("ពិពណ៌នា")]),e._v(" "),a("td",[e._v("ថ្ងៃខែឆ្នាំទិញចូល")]),e._v(" "),a("td",[e._v("Barcode")])]),e._v(" "),a("tr",[a("td",[e._v("\n                            ឈ្មោះ: "+e._s(e.purchase.supplier.name)),a("br"),e._v("\n                            ក្រុមហ៊ុន: "+e._s(e.purchase.supplier.company)),a("br"),e._v("\n                            ទំនាក់ទំនង: "+e._s(e.purchase.supplier.contact)),a("br")]),e._v(" "),a("td",[e._v(e._s(e.purchase.purchase_status))]),e._v(" "),a("td",[e._v(e._s(e.purchase.location))]),e._v(" "),a("td",[e._v(e._s(e.purchase.description))]),e._v(" "),a("td",[e._v(e._s(e.purchase.purchase_date))]),e._v(" "),a("td",{staticClass:"p-2"},[a("bar-code",{attrs:{value:e.purchase.id,options:{displayValue:!0}}})],1)])]),e._v(" "),a("vs-divider"),e._v(" "),a("table",[a("thead",[a("tr",[a("th",[e._v("ល.រ")]),e._v(" "),a("th",[e._v("ឈ្មោះ")]),e._v(" "),a("th",[e._v("ពិពណ៌នា")]),e._v(" "),a("th",[e._v("ចំនួន")]),e._v(" "),a("th",[e._v("តម្លៃទិញ")]),e._v(" "),a("th",[e._v("តម្លៃលក់")]),e._v(" "),a("th",[e._v("សរុប")])])]),e._v(" "),a("tbody",e._l(e.purchase.items,(function(t,s){return a("tr",{key:s},[a("td",{staticClass:"pl-2 print:pl-2"},[e._v("\n                            "+e._s(s+1)+"\n                        ")]),e._v(" "),a("td",{staticClass:"pl-2 print:pl-2"},[e._v("\n                            "+e._s(t.name)+"\n                        ")]),e._v(" "),a("td",{staticClass:"pl-2 print:pl-2"},[e._v("\n                            "+e._s(t.description)+"\n                        ")]),e._v(" "),a("td",{staticClass:"pl-2 print:pl-2"},[e._v("\n                            "+e._s(t.qty)+"\n                        ")]),e._v(" "),a("td",{staticClass:"pl-2 print:pl-2"},[a("money-format",{attrs:{value:parseFloat(t.purchase_price),locale:"en","currency-code":"USD"}})],1),e._v(" "),a("td",{staticClass:"pl-2 print:pl-2"},[a("money-format",{attrs:{value:parseFloat(t.sale_price),locale:"en","currency-code":"USD"}})],1),e._v(" "),a("td",{staticClass:"pl-2 print:pl-2"},[a("money-format",{attrs:{value:t.amount=t.purchase_price*t.qty,locale:"en","currency-code":"USD"}})],1)])})),0),e._v(" "),a("tfoot",[a("tr",[a("td"),e._v(" "),a("td"),e._v(" "),a("td"),e._v(" "),a("td"),e._v(" "),a("td"),e._v(" "),a("td",{staticClass:"md:text-right"},[e._v("\n                            សរុប\n                        ")]),e._v(" "),a("td",{staticClass:"pl-2 print:pl-2"},[a("money-format",{attrs:{value:e.purchase.total_balance,locale:"en","currency-code":"USD"}})],1)])])]),e._v(" "),a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("vs-divider",{attrs:{position:"left"}},[e._v("Payment")]),e._v(" "),a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-1/2 print:w-1/2 w-full"},[a("label",[e._v("ប្រាក់ទិញទំនិញ")]),e._v(" "),a("money-format",{attrs:{value:parseFloat(e.purchase.balance),locale:"en","currency-code":"USD"}})],1),e._v(" "),a("div",{staticClass:"vx-col md:w-1/2 print:w-1/2 w-full"},[a("label",[e._v("ទឹកប្រាក់ជំពាក់")]),e._v(" "),a("money-format",{attrs:{value:parseFloat(e.purchase.due_balance=e.purchase.total_balance-e.purchase.balance),locale:"en","currency-code":"USD"}})],1)])],1)])],1),e._v(" "),a("img",{attrs:{src:e.output,alt:""}}),e._v(" "),a("div",{staticClass:"flex justify-end btn-group"},[a("vs-button",{attrs:{icon:"icon-printer","icon-pack":"feather",type:"relief"},on:{click:e.printHtml}},[e._v("បោះពុម្ភ\n                ")])],1)])],1),e._v(" "),a("add-supplier",{ref:"addSupplier"}),e._v(" "),a("add-unit",{ref:"addUnit"}),e._v(" "),a("add-category",{ref:"addCategory"}),e._v(" "),a("add-brand",{ref:"addBrand"})],1)}),[],!1,null,"46fc3010",null);t.a=k.exports},gVpz:function(e,t,a){"use strict";var s=a("HYsX");a.n(s).a},mddE:function(e,t,a){"use strict";var s=a("ksP6"),r=a.n(s),n=(a("Hj/Q"),a("Snq/")),i=a.n(n),o=a("yo3J"),c=a("4hyD"),l={name:"editProduct",components:{AddBrand:a("9Dpo").a,AddCategory:c.a,AddUnit:o.a,vueDropzone:r.a,"v-select":i.a},data:function(){return{product:{name:"",description:"",unit:{name:"ដំុ"},category:{name:"RX300"},brand:{name:"Toyota"},inventory_type:"inventory_part",default_purchase:1,default_sale:1,image:"images/placeholder/placeholder.png"},units:[{name:"គីឡូ"},{name:"លីត្រ"},{name:"ដំុ"}],categories:[{name:"គ្រឿងក្រោម"},{name:"ដែក"},{name:"ដំុ"}],brands:[{name:"AKA"},{name:"Snip"}],inventory_type:[{name:"inventory_part"},{name:"service"},{name:"sale_only"},{name:"purchase_only"}],dropzoneOptions:{url:route("file.upload.thumb"),maxFiles:1,addRemoveLinks:!0,dictDefaultMessage:"ដាក់រូបភាពទំនិញបើមាន",thumbnailWidth:150,thumbnailHeight:150}}},computed:{all_units:function(){return this.$store.getters.all_unit},all_categories:function(){return this.$store.getters.all_category},all_brands:function(){return this.$store.getters.all_brand}},methods:{show:function(e){this.$modal.show("edit"),this.product.id=e.id,this.product.name=e.name,this.product.description=e.description,this.product.unit={name:e.unit},this.product.category={name:e.category},this.product.brand={name:e.brand},this.product.inventory_type=e.inventory_type,this.product.default_purchase=e.default_purchase,this.product.default_sale=e.default_sale,this.product.image=e.image},editThumb:function(){this.$refs.image.manuallyAddFile({size:123},this.product.image)},updateProduct:function(){var e=this;this.$validator.validateAll().then((function(t){t?(e.$vs.loading(),e.$store.dispatch("updateProduct",e.product).then((function(t){t?(e.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានកែប្រែ",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),e.$emit("finished")):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"ទិន្នន័យមិនបានកែប្រែ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"}),e.$vs.loading.close()}))):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"សូមបំពេញទិន្នន័យអោយបានត្រឹមត្រូវ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"})}))},successUpload:function(e,t){this.product.image=t.path}}},d=a("KHd+"),u=Object(d.a)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("modal",{attrs:{width:"90%",height:"auto",scrollable:!0,pivotY:.2,clickToClose:!1,name:"edit"}},[a("div",{staticClass:"flex justify-end"},[a("i",{staticClass:"vs-icon vs-popup--close material-icons text-warning",staticStyle:{background:"rgb(255, 255, 255)"},on:{click:function(t){return e.$modal.hide("edit")}}},[e._v("close")])]),e._v(" "),a("vx-card",{attrs:{"no-shadow":""}},[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-1/3 w-full"},[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col w-full"},[a("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{"label-placeholder":"ឈ្មោះ",name:"name"},model:{value:e.product.name,callback:function(t){e.$set(e.product,"name",t)},expression:"product.name"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("name"),expression:"errors.has('name')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("name")))])],1),e._v(" "),a("div",{staticClass:"vx-col w-full my-2"},[a("label",[e._v("ពិពណ៌នា")]),e._v(" "),a("vs-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{label:"ពិពណ៌នា",name:"description"},model:{value:e.product.description,callback:function(t){e.$set(e.product,"description",t)},expression:"product.description"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("description"),expression:"errors.has('description')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("description")))])],1),e._v(" "),a("div",{staticClass:"vx-col w-full"},[a("vs-input-number",{attrs:{min:"0",label:"តម្លៃទិញ:"},model:{value:e.product.default_purchase,callback:function(t){e.$set(e.product,"default_purchase",t)},expression:"product.default_purchase"}})],1),e._v(" "),a("div",{staticClass:"vx-col w-full"},[a("vs-input-number",{attrs:{min:"0",label:"តម្លៃទលក់:"},model:{value:e.product.default_sale,callback:function(t){e.$set(e.product,"default_sale",t)},expression:"product.default_sale"}})],1)])]),e._v(" "),a("div",{staticClass:"vx-col md:w-2/3 w-full"},[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("label",[e._v("Unit")]),e._v(" "),a("vx-input-group",[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"unit",clearable:!1,label:"name",options:e.all_units},model:{value:e.product.unit,callback:function(t){e.$set(e.product,"unit",t)},expression:"product.unit"}}),e._v(" "),a("template",{slot:"append"},[a("div",{staticClass:"append-text btn-addon",on:{click:function(t){return e.$refs.addUnit.show()}}},[a("vs-button",{staticClass:"rounded-none",attrs:{type:"filled","icon-pack":"feather",icon:"icon-plus"}})],1)])],2),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("unit"),expression:"errors.has('unit')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("unit")))])],1),e._v(" "),a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("label",[e._v("ប្រភេទ")]),e._v(" "),a("vx-input-group",[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"category",clearable:!1,label:"name",options:e.all_categories},model:{value:e.product.category,callback:function(t){e.$set(e.product,"category",t)},expression:"product.category"}}),e._v(" "),a("template",{slot:"append"},[a("div",{staticClass:"append-text btn-addon",on:{click:function(t){return e.$refs.addCategory.show()}}},[a("vs-button",{staticClass:"rounded-none",attrs:{type:"filled","icon-pack":"feather",icon:"icon-plus"}})],1)])],2),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("category"),expression:"errors.has('category')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("category")))])],1)]),e._v(" "),a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("label",[e._v("Model")]),e._v(" "),a("vx-input-group",[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"brand",clearable:!1,label:"name",options:e.all_brands},model:{value:e.product.brand,callback:function(t){e.$set(e.product,"brand",t)},expression:"product.brand"}}),e._v(" "),a("template",{slot:"append"},[a("div",{staticClass:"append-text btn-addon",on:{click:function(t){return e.$refs.addBrand.show()}}},[a("vs-button",{staticClass:"rounded-none",attrs:{type:"filled","icon-pack":"feather",icon:"icon-plus"}})],1)])],2),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("brand"),expression:"errors.has('brand')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("brand")))])],1),e._v(" "),a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("label",[e._v("Inventory Type")]),e._v(" "),a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"inventory_type",options:["inventory_part","service","sale_only","purchase_only"]},model:{value:e.product.inventory_type,callback:function(t){e.$set(e.product,"inventory_type",t)},expression:"product.inventory_type"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("inventory_type"),expression:"errors.has('inventory_type')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("inventory_type")))])],1)]),e._v(" "),a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-1/2 my-2"},[a("vue-dropzone",{ref:"image",staticClass:"max-content p-1",attrs:{duplicateCheck:"",id:"dropzone",options:e.dropzoneOptions},on:{"vdropzone-success":e.successUpload,"vdropzone-mounted":e.editThumb}})],1)])])]),e._v(" "),a("vs-divider"),e._v(" "),a("div",{staticClass:"flex justify-end btn-group"},[a("vs-button",{attrs:{icon:"icon-save","icon-pack":"feather",type:"relief"},on:{click:e.updateProduct}},[e._v("រក្សាទុក")])],1)],1),e._v(" "),a("add-unit",{ref:"addUnit"}),e._v(" "),a("add-category",{ref:"addCategory"}),e._v(" "),a("add-brand",{ref:"addBrand"})],1)}),[],!1,null,"4c13bb72",null);t.a=u.exports},"o+M+":function(e,t,a){"use strict";a.r(t);var s=a("o0o1"),r=a.n(s),n=a("mddE"),i=a("w48C"),o=a.n(i),c=(a("K+Wz"),a("yo3J")),l=a("4hyD"),d=a("9Dpo"),u=a("CLzC"),p=a("Snq/"),v=a.n(p),h={name:"addPurchase",components:{AddSupplier:u.a,AddBrand:d.a,AddCategory:l.a,AddUnit:c.a,flatPickr:o.a,"v-select":v.a},data:function(){return{purchase:{user_id:this.$store.state.AppActiveUser.uid,supplier:null,location:"Ly Put Garage",purchase_date:null,purchase_status:"pending",description:"",total_balance:null,balance:null,due_balance:0,amount:0,qty:0,items:[{id:"",name:null,description:null,qty:1,purchase_price:1,sale_price:1,amount:1,inventory_type:""}]}}},computed:{all_suppliers:function(){return this.$store.getters.all_supplier},all_products:function(){return this.$store.getters.all_product},total:function(){var e=0;return this.purchase.items.forEach((function(t,a){e+=parseFloat(t.amount)})),this.purchase.total_balance=e,this.purchase.balance=e,e},total_qty:function(){var e=0;return this.purchase.items.forEach((function(t,a){e+=parseFloat(t.qty)})),this.purchase.qty=e,e}},updated:function(){this.total_qty,this.total},methods:{searchSupplier:function(e,t,a){return String(t).toLowerCase().indexOf(a.toLowerCase())>-1||String(e.company).toLowerCase().indexOf(a.toLowerCase())>-1||String(e.contact).toLowerCase().indexOf(a.toLowerCase())>-1},searchProduct:function(e,t,a){return String(t).toLowerCase().indexOf(a.toLowerCase())>-1||String(e.id).toLowerCase().indexOf(a.toLowerCase())>-1},addItemLine:function(){this.purchase.items.push({id:"",name:null,description:null,qty:1,purchase_price:1,sale_price:1,amount:1,inventory_type:""})},removeItemLine:function(e){this.purchase.items.splice(e,1)},selectProduct:function(e,t){var a=this.all_products.filter((function(t){return parseInt(t.id)===parseInt(e.id)}));this.purchase.items[t].name=a[0].name,this.purchase.items[t].description=a[0].description,this.purchase.items[t].inventory_type=a[0].inventory_type,this.purchase.items[t].sale_price=a[0].default_sale,this.purchase.items[t].purchase_price=a[0].default_purchase},show:function(){this.$modal.show("add")},storePurchase:function(){var e=this;this.$validator.validateAll().then((function(t){t?(e.$vs.loading(),e.$store.dispatch("storePurchase",e.purchase).then((function(t){t?(e.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានបន្ថែម",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),e.resetField()):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"ទិន្នន័យមិនបានបន្ថែម",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"}),e.$vs.loading.close()}))):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"សូមបំពេញទិន្នន័យអោយបានត្រឹមត្រូវ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"})}))},resetField:function(){this.purchase.items=[]},successUpload:function(e,t){this.product.image=t.path}}},_=a("KHd+"),m=Object(_.a)(h,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("modal",{attrs:{width:"90%",height:"auto",scrollable:!0,pivotY:.2,clickToClose:!1,name:"add"}},[a("div",{staticClass:"flex justify-end"},[a("i",{staticClass:"vs-icon vs-popup--close material-icons text-warning",staticStyle:{background:"rgb(255, 255, 255)"},on:{click:function(t){return e.$modal.hide("add")}}},[e._v("close")])]),e._v(" "),a("vx-card",{attrs:{"no-shadow":""}},[a("div",{staticClass:"vx-row my-3"},[a("div",{staticClass:"vx-col md:w-1/3 w-full"},[a("label",[e._v("អ្នកផ្គត់ផ្គង់")]),e._v(" "),a("vx-input-group",[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{filterBy:e.searchSupplier,label:"name",name:"supplier",options:e.all_suppliers},scopedSlots:e._u([{key:"option",fn:function(e){return[a("vs-list-item",{attrs:{title:"ឈ្មោះ​ "+e.name+" ក្រុមហ៊ុន "+e.company,subtitle:"ទំនាក់ទំនង "+e.contact+" អាស័យដ្ឋាន "+e.address}})]}}]),model:{value:e.purchase.supplier,callback:function(t){e.$set(e.purchase,"supplier",t)},expression:"purchase.supplier"}}),e._v(" "),a("template",{slot:"append"},[a("div",{staticClass:"append-text btn-addon",on:{click:function(t){return e.$refs.addSupplier.show()}}},[a("vs-button",{staticClass:"rounded-none",attrs:{type:"filled","icon-pack":"feather",icon:"icon-plus"}})],1)])],2),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("supplier"),expression:"errors.has('supplier')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("supplier")))])],1),e._v(" "),a("div",{staticClass:"vx-col md:w-1/3 w-full"},[a("label",[e._v("ទីតាំង")]),e._v(" "),a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"location",options:["Ly Put Garage"]},model:{value:e.purchase.location,callback:function(t){e.$set(e.purchase,"location",t)},expression:"purchase.location"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("location"),expression:"errors.has('location')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("location")))])],1),e._v(" "),a("div",{staticClass:"vx-col md:w-1/3 w-full"},[a("label",[e._v("ថ្ងៃខែឆ្នាំទិញ")]),e._v(" "),a("flat-pickr",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{name:"date",placeholder:"Choose Date"},model:{value:e.purchase.purchase_date,callback:function(t){e.$set(e.purchase,"purchase_date",t)},expression:"purchase.purchase_date"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("purchase_date"),expression:"errors.has('purchase_date')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("purchase_date")))])],1)]),e._v(" "),a("div",{staticClass:"vx-row my-3"},[a("div",{staticClass:"vx-col md:w-1/3 w-full"},[a("label",[e._v("Purchase Status")]),e._v(" "),a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"purchase_status",options:["received","pending"]},model:{value:e.purchase.purchase_status,callback:function(t){e.$set(e.purchase,"purchase_status",t)},expression:"purchase.purchase_status"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("status"),expression:"errors.has('status')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("status")))])],1),e._v(" "),a("div",{staticClass:"vx-col md:w-1/3 w-full"},[a("label",[e._v("ពិពណ៌នា")]),e._v(" "),a("vs-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{label:"ពិពណ៌នា",name:"description"},model:{value:e.purchase.description,callback:function(t){e.$set(e.purchase,"description",t)},expression:"purchase.description"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("description"),expression:"errors.has('description')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("description")))])],1),e._v(" "),a("div",{staticClass:"vx-col md:w-1/3"},[e._v("\n                    Amount\n                    "),a("span",{staticClass:"text-6xl block"},[e._v("$"+e._s(e.purchase.total_balance))])])]),e._v(" "),a("vs-divider",{attrs:{position:"left"}},[e._v("បញ្ជីទំនិញ")]),e._v(" "),a("table",{staticClass:"vs-table vs-table--tbody-table"},[a("thead",[a("tr",[a("th",[e._v("ល.រ")]),e._v(" "),a("th",[e._v("ឈ្មោះ")]),e._v(" "),a("th",[e._v("ពិពណ៌នា")]),e._v(" "),a("th",[e._v("ចំនួន")]),e._v(" "),a("th",[e._v("តម្លៃទិញ")]),e._v(" "),a("th",[e._v("តម្លៃលក់")]),e._v(" "),a("th",[e._v("សរុប")]),e._v(" "),a("th")])]),e._v(" "),a("tbody",e._l(e.purchase.items,(function(t,s){return a("tr",{key:s},[a("td",{staticClass:"py-1"},[e._v("\n                        "+e._s(s+1)+"\n                    ")]),e._v(" "),a("td",{attrs:{width:"400"}},[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{filterBy:e.searchProduct,label:"name",name:"product-"+s,options:e.all_products},on:{input:function(a){return e.selectProduct(t.id,s)}},scopedSlots:e._u([{key:"option",fn:function(e){return[a("vs-list-item",{attrs:{title:"ID: "+e.id+" ឈ្មោះ​ "+e.name,subtitle:"តម្លៃលក់ "+e.default_purchase+" តម្លៃទិញ "+e.default_sale}})]}}],null,!0),model:{value:t.id,callback:function(a){e.$set(t,"id",a)},expression:"tr.id"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("product-"+s),expression:"errors.has(`product-${indextr}`)"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("product-"+s)))])],1),e._v(" "),a("td",[e._v("\n                        "+e._s(t.description)+"\n                    ")]),e._v(" "),a("td",[a("vs-input-number",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{color:"danger",min:"0",name:"qty-"+s},model:{value:t.qty,callback:function(a){e.$set(t,"qty",a)},expression:"tr.qty"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("qty-"+s),expression:"errors.has(`qty-${indextr}`)"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("qty-"+s)))])],1),e._v(" "),a("td",[a("vs-input-number",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{color:"danger",min:"0",name:"purchase_price-"+s},model:{value:t.purchase_price,callback:function(a){e.$set(t,"purchase_price",a)},expression:"tr.purchase_price"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("purchase_price-"+s),expression:"errors.has(`purchase_price-${indextr}`)"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("purchase_price-"+s)))])],1),e._v(" "),a("td",[a("vs-input-number",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{color:"danger",min:"0",name:"sale_price-"+s},model:{value:t.sale_price,callback:function(a){e.$set(t,"sale_price",a)},expression:"tr.sale_price"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("sale_price-"+s),expression:"errors.has(`sale_price-${indextr}`)"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("sale_price-"+s)))])],1),e._v(" "),a("td",[e._v("\n                        "+e._s(t.amount=t.purchase_price*t.qty)+"\n                    ")]),e._v(" "),a("td",{staticClass:"py-1"},[a("vs-button",{attrs:{icon:"icon-trash-2",color:"warning","icon-pack":"feather",type:"flat"},on:{click:function(t){return e.removeItemLine(s)}}})],1)])})),0)]),e._v(" "),a("vs-button",{staticClass:"rounded-none my-3",attrs:{icon:"icon-plus","icon-pack":"feather",type:"line"},on:{click:e.addItemLine}},[e._v("បន្ថែមទំនិញ")]),e._v(" "),a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("vs-divider",{attrs:{position:"left"}},[e._v("Payment")]),e._v(" "),a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("label",[e._v("ប្រាក់ទិញទំនិញ")]),e._v(" "),a("vs-input-number",{attrs:{color:"warning",min:"0",max:e.purchase.total_balance,label:"ប្រាក់ទិញទំនិញ:"},model:{value:e.purchase.balance,callback:function(t){e.$set(e.purchase,"balance",t)},expression:"purchase.balance"}})],1),e._v(" "),a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("label",[e._v("ទឹកប្រាក់ជំពាក់")]),e._v(" "),a("vs-input",{staticClass:"w-full",attrs:{step:"any",readonly:"",type:"number"},model:{value:e.purchase.due_balance=e.purchase.total_balance-e.purchase.balance,callback:function(t){e.$set(e.purchase.due_balance=e.purchase.total_balance-e.purchase,"balance",t)},expression:"purchase.due_balance = purchase.total_balance - purchase.balance"}})],1)])],1)]),e._v(" "),a("vs-divider"),e._v(" "),a("div",{staticClass:"flex justify-end btn-group"},[a("vs-button",{attrs:{icon:"icon-save","icon-pack":"feather",type:"relief"},on:{click:e.storePurchase}},[e._v("រក្សាទុក")])],1)],1)],1),e._v(" "),a("add-supplier",{ref:"addSupplier"}),e._v(" "),a("add-unit",{ref:"addUnit"}),e._v(" "),a("add-category",{ref:"addCategory"}),e._v(" "),a("add-brand",{ref:"addBrand"})],1)}),[],!1,null,"b43a3ef4",null).exports;function f(e,t,a,s,r,n,i){try{var o=e[n](i),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(s,r)}var x,w,y={name:"addPayment",methods:{show:function(e){this.$modal.show("add-payment"),this.data.id=e.id,this.data.balance=e.due_balance,this.data.input_balance=e.due_balance},updatePurchasePayment:function(){var e=this;this.$validator.validateAll().then((function(t){t?(e.$vs.loading(),e.$store.dispatch("updatePurchasePayment",e.data).then((function(t){t?(e.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទឹកប្រាក់បានបន្ថែម",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),e.fetchPurchase(),e.$emit("finished"),e.$modal.hide("add-payment")):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"ទឹកប្រាក់មិនបានបន្ថែម",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"}),e.$vs.loading.close()}))):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"សូមបំពេញទិន្នន័យអោយបានត្រឹមត្រូវ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"})}))},fetchPurchase:(x=r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("fetchPurchase");case 2:case"end":return e.stop()}}),e,this)})),w=function(){var e=this,t=arguments;return new Promise((function(a,s){var r=x.apply(e,t);function n(e){f(r,a,s,n,i,"next",e)}function i(e){f(r,a,s,n,i,"throw",e)}n(void 0)}))},function(){return w.apply(this,arguments)})},data:function(){return{data:{id:null,balance:0,input_balance:0,due_balance:0}}},computed:{due_balance:function(){return this.data.due_balance=this.data.balance-this.data.input_balance}}},b=Object(_.a)(y,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("modal",{attrs:{height:"auto",scrollable:!0,pivotY:.2,clickToClose:!1,name:"add-payment"}},[a("div",{staticClass:"flex justify-end"},[a("i",{staticClass:"vs-icon vs-popup--close material-icons text-warning",staticStyle:{background:"rgb(255, 255, 255)"},on:{click:function(t){return e.$modal.hide("add-payment")}}},[e._v("close")])]),e._v(" "),a("vx-card",{attrs:{"no-shadow":""}},[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("h4",[e._v("ទឹកប្រាក់ត្រូវសង")]),e._v(" "),a("span",{staticClass:"text-2xl"},[e._v("$"+e._s(e.data.balance))])]),e._v(" "),a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("h4",[e._v("ទឹកប្រាក់នៅសល់")]),e._v(" "),a("span",{staticClass:"text-2xl"},[e._v("$"+e._s(e.due_balance))])])]),e._v(" "),a("vs-divider"),e._v(" "),a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col w-full"},[a("vs-input-number",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{min:"0",max:e.data.balance,name:"input_balance"},model:{value:e.data.input_balance,callback:function(t){e.$set(e.data,"input_balance",t)},expression:"data.input_balance"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("input_balance"),expression:"errors.has('input_balance')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("input_balance")))])],1)]),e._v(" "),a("div",{staticClass:"flex justify-end btn-group"},[a("vs-button",{attrs:{icon:"icon-dollar-sign","icon-pack":"feather",type:"relief"},on:{click:e.updatePurchasePayment}},[e._v("ចំណាយ")])],1)],1)],1)}),[],!1,null,"45cc58d4",null).exports,g=a("q+Mi"),C={name:"editPurchase",components:{AddSupplier:u.a,AddBrand:d.a,AddCategory:l.a,AddUnit:c.a,flatPickr:o.a,"v-select":v.a,"bar-code":g.a},data:function(){return{purchase:{user_id:this.$store.state.AppActiveUser.uid,id:null,supplier:null,location:"Ly Put Garage",purchase_date:null,purchase_status:"pending",description:"",total_balance:null,balance:null,due_balance:0,amount:0,qty:0,items:[{id:"",name:null,description:null,qty:1,purchase_price:1,sale_price:1,amount:1,inventory_type:""}]}}},computed:{all_suppliers:function(){return this.$store.getters.all_supplier},all_products:function(){return this.$store.getters.all_product},total:function(){var e=0;return this.purchase.items.forEach((function(t,a){e+=parseFloat(t.amount)})),this.purchase.total_balance=e,this.purchase.balance=e,e},total_qty:function(){var e=0;return this.purchase.items.forEach((function(t,a){e+=parseFloat(t.qty)})),this.purchase.qty=e,e}},updated:function(){this.total_qty,this.total},methods:{searchSupplier:function(e,t,a){return String(t).toLowerCase().indexOf(a.toLowerCase())>-1||String(e.company).toLowerCase().indexOf(a.toLowerCase())>-1||String(e.contact).toLowerCase().indexOf(a.toLowerCase())>-1},searchProduct:function(e,t,a){return String(t).toLowerCase().indexOf(a.toLowerCase())>-1||String(e.id).toLowerCase().indexOf(a.toLowerCase())>-1},addItemLine:function(){this.purchase.items.push({id:"",name:null,description:null,qty:1,purchase_price:1,sale_price:1,amount:1,inventory_type:""})},removeItemLine:function(e){this.purchase.items.splice(e,1)},selectProduct:function(e,t){var a=this.all_products.filter((function(t){return parseInt(t.id)===parseInt(e.id)}));this.purchase.items[t].name=a[0].name,this.purchase.items[t].description=a[0].description,this.purchase.items[t].sale_price=a[0].default_sale,this.purchase.items[t].inventory_type=a[0].inventory_type,this.purchase.items[t].purchase_price=a[0].default_purchase},show:function(e){var t=this;this.$modal.show("edit-purchase"),this.purchase.id=e.id,this.purchase.supplier=e.supplier,this.purchase.location=e.location,this.purchase.purchase_date=e.date,this.purchase.purchase_status=e.purchase_status,this.purchase.description=e.description,this.purchase.balance=e.balance,t.purchase.items=[],e.purchase_detail.forEach((function(e,a){t.purchase.items.push({id:e.product,name:e.product.name,description:e.product.description,qty:e.qty,purchase_price:e.purchase,sale_price:e.sale,amount:e.amount,inventory_type:e.product.inventory_type})}))},updatePurchase:function(){var e=this;this.$validator.validateAll().then((function(t){t?(e.$vs.loading(),e.$store.dispatch("updatePurchase",e.purchase).then((function(t){t?(e.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យកែប្រែ",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),e.$emit("finished")):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"ទិន្នន័យមិនកែប្រែ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"}),e.$vs.loading.close()}))):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"សូមបំពេញទិន្នន័យអោយបានត្រឹមត្រូវ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"})}))},successUpload:function(e,t){this.product.image=t.path}}},k=Object(_.a)(C,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("modal",{attrs:{width:"90%",height:"auto",scrollable:!0,pivotY:.2,clickToClose:!1,name:"edit-purchase"}},[a("div",{staticClass:"flex justify-end"},[a("i",{staticClass:"vs-icon vs-popup--close material-icons text-warning",staticStyle:{background:"rgb(255, 255, 255)"},on:{click:function(t){return e.$modal.hide("edit-purchase")}}},[e._v("close")])]),e._v(" "),a("vx-card",{attrs:{"no-shadow":""}},[a("div",{staticClass:"vx-row my-3"},[a("div",{staticClass:"vx-col md:w-1/3 w-full"},[a("label",[e._v("អ្នកផ្គត់ផ្គង់")]),e._v(" "),a("vx-input-group",[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{filterBy:e.searchSupplier,label:"name",name:"supplier",options:e.all_suppliers},scopedSlots:e._u([{key:"option",fn:function(e){return[a("vs-list-item",{attrs:{title:"ឈ្មោះ​ "+e.name+" ក្រុមហ៊ុន "+e.company,subtitle:"ទំនាក់ទំនង "+e.contact+" អាស័យដ្ឋាន "+e.address}})]}}]),model:{value:e.purchase.supplier,callback:function(t){e.$set(e.purchase,"supplier",t)},expression:"purchase.supplier"}}),e._v(" "),a("template",{slot:"append"},[a("div",{staticClass:"append-text btn-addon",on:{click:function(t){return e.$refs.addSupplier.show()}}},[a("vs-button",{staticClass:"rounded-none",attrs:{type:"filled","icon-pack":"feather",icon:"icon-plus"}})],1)])],2),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("supplier"),expression:"errors.has('supplier')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("supplier")))])],1),e._v(" "),a("div",{staticClass:"vx-col md:w-1/3 w-full"},[a("label",[e._v("ទីតាំង")]),e._v(" "),a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"location",options:["Ly Put Garage"]},model:{value:e.purchase.location,callback:function(t){e.$set(e.purchase,"location",t)},expression:"purchase.location"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("location"),expression:"errors.has('location')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("location")))])],1),e._v(" "),a("div",{staticClass:"vx-col md:w-1/3 w-full"},[a("label",[e._v("ថ្ងៃខែឆ្នាំទិញ")]),e._v(" "),a("flat-pickr",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{name:"date",placeholder:"Choose Date"},model:{value:e.purchase.purchase_date,callback:function(t){e.$set(e.purchase,"purchase_date",t)},expression:"purchase.purchase_date"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("purchase_date"),expression:"errors.has('purchase_date')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("purchase_date")))])],1)]),e._v(" "),a("div",{staticClass:"vx-row my-3"},[a("div",{staticClass:"vx-col md:w-1/3 w-full"},[a("label",[e._v("Purchase Status")]),e._v(" "),a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"purchase_status",options:["received","pending"]},model:{value:e.purchase.purchase_status,callback:function(t){e.$set(e.purchase,"purchase_status",t)},expression:"purchase.purchase_status"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("status"),expression:"errors.has('status')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("status")))])],1),e._v(" "),a("div",{staticClass:"vx-col md:w-1/3 w-full"},[a("label",[e._v("ពិពណ៌នា")]),e._v(" "),a("vs-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{label:"ពិពណ៌នា",name:"description"},model:{value:e.purchase.description,callback:function(t){e.$set(e.purchase,"description",t)},expression:"purchase.description"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("description"),expression:"errors.has('description')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("description")))])],1),e._v(" "),a("div",{staticClass:"vx-col md:w-1/3 shadow-md"},[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-1/2 w-full"},[e._v("\n                            Amount\n                            "),a("span",{staticClass:"text-6xl block"},[e._v("$"+e._s(e.purchase.total_balance))])]),e._v(" "),a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("bar-code",{attrs:{value:e.purchase.id,options:{displayValue:!0}}})],1)])])]),e._v(" "),a("vs-divider",{attrs:{position:"left"}},[e._v("បញ្ជីទំនិញ")]),e._v(" "),a("table",{staticClass:"vs-table vs-table--tbody-table"},[a("thead",[a("tr",[a("th",[e._v("ល.រ")]),e._v(" "),a("th",[e._v("ឈ្មោះ")]),e._v(" "),a("th",[e._v("ពិពណ៌នា")]),e._v(" "),a("th",[e._v("ចំនួន")]),e._v(" "),a("th",[e._v("តម្លៃទិញ")]),e._v(" "),a("th",[e._v("តម្លៃលក់")]),e._v(" "),a("th",[e._v("សរុប")]),e._v(" "),a("th")])]),e._v(" "),a("tbody",e._l(e.purchase.items,(function(t,s){return a("tr",{key:s},[a("td",{staticClass:"py-1"},[e._v("\n                        "+e._s(s+1)+"\n                    ")]),e._v(" "),a("td",{attrs:{width:"400"}},[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{filterBy:e.searchProduct,label:"name",name:"product-"+s,options:e.all_products},on:{input:function(a){return e.selectProduct(t.id,s)}},scopedSlots:e._u([{key:"option",fn:function(e){return[a("vs-list-item",{attrs:{title:"ID: "+e.id+" ឈ្មោះ​ "+e.name,subtitle:"តម្លៃលក់ "+e.default_purchase+" តម្លៃទិញ "+e.default_sale}})]}}],null,!0),model:{value:t.id,callback:function(a){e.$set(t,"id",a)},expression:"tr.id"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("product-"+s),expression:"errors.has(`product-${indextr}`)"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("product-"+s)))])],1),e._v(" "),a("td",[e._v("\n                        "+e._s(t.description)+"\n                    ")]),e._v(" "),a("td",[a("vs-input-number",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{color:"danger",min:"0",name:"qty-"+s},model:{value:t.qty,callback:function(a){e.$set(t,"qty",a)},expression:"tr.qty"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("qty-"+s),expression:"errors.has(`qty-${indextr}`)"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("qty-"+s)))])],1),e._v(" "),a("td",[a("vs-input-number",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{color:"danger",min:"0",name:"purchase_price-"+s},model:{value:t.purchase_price,callback:function(a){e.$set(t,"purchase_price",a)},expression:"tr.purchase_price"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("purchase_price-"+s),expression:"errors.has(`purchase_price-${indextr}`)"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("purchase_price-"+s)))])],1),e._v(" "),a("td",[a("vs-input-number",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{color:"danger",min:"0",name:"sale_price-"+s},model:{value:t.sale_price,callback:function(a){e.$set(t,"sale_price",a)},expression:"tr.sale_price"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("sale_price-"+s),expression:"errors.has(`sale_price-${indextr}`)"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("sale_price-"+s)))])],1),e._v(" "),a("td",[e._v("\n                        "+e._s(t.amount=t.purchase_price*t.qty)+"\n                    ")]),e._v(" "),a("td",{staticClass:"py-1"},[a("vs-button",{attrs:{icon:"icon-trash-2",color:"warning","icon-pack":"feather",type:"flat"},on:{click:function(t){return e.removeItemLine(s)}}})],1)])})),0)]),e._v(" "),a("vs-button",{staticClass:"rounded-none my-3",attrs:{icon:"icon-plus","icon-pack":"feather",type:"line"},on:{click:e.addItemLine}},[e._v("បន្ថែមទំនិញ")]),e._v(" "),a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("vs-divider",{attrs:{position:"left"}},[e._v("Payment")]),e._v(" "),a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("label",[e._v("ប្រាក់ទិញទំនិញ")]),e._v(" "),a("vs-input-number",{attrs:{color:"warning",min:"0",max:e.purchase.total_balance,label:"ប្រាក់ទិញទំនិញ:"},model:{value:e.purchase.balance,callback:function(t){e.$set(e.purchase,"balance",t)},expression:"purchase.balance"}})],1),e._v(" "),a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("label",[e._v("ទឹកប្រាក់ជំពាក់")]),e._v(" "),a("vs-input",{staticClass:"w-full",attrs:{step:"any",readonly:"",type:"number"},model:{value:e.purchase.due_balance=e.purchase.total_balance-e.purchase.balance,callback:function(t){e.$set(e.purchase.due_balance=e.purchase.total_balance-e.purchase,"balance",t)},expression:"purchase.due_balance = purchase.total_balance - purchase.balance"}})],1)])],1)]),e._v(" "),a("vs-divider"),e._v(" "),a("div",{staticClass:"flex justify-end btn-group"},[a("vs-button",{attrs:{icon:"icon-edit","icon-pack":"feather",type:"relief"},on:{click:function(t){return e.updatePurchase()}}},[e._v("កែប្រែ")])],1)],1)],1),e._v(" "),a("add-supplier",{ref:"addSupplier"}),e._v(" "),a("add-unit",{ref:"addUnit"}),e._v(" "),a("add-category",{ref:"addCategory"}),e._v(" "),a("add-brand",{ref:"addBrand"})],1)}),[],!1,null,"c015a58c",null).exports;function $(e,t,a,s,r,n,i){try{var o=e[n](i),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(s,r)}function q(e){return function(){var t=this,a=arguments;return new Promise((function(s,r){var n=e.apply(t,a);function i(e){$(n,s,r,i,o,"next",e)}function o(e){$(n,s,r,i,o,"throw",e)}i(void 0)}))}}var P,S,N,L,A={name:"Stock",components:{ShowPurchase:a("SZ4Y").a,EditPurchase:k,AddPayment:b,AddPurchase:m,EditProduct:n.a},data:function(){return{selected_pending:[],selected_received:[]}},computed:{all_product:function(){return this.$store.getters.all_product},all_purchases:function(){return this.$store.getters.all_purchase},all_purchase_received:function(){return this.all_purchases.filter((function(e){return"received"===e.purchase_status}))},all_purchase_pending:function(){return this.all_purchases.filter((function(e){return"pending"===e.purchase_status}))}},created:(L=q(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchProduct();case 2:return e.next=4,this.fetchSupplier();case 4:return e.next=6,this.fetchPurchase();case 6:case"end":return e.stop()}}),e,this)}))),function(){return L.apply(this,arguments)}),methods:{fetchPurchase:function(){var e=q(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("fetchPurchase");case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),fetchProduct:(N=q(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("fetchProduct");case 2:case"end":return e.stop()}}),e,this)}))),function(){return N.apply(this,arguments)}),fetchSupplier:(S=q(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("fetchSupplier");case 2:case"end":return e.stop()}}),e,this)}))),function(){return S.apply(this,arguments)}),destroyPurchase:(P=q(r.a.mark((function e(){var t,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=this).$vs.loading(),a=t.selected_pending.map(function(){var e=q(r.a.mark((function e(a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("destroyPurchase",a.id);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=5,Promise.all(a).then((function(){t.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានលុប",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),t.selected_pending=[],t.$vs.loading.close()}));case 5:case"end":return e.stop()}}),e,this)}))),function(){return P.apply(this,arguments)})}},U=Object(_.a)(A,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("vx-card",{attrs:{"no-shadow":""}},[a("div",{staticClass:"flex btn-group"},[a("vs-button",{attrs:{type:"relief","icon-pack":"feather",icon:"icon-plus-square"},on:{click:function(t){return e.$refs.addPurchase.show()}}},[e._v("បន្ថែម")])],1),e._v(" "),a("vs-tabs",[a("vs-tab",{attrs:{label:"Received"}},[a("div",{staticClass:"flex btn-group"},[1===e.selected_received.length&&e.selected_received[0].due_balance>0?a("vs-button",{attrs:{color:"warning",type:"relief","icon-pack":"feather",icon:"icon-dollar-sign"},on:{click:function(t){return e.$refs.addPayment.show(e.selected_received[0])}}},[e._v("Add Payment")]):e._e(),e._v(" "),1===e.selected_received.length?a("vs-button",{attrs:{type:"relief","icon-pack":"feather",icon:"icon-eye"},on:{click:function(t){return e.$refs.showPurchase.show(e.selected_received[0])}}},[e._v("បង្ហាញ")]):e._e()],1),e._v(" "),a("vs-table",{attrs:{multiple:"",pagination:"","max-items":"10",search:"",data:e.all_purchase_received},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.data;return e._l(s,(function(t,r){return a("vs-tr",{key:r,attrs:{data:t}},[a("vs-td",{attrs:{data:s[r].id}},[e._v("\n                            "+e._s(s[r].id)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:s[r].description}},[e._v("\n                            "+e._s(s[r].description)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:s[r].supplier.name}},[e._v("\n                            "+e._s(s[r].supplier.name)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:s[r].location}},[e._v("\n                            "+e._s(s[r].location)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:s[r].qty}},[e._v("\n                            "+e._s(s[r].qty)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:s[r].balance}},[e._v("\n                            "+e._s(s[r].balance)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:s[r].amount}},[e._v("\n                            "+e._s(s[r].amount)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:s[r].due_balance}},[e._v("\n                            "+e._s(s[r].due_balance)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:s[r].date}},[e._v("\n                            "+e._s(s[r].date)+"\n                        ")])],1)}))}}]),model:{value:e.selected_received,callback:function(t){e.selected_received=t},expression:"selected_received"}},[a("template",{slot:"thead"},[a("vs-th",{attrs:{"sort-key":"id"}},[e._v("ល.រ")]),e._v(" "),a("vs-th",{attrs:{"sort-key":"description"}},[e._v("Description")]),e._v(" "),a("vs-th",[e._v("Supplier")]),e._v(" "),a("vs-th",{attrs:{"sort-key":"location"}},[e._v("Location")]),e._v(" "),a("vs-th",{attrs:{"sort-key":"qty"}},[e._v("QTY")]),e._v(" "),a("vs-th",{attrs:{"sort-key":"balance"}},[e._v("Balance")]),e._v(" "),a("vs-th",{attrs:{"sort-key":"amount"}},[e._v("Amount")]),e._v(" "),a("vs-th",{attrs:{"sort-key":"due_balance"}},[e._v("Due Balance")]),e._v(" "),a("vs-th",{attrs:{"sort-key":"purchase_date"}},[e._v("Date")])],1)],2),e._v(" "),a("add-payment",{ref:"addPayment",on:{finished:function(t){e.selected_received=[]}}})],1),e._v(" "),a("vs-tab",{attrs:{label:"Pending"}},[a("div",{staticClass:"flex btn-group"},[1===e.selected_pending.length&&e.selected_pending[0].due_balance>0?a("vs-button",{attrs:{type:"relief","icon-pack":"feather",icon:"icon-dollar-sign"},on:{click:function(t){return e.$refs.addPaymentPending.show(e.selected_pending[0])}}},[e._v("Add Payment")]):e._e(),e._v(" "),1===e.selected_pending.length?a("vs-button",{attrs:{type:"relief","icon-pack":"feather",icon:"icon-eye"},on:{click:function(t){return e.$refs.showPurchase.show(e.selected_pending[0])}}},[e._v("បង្ហាញ")]):e._e(),e._v(" "),1===e.selected_pending.length?a("vs-button",{attrs:{color:"warning",type:"relief","icon-pack":"feather",icon:"icon-edit"},on:{click:function(t){return e.$refs.editPurchase.show(e.selected_pending[0])}}},[e._v("កែប្រែ")]):e._e(),e._v(" "),e.selected_pending.length?a("vs-button",{attrs:{color:"danger",type:"relief","icon-pack":"feather",icon:"icon-trash-2"},on:{click:e.destroyPurchase}},[e._v("លុប")]):e._e()],1),e._v(" "),a("add-payment",{ref:"addPaymentPending",on:{finished:function(t){e.selected_pending=[]}}}),e._v(" "),a("vs-table",{attrs:{multiple:"",pagination:"","max-items":"10",search:"",data:e.all_purchase_pending},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.data;return e._l(s,(function(t,r){return a("vs-tr",{key:r,attrs:{data:t}},[a("vs-td",{attrs:{data:s[r].id}},[e._v("\n                            "+e._s(s[r].id)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:s[r].description}},[e._v("\n                            "+e._s(s[r].description)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:s[r].supplier.name}},[e._v("\n                            "+e._s(s[r].supplier.name)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:s[r].location}},[e._v("\n                            "+e._s(s[r].location)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:s[r].qty}},[e._v("\n                            "+e._s(s[r].qty)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:s[r].balance}},[e._v("\n                            "+e._s(s[r].balance)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:s[r].amount}},[e._v("\n                            "+e._s(s[r].amount)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:s[r].due_balance}},[e._v("\n                            "+e._s(s[r].due_balance)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:s[r].date}},[e._v("\n                            "+e._s(s[r].date)+"\n                        ")])],1)}))}}]),model:{value:e.selected_pending,callback:function(t){e.selected_pending=t},expression:"selected_pending"}},[a("template",{slot:"thead"},[a("vs-th",{attrs:{"sort-key":"id"}},[e._v("ល.រ")]),e._v(" "),a("vs-th",{attrs:{"sort-key":"description"}},[e._v("Description")]),e._v(" "),a("vs-th",[e._v("Supplier")]),e._v(" "),a("vs-th",{attrs:{"sort-key":"location"}},[e._v("Location")]),e._v(" "),a("vs-th",{attrs:{"sort-key":"qty"}},[e._v("QTY")]),e._v(" "),a("vs-th",{attrs:{"sort-key":"balance"}},[e._v("Balance")]),e._v(" "),a("vs-th",{attrs:{"sort-key":"amount"}},[e._v("Amount")]),e._v(" "),a("vs-th",{attrs:{"sort-key":"due_balance"}},[e._v("Due Balance")]),e._v(" "),a("vs-th",{attrs:{"sort-key":"purchase_date"}},[e._v("Date")])],1)],2)],1)],1),e._v(" "),a("show-purchase",{ref:"showPurchase"}),e._v(" "),a("add-purchase",{ref:"addPurchase"}),e._v(" "),a("edit-purchase",{ref:"editPurchase",on:{finished:function(t){e.selected_pending=[]}}}),e._v(" "),a("edit-product",{ref:"editProduct",on:{finished:function(t){e.selected_received=[]}}})],1)}),[],!1,null,"1de677b6",null);t.default=U.exports},tRha:function(e,t,a){(e.exports=a("I1BE")(!1)).push([e.i,"[dir] table[data-v-46fc3010], [dir] td[data-v-46fc3010], [dir] th[data-v-46fc3010] {\n  border: 1px solid black;\n}\ntable[data-v-46fc3010] {\n  border-collapse: collapse;\n  width: 100%;\n}\n[dir=ltr] th[data-v-46fc3010] {\n  text-align: left;\n}\n[dir=rtl] th[data-v-46fc3010] {\n  text-align: right;\n}\n",""])},yo3J:function(e,t,a){"use strict";var s={name:"addUnit",data:function(){return{unit:""}},methods:{show:function(){this.$modal.show("add-unit")},storeUnit:function(){var e=this;this.$validator.validateAll().then((function(t){t?(e.$vs.loading(),e.$store.dispatch("storeUnit",{name:e.unit}).then((function(t){t?(e.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានបន្ថែម",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),e.resetField()):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"ទិន្នន័យមិនបានបន្ថែម",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"}),e.$vs.loading.close()}))):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"សូមបំពេញទិន្នន័យអោយបានត្រឹមត្រូវ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"})}))},resetField:function(){this.unit=""}}},r=a("KHd+"),n=Object(r.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("modal",{attrs:{height:"auto",scrollable:!0,pivotY:.2,clickToClose:!1,name:"add-unit"}},[a("div",{staticClass:"flex justify-end"},[a("i",{staticClass:"vs-icon vs-popup--close material-icons text-warning",staticStyle:{background:"rgb(255, 255, 255)"},on:{click:function(t){return e.$modal.hide("add-unit")}}},[e._v("close")])]),e._v(" "),a("vx-card",{attrs:{"no-shadow":""}},[a("div",{staticClass:"vx-row mb-10"},[a("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{"label-placeholder":"ឈ្មោះ",name:"unit"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.storeUnit(t)}},model:{value:e.unit,callback:function(t){e.unit=t},expression:"unit"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("unit"),expression:"errors.has('unit')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("unit")))])],1)])],1)}),[],!1,null,"da88d7b4",null);t.a=n.exports}}]);