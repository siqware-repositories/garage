(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"4hyD":function(e,t,a){"use strict";var s={name:"addCategory",data:function(){return{category:""}},methods:{show:function(){this.$modal.show("add-category")},storeCategory:function(){var e=this;this.$validator.validateAll().then((function(t){t?(e.$vs.loading(),e.$store.dispatch("storeCategory",{name:e.category}).then((function(t){t?(e.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានបន្ថែម",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),e.resetField()):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"ទិន្នន័យមិនបានបន្ថែម",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"}),e.$vs.loading.close()}))):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"សូមបំពេញទិន្នន័យអោយបានត្រឹមត្រូវ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"})}))},resetField:function(){this.category=""}}},i=a("KHd+"),n=Object(i.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("modal",{attrs:{height:"auto",scrollable:!0,pivotY:.2,clickToClose:!1,name:"add-category"}},[a("div",{staticClass:"flex justify-end"},[a("i",{staticClass:"vs-icon vs-popup--close material-icons text-warning",staticStyle:{background:"rgb(255, 255, 255)"},on:{click:function(t){return e.$modal.hide("add-category")}}},[e._v("close")])]),e._v(" "),a("vx-card",{attrs:{"no-shadow":""}},[a("div",{staticClass:"vx-row mb-10"},[a("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{"label-placeholder":"ឈ្មោះ",name:"category"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.storeCategory(t)}},model:{value:e.category,callback:function(t){e.category=t},expression:"category"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("category"),expression:"errors.has('category')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("category")))])],1)])],1)}),[],!1,null,"b31718a8",null);t.a=n.exports},"6ub9":function(e,t,a){(e.exports=a("I1BE")(!1)).push([e.i,"[dir] table[data-v-17c59f7c], [dir] td[data-v-17c59f7c], [dir] th[data-v-17c59f7c] {\n  border: 1px solid black;\n}\ntable[data-v-17c59f7c] {\n  border-collapse: collapse;\n  width: 100%;\n}\n[dir=ltr] th[data-v-17c59f7c] {\n  text-align: left;\n}\n[dir=rtl] th[data-v-17c59f7c] {\n  text-align: right;\n}\n",""])},"9Dpo":function(e,t,a){"use strict";var s={name:"addBrand",data:function(){return{brand:""}},methods:{show:function(){this.$modal.show("add-brand")},storeBrand:function(){var e=this;this.$validator.validateAll().then((function(t){t?(e.$vs.loading(),e.$store.dispatch("storeBrand",{name:e.brand}).then((function(t){t?(e.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានបន្ថែម",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),e.resetField()):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"ទិន្នន័យមិនបានបន្ថែម",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"}),e.$vs.loading.close()}))):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"សូមបំពេញទិន្នន័យអោយបានត្រឹមត្រូវ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"})}))},resetField:function(){this.brand=""}}},i=a("KHd+"),n=Object(i.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("modal",{attrs:{height:"auto",scrollable:!0,pivotY:.2,clickToClose:!1,name:"add-brand"}},[a("div",{staticClass:"flex justify-end"},[a("i",{staticClass:"vs-icon vs-popup--close material-icons text-warning",staticStyle:{background:"rgb(255, 255, 255)"},on:{click:function(t){return e.$modal.hide("add-brand")}}},[e._v("close")])]),e._v(" "),a("vx-card",{attrs:{"no-shadow":""}},[a("div",{staticClass:"vx-row mb-10"},[a("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{"label-placeholder":"ឈ្មោះ",name:"brand"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.storeBrand(t)}},model:{value:e.brand,callback:function(t){e.brand=t},expression:"brand"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("brand"),expression:"errors.has('brand')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("brand")))])],1)])],1)}),[],!1,null,"1dd572a1",null);t.a=n.exports},XePC:function(e,t,a){var s=a("6ub9");"string"==typeof s&&(s=[[e.i,s,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(s,i);s.locals&&(e.exports=s.locals)},f3AR:function(e,t,a){"use strict";var s=a("o0o1"),i=a.n(s),n=a("w48C"),r=a.n(n),o=(a("K+Wz"),a("yo3J")),c=a("4hyD"),l=a("9Dpo"),d=a("ksP6"),v=a.n(d),u=(a("Hj/Q"),{name:"addSupplier",components:{AddBrand:l.a,AddCategory:c.a,AddUnit:o.a,vueDropzone:v.a},data:function(){return{supplier:{name:null,company:null,contact:null,note:null,address:null}}},computed:{all_units:function(){return this.$store.getters.all_unit},all_categories:function(){return this.$store.getters.all_category},all_brands:function(){return this.$store.getters.all_brand}},methods:{show:function(){this.$modal.show("add-supplier")},storeSupplier:function(){var e=this;this.$validator.validateAll().then((function(t){t?(e.$vs.loading(),e.$store.dispatch("storeSupplier",e.supplier).then((function(t){t?(e.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានបន្ថែម",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),e.resetField()):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"ទិន្នន័យមិនបានបន្ថែម",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"}),e.$vs.loading.close()}))):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"សូមបំពេញទិន្នន័យអោយបានត្រឹមត្រូវ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"})}))},resetField:function(){this.product={name:"",description:"",unit:"ដំុ",category:"គ្រឿងក្រោម",brand:"AKA",inventory_type:"inventory_part",purchase:1,sale:1,image:"placeholder/placeholder.png"}},successUpload:function(e,t){this.product.image=t.path}}}),p=a("KHd+"),_=Object(p.a)(u,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("modal",{attrs:{width:"60%",height:"auto",scrollable:!0,pivotY:.2,clickToClose:!1,name:"add-supplier"}},[a("div",{staticClass:"flex justify-end"},[a("i",{staticClass:"vs-icon vs-popup--close material-icons text-warning",staticStyle:{background:"rgb(255, 255, 255)"},on:{click:function(t){return e.$modal.hide("add-supplier")}}},[e._v("close")])]),e._v(" "),a("vx-card",{attrs:{"no-shadow":""}},[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-2/3 w-full"},[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{"label-placeholder":"ឈ្មោះ",name:"name"},model:{value:e.supplier.name,callback:function(t){e.$set(e.supplier,"name",t)},expression:"supplier.name"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("name"),expression:"errors.has('name')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("name")))])],1),e._v(" "),a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{"label-placeholder":"ឈ្មោះក្រុមហ៊ុន",name:"company"},model:{value:e.supplier.company,callback:function(t){e.$set(e.supplier,"company",t)},expression:"supplier.company"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("company"),expression:"errors.has('company')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("company")))])],1)]),e._v(" "),a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col w-full"},[a("label",[e._v("ទំនាក់ទំនង")]),e._v(" "),a("vs-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{label:"ទំនាក់ទំនង",name:"contact"},model:{value:e.supplier.contact,callback:function(t){e.$set(e.supplier,"contact",t)},expression:"supplier.contact"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("contact"),expression:"errors.has('contact')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("contact")))])],1),e._v(" "),a("div",{staticClass:"vx-col w-full"},[a("label",[e._v("សំគាល់")]),e._v(" "),a("vs-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{label:"សំគាល់",name:"note"},model:{value:e.supplier.note,callback:function(t){e.$set(e.supplier,"note",t)},expression:"supplier.note"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("note"),expression:"errors.has('note')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("note")))])],1)])]),e._v(" "),a("div",{staticClass:"vx-col md:w-1/3 w-full"},[a("label",[e._v("អាស័យដ្ឋាន")]),e._v(" "),a("vs-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{label:"អាស័យដ្ឋាន",name:"address"},model:{value:e.supplier.address,callback:function(t){e.$set(e.supplier,"address",t)},expression:"supplier.address"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("address"),expression:"errors.has('address')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("address")))])],1)]),e._v(" "),a("vs-divider"),e._v(" "),a("div",{staticClass:"flex justify-end btn-group"},[a("vs-button",{attrs:{icon:"icon-save","icon-pack":"feather",type:"relief"},on:{click:e.storeSupplier}},[e._v("រក្សាទុក")])],1)],1)],1),e._v(" "),a("add-unit",{ref:"addUnit"}),e._v(" "),a("add-category",{ref:"addCategory"}),e._v(" "),a("add-brand",{ref:"addBrand"})],1)}),[],!1,null,"4ab12b82",null).exports,m=a("Snq/"),h=a.n(m),f=a("q+Mi"),x=a("pS5H"),w=a("rdXg"),y=a.n(w);function b(e,t,a,s,i,n,r){try{var o=e[n](r),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(s,i)}function g(e){return function(){var t=this,a=arguments;return new Promise((function(s,i){var n=e.apply(t,a);function r(e){b(n,s,i,r,o,"next",e)}function o(e){b(n,s,i,r,o,"throw",e)}r(void 0)}))}}var C,k,$={name:"showInvoice",components:{AddSupplier:_,AddBrand:l.a,AddCategory:c.a,AddUnit:o.a,flatPickr:r.a,"v-select":h.a,"bar-code":f.a,"money-format":x.a},data:function(){return{data:{id:null,customer:{name:""},balance:null,due_balance:null,invoice_status:null,invoice_date:null,description:null,items:[]}}},computed:{total_amount:function(){return this.data.items.reduce((function(e,t){return e+parseFloat(t.amount)}),0)}},methods:{_print:(k=g(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.querySelector("#printMe"),a={type:"dataURL"},e.next=4,this.$html2canvas(t,a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)}))),function(){return k.apply(this,arguments)}),printHtml:(C=g(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._print();case 2:t=e.sent,y()(t,"image");case 4:case"end":return e.stop()}}),e,this)}))),function(){return C.apply(this,arguments)}),show:function(e){var t=this;this.$modal.show("show-invoice"),t.data.id=e.id,t.data.balance=e.balance,t.data.due_balance=e.due_balance,t.data.customer=e.customer,t.data.invoice_status=e.invoice_status,t.data.invoice_date=e.date,t.data.description=e.description,t.data.items=[],e.invoice_detail.forEach((function(e,a){t.data.items.push({name:e.purchase_detail.product.name,description:e.purchase_detail.product.description,qty:e.qty,sale_price:e.sale,amount:0})}))}}},q=(a("iUSe"),Object(p.a)($,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("modal",{attrs:{width:"60%",height:"auto",scrollable:!0,pivotY:.2,clickToClose:!1,name:"show-invoice"}},[a("div",{staticClass:"flex justify-end"},[a("i",{staticClass:"vs-icon vs-popup--close material-icons text-warning",staticStyle:{background:"rgb(255, 255, 255)"},on:{click:function(t){return e.$modal.hide("show-invoice")}}},[e._v("close")])]),e._v(" "),a("vx-card",{attrs:{"no-shadow":""}},[a("div",{attrs:{id:"printMe"}},[a("table",[a("tr",[a("td",[e._v("អតិថិជន "),a("br"),e._v("Customer")]),e._v(" "),a("td",[e._v("Invoice Status")]),e._v(" "),a("td",[e._v("លក់ពី "),a("br"),e._v("Sold from")]),e._v(" "),a("td",[e._v("ពិពណ៌នា"),a("br"),e._v("Description")]),e._v(" "),a("td",[e._v("ថ្ងៃខែឆ្នាំលក់​ "),a("br"),e._v("Sold from")]),e._v(" "),a("td",[e._v("Barcode")])]),e._v(" "),a("tr",[a("td",[e._v("\n                            ឈ្មោះ: "+e._s(e.data.customer.name)),a("br"),e._v("\n                            ទំនាក់ទំនង: "+e._s(e.data.customer.contact)),a("br")]),e._v(" "),a("td",[e._v(e._s(e.data.invoice_status))]),e._v(" "),a("td",[e._v("Ly put")]),e._v(" "),a("td",[e._v(e._s(e.data.description))]),e._v(" "),a("td",[e._v(e._s(e.data.invoice_date))]),e._v(" "),a("td",{staticClass:"p-2"},[a("bar-code",{attrs:{value:e.data.id,options:{displayValue:!0}}})],1)])]),e._v(" "),a("vs-divider"),e._v(" "),a("table",[a("thead",[a("tr",[a("th",[e._v("ល.រ "),a("br"),e._v("No")]),e._v(" "),a("th",[e._v("ឈ្មោះ"),a("br"),e._v("Name")]),e._v(" "),a("th",[e._v("ពិពណ៌នា"),a("br"),e._v("Description")]),e._v(" "),a("th",[e._v("ចំនួន"),a("br"),e._v("Qty")]),e._v(" "),a("th",[e._v("តម្លៃលក់"),a("br"),e._v("Unit Price")]),e._v(" "),a("th",[e._v("សរុប"),a("br"),e._v("Amount")])])]),e._v(" "),a("tbody",e._l(e.data.items,(function(t,s){return a("tr",{key:s},[a("td",{staticClass:"pl-2 print:pl-2"},[e._v("\n                            "+e._s(s+1)+"\n                        ")]),e._v(" "),a("td",{staticClass:"pl-2 print:pl-2"},[e._v("\n                            "+e._s(t.name)+"\n                        ")]),e._v(" "),a("td",{staticClass:"pl-2 print:pl-2"},[e._v("\n                            "+e._s(t.description)+"\n                        ")]),e._v(" "),a("td",{staticClass:"pl-2 print:pl-2"},[e._v("\n                            "+e._s(t.qty)+"\n                        ")]),e._v(" "),a("td",{staticClass:"pl-2 print:pl-2"},[a("money-format",{attrs:{value:parseFloat(t.sale_price),locale:"en","currency-code":"USD"}})],1),e._v(" "),a("td",{staticClass:"pl-2 print:pl-2"},[a("money-format",{attrs:{value:parseFloat(t.amount=t.sale_price*t.qty),locale:"en","currency-code":"USD"}})],1)])})),0),e._v(" "),a("tfoot",[a("tr",[a("td"),e._v(" "),a("td"),e._v(" "),a("td"),e._v(" "),a("td"),e._v(" "),a("td",{staticClass:"md:text-right"},[e._v("\n                            សរុប\n                        ")]),e._v(" "),a("td",{staticClass:"pl-2 print:pl-2"},[a("money-format",{attrs:{value:e.total_amount,locale:"en","currency-code":"USD"}})],1)])])]),e._v(" "),a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("vs-divider",{attrs:{position:"left"}},[e._v("Payment")]),e._v(" "),a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-1/2 print:w-1/2 w-full"},[a("label",[e._v("ប្រាក់ទិញទំនិញ")]),e._v(" "),a("money-format",{attrs:{value:parseFloat(e.data.balance),locale:"en","currency-code":"USD"}})],1),e._v(" "),a("div",{staticClass:"vx-col md:w-1/2 print:w-1/2 w-full"},[a("label",[e._v("ទឹកប្រាក់ជំពាក់")]),e._v(" "),a("money-format",{attrs:{value:parseFloat(e.data.due_balance),locale:"en","currency-code":"USD"}})],1)])],1)])],1),e._v(" "),a("div",{staticClass:"flex justify-end btn-group"},[a("vs-button",{attrs:{icon:"icon-printer","icon-pack":"feather",type:"relief"},on:{click:e.printHtml}},[e._v("បោះពុម្ភ\n                ")])],1)])],1),e._v(" "),a("add-supplier",{ref:"addSupplier"}),e._v(" "),a("add-unit",{ref:"addUnit"}),e._v(" "),a("add-category",{ref:"addCategory"}),e._v(" "),a("add-brand",{ref:"addBrand"})],1)}),[],!1,null,"17c59f7c",null));t.a=q.exports},g0IJ:function(e,t,a){"use strict";a.r(t);var s=a("o0o1"),i=a.n(s),n=a("mddE");function r(e,t,a,s,i,n,r){try{var o=e[n](r),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(s,i)}var o,c,l={name:"addPayment",methods:{show:function(e){this.$modal.show("add-payment"),this.data.id=e.id,this.data.balance=e.due_balance,this.data.input_balance=e.due_balance},updateInvoicePayment:function(){var e=this;this.$validator.validateAll().then((function(t){t?(e.$vs.loading(),e.$store.dispatch("updateInvoicePayment",e.data).then((function(t){t?(e.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទឹកប្រាក់បានបន្ថែម",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),e.fetchInvoice(),e.$emit("finished"),e.$modal.hide("add-payment")):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"ទឹកប្រាក់មិនបានបន្ថែម",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"}),e.$vs.loading.close()}))):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"សូមបំពេញទិន្នន័យអោយបានត្រឹមត្រូវ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"})}))},fetchInvoice:(o=i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("fetchInvoice");case 2:case"end":return e.stop()}}),e,this)})),c=function(){var e=this,t=arguments;return new Promise((function(a,s){var i=o.apply(e,t);function n(e){r(i,a,s,n,c,"next",e)}function c(e){r(i,a,s,n,c,"throw",e)}n(void 0)}))},function(){return c.apply(this,arguments)})},data:function(){return{data:{id:null,balance:0,input_balance:0,due_balance:0}}},computed:{due_balance:function(){return this.data.due_balance=this.data.balance-this.data.input_balance}}},d=a("KHd+"),v=Object(d.a)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("modal",{attrs:{height:"auto",scrollable:!0,pivotY:.2,clickToClose:!1,name:"add-payment"}},[e._v("\n    hi\n    "),a("div",{staticClass:"flex justify-end"},[a("i",{staticClass:"vs-icon vs-popup--close material-icons text-warning",staticStyle:{background:"rgb(255, 255, 255)"},on:{click:function(t){return e.$modal.hide("add-payment")}}},[e._v("close")])]),e._v(" "),a("vx-card",{attrs:{"no-shadow":""}},[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("h4",[e._v("ទឹកប្រាក់ត្រូវសង")]),e._v(" "),a("span",{staticClass:"text-2xl"},[e._v("$"+e._s(e.data.balance))])]),e._v(" "),a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("h4",[e._v("ទឹកប្រាក់នៅសល់")]),e._v(" "),a("span",{staticClass:"text-2xl"},[e._v("$"+e._s(e.due_balance))])])]),e._v(" "),a("vs-divider"),e._v(" "),a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col w-full"},[a("vs-input-number",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{min:"0",max:e.data.balance,name:"input_balance"},model:{value:e.data.input_balance,callback:function(t){e.$set(e.data,"input_balance",t)},expression:"data.input_balance"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("input_balance"),expression:"errors.has('input_balance')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("input_balance")))])],1)]),e._v(" "),a("div",{staticClass:"flex justify-end btn-group"},[a("vs-button",{attrs:{icon:"icon-dollar-sign","icon-pack":"feather",type:"relief"},on:{click:e.updateInvoicePayment}},[e._v("ចំណាយ")])],1)],1)],1)}),[],!1,null,"7c3167f9",null).exports,u=a("f3AR"),p=a("w48C"),_=a.n(p),m=(a("K+Wz"),a("yo3J")),h=a("4hyD"),f=a("9Dpo"),x=a("Snq/"),w=a.n(x),y={name:"addCustomer",data:function(){return{data:{name:null,contact:null,note:null,address:null}}},methods:{show:function(){this.$modal.show("add-customer")},storeCustomer:function(){var e=this;this.$validator.validateAll().then((function(t){t?(e.$vs.loading(),e.$store.dispatch("storeCustomer",e.data).then((function(t){t?(e.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានបន្ថែម",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),e.resetField()):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"ទិន្នន័យមិនបានបន្ថែម",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"}),e.$vs.loading.close()}))):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"សូមបំពេញទិន្នន័យអោយបានត្រឹមត្រូវ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"})}))},resetField:function(){this.data={name:null,contact:null,note:null,address:null}}}},b=Object(d.a)(y,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("modal",{attrs:{width:"60%",height:"auto",scrollable:!0,pivotY:.2,clickToClose:!1,name:"add-customer"}},[a("div",{staticClass:"flex justify-end"},[a("i",{staticClass:"vs-icon vs-popup--close material-icons text-warning",staticStyle:{background:"rgb(255, 255, 255)"},on:{click:function(t){return e.$modal.hide("add-customer")}}},[e._v("close")])]),e._v(" "),a("vx-card",{attrs:{"no-shadow":""}},[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-2/3 w-full"},[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col w-full"},[a("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{"label-placeholder":"ឈ្មោះ",name:"name"},model:{value:e.data.name,callback:function(t){e.$set(e.data,"name",t)},expression:"data.name"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("name"),expression:"errors.has('name')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("name")))])],1)]),e._v(" "),a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col w-full"},[a("label",[e._v("ទំនាក់ទំនង")]),e._v(" "),a("vs-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{label:"ទំនាក់ទំនង",name:"contact"},model:{value:e.data.contact,callback:function(t){e.$set(e.data,"contact",t)},expression:"data.contact"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("contact"),expression:"errors.has('contact')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("contact")))])],1),e._v(" "),a("div",{staticClass:"vx-col w-full"},[a("label",[e._v("សំគាល់")]),e._v(" "),a("vs-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{label:"សំគាល់",name:"note"},model:{value:e.data.note,callback:function(t){e.$set(e.data,"note",t)},expression:"data.note"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("note"),expression:"errors.has('note')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("note")))])],1)])]),e._v(" "),a("div",{staticClass:"vx-col md:w-1/3 w-full"},[a("label",[e._v("អាស័យដ្ឋាន")]),e._v(" "),a("vs-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{label:"អាស័យដ្ឋាន",name:"address"},model:{value:e.data.address,callback:function(t){e.$set(e.data,"address",t)},expression:"data.address"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("address"),expression:"errors.has('address')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("address")))])],1)]),e._v(" "),a("vs-divider"),e._v(" "),a("div",{staticClass:"flex justify-end btn-group"},[a("vs-button",{attrs:{icon:"icon-save","icon-pack":"feather",type:"relief"},on:{click:e.storeCustomer}},[e._v("រក្សាទុក")])],1)],1)],1)],1)}),[],!1,null,"249ed636",null).exports,g={name:"addInvoice",components:{AddCustomer:b,AddBrand:f.a,AddCategory:h.a,AddUnit:m.a,flatPickr:_.a,"v-select":w.a},data:function(){return{invoice:{customer:null,user_id:this.$store.state.AppActiveUser.uid,invoice_date:null,invoice_status:"pending",description:"",total_balance:null,balance:null,due_balance:0,amount:0,qty:0,items:[{id:"",name:null,description:null,qty:1,sale_price:1,amount:1,inventory_type:"",remain_qty:""}]}}},computed:{all_customer:function(){return this.$store.getters.all_customer},all_purchase_details:function(){return this.$store.getters.all_purchase_detail},filtered_purchase_details:function(){return this.all_purchase_details.filter((function(e){return"purchase_only"!==e.inventory_type}))},total:function(){var e=0;return this.invoice.items.forEach((function(t,a){e+=parseFloat(t.amount)})),this.invoice.total_balance=e,this.invoice.balance=e,e},total_qty:function(){var e=0;return this.invoice.items.forEach((function(t,a){e+=parseFloat(t.qty)})),this.invoice.qty=e,e}},updated:function(){this.total_qty,this.total},methods:{searchCustomer:function(e,t,a){return String(t).toLowerCase().indexOf(a.toLowerCase())>-1||String(e.note).toLowerCase().indexOf(a.toLowerCase())>-1||String(e.contact).toLowerCase().indexOf(a.toLowerCase())>-1},searchProduct:function(e,t,a){return String(t).toLowerCase().indexOf(a.toLowerCase())>-1||String(e.product.id).toLowerCase().indexOf(a.toLowerCase())>-1||String(e.product.unit).toLowerCase().indexOf(a.toLowerCase())>-1||String(e.product.brand).toLowerCase().indexOf(a.toLowerCase())>-1||String(e.supplier.name).toLowerCase().indexOf(a.toLowerCase())>-1||String(e.supplier.company).toLowerCase().indexOf(a.toLowerCase())>-1||String(e.supplier.contact).toLowerCase().indexOf(a.toLowerCase())>-1},addItemLine:function(){this.invoice.items.push({id:"",name:null,description:null,qty:1,sale_price:1,amount:1,inventory_type:"",remain_qty:""})},removeItemLine:function(e){this.invoice.items.splice(e,1)},selectProduct:function(e,t){var a=this.all_purchase_details.filter((function(t){return parseInt(t.id)===parseInt(e.id)}));this.invoice.items[t].name=a[0].product.name,this.invoice.items[t].inventory_type=a[0].product.inventory_type,this.invoice.items[t].remain_qty=a[0].remain_qty,this.invoice.items[t].description=a[0].product.description,this.invoice.items[t].sale_price=a[0].sale},show:function(){this.$modal.show("add-invoice")},storeInvoice:function(){var e=this;this.$validator.validateAll().then((function(t){t?(e.$vs.loading(),e.$store.dispatch("storeInvoice",e.invoice).then((function(t){t?(e.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានបន្ថែម",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),e.resetField()):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"ទិន្នន័យមិនបានបន្ថែម",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"}),e.$vs.loading.close()}))):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"សូមបំពេញទិន្នន័យអោយបានត្រឹមត្រូវ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"})}))},resetField:function(){this.invoice={customer:null,user_id:this.$store.state.AppActiveUser.uid,invoice_date:null,invoice_status:"pending",description:"",total_balance:null,balance:null,due_balance:0,amount:0,qty:0,items:[{id:"",name:null,description:null,qty:1,sale_price:1,amount:1,inventory_type:"",remain_qty:""}]}},successUpload:function(e,t){this.product.image=t.path}}},C=Object(d.a)(g,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("modal",{attrs:{width:"90%",height:"auto",scrollable:!0,pivotY:.2,clickToClose:!1,name:"add-invoice"}},[a("div",{staticClass:"flex justify-end"},[a("i",{staticClass:"vs-icon vs-popup--close material-icons text-warning",staticStyle:{background:"rgb(255, 255, 255)"},on:{click:function(t){return e.$modal.hide("add-invoice")}}},[e._v("close")])]),e._v(" "),a("vx-card",{attrs:{"no-shadow":""}},[a("div",{staticClass:"vx-row my-3"},[a("div",{staticClass:"vx-col md:w-1/3 w-full"},[a("label",[e._v("អតិថិជន")]),e._v(" "),a("vx-input-group",[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{filterBy:e.searchCustomer,label:"name",name:"customer",options:e.all_customer},scopedSlots:e._u([{key:"option",fn:function(e){return[a("vs-list-item",{attrs:{title:"ឈ្មោះ​ "+e.name,subtitle:"ទំនាក់ទំនង "+e.contact+" អាស័យដ្ឋាន "+e.address}})]}}]),model:{value:e.invoice.customer,callback:function(t){e.$set(e.invoice,"customer",t)},expression:"invoice.customer"}}),e._v(" "),a("template",{slot:"append"},[a("div",{staticClass:"append-text btn-addon",on:{click:function(t){return e.$refs.addCustomer.show()}}},[a("vs-button",{staticClass:"rounded-none",attrs:{type:"filled","icon-pack":"feather",icon:"icon-plus"}})],1)])],2),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("customer"),expression:"errors.has('customer')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("customer")))])],1),e._v(" "),a("div",{staticClass:"vx-col md:w-1/3 w-full"},[a("label",[e._v("ថ្ងៃខែឆ្នាំទិញ")]),e._v(" "),a("flat-pickr",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{name:"invoice_date",placeholder:"Choose Date"},model:{value:e.invoice.invoice_date,callback:function(t){e.$set(e.invoice,"invoice_date",t)},expression:"invoice.invoice_date"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("invoice_date"),expression:"errors.has('invoice_date')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("invoice_date")))])],1)]),e._v(" "),a("div",{staticClass:"vx-row my-3"},[a("div",{staticClass:"vx-col md:w-1/3 w-full"},[a("label",[e._v("Invoice Status")]),e._v(" "),a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"invoice_status",options:["received","pending"]},model:{value:e.invoice.invoice_status,callback:function(t){e.$set(e.invoice,"invoice_status",t)},expression:"invoice.invoice_status"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("status"),expression:"errors.has('status')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("status")))])],1),e._v(" "),a("div",{staticClass:"vx-col md:w-1/3 w-full"},[a("label",[e._v("ពិពណ៌នា")]),e._v(" "),a("vs-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{label:"ពិពណ៌នា",name:"description"},model:{value:e.invoice.description,callback:function(t){e.$set(e.invoice,"description",t)},expression:"invoice.description"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("description"),expression:"errors.has('description')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("description")))])],1),e._v(" "),a("div",{staticClass:"vx-col md:w-1/3"},[e._v("\n                    Amount\n                    "),a("span",{staticClass:"text-6xl block"},[e._v("$"+e._s(e.invoice.total_balance))])])]),e._v(" "),a("vs-divider",{attrs:{position:"left"}},[e._v("បញ្ជីទំនិញ")]),e._v(" "),a("table",{staticClass:"vs-table vs-table--tbody-table"},[a("thead",[a("tr",[a("th",[e._v("ល.រ")]),e._v(" "),a("th",[e._v("ឈ្មោះ")]),e._v(" "),a("th",[e._v("ពិពណ៌នា")]),e._v(" "),a("th",[e._v("ចំនួន")]),e._v(" "),a("th",[e._v("តម្លៃលក់")]),e._v(" "),a("th",[e._v("សរុប")]),e._v(" "),a("th")])]),e._v(" "),a("tbody",e._l(e.invoice.items,(function(t,s){return a("tr",{key:s},[a("td",{staticClass:"py-1"},[e._v("\n                        "+e._s(s+1)+"\n                    ")]),e._v(" "),a("td",{attrs:{width:"600"}},[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{filterBy:e.searchProduct,getOptionLabel:function(e){return e.product.name},name:"product-"+s,options:e.filtered_purchase_details},on:{input:function(a){return e.selectProduct(t.id,s)}},scopedSlots:e._u([{key:"option",fn:function(t){return[a("vs-list-item",{attrs:{title:"កូដ: "+t.product.id+" ឈ្មោះ​៖ "+t.product.name+" តម្លៃលក់ "+t.sale,subtitle:"Unit: "+t.product.unit+" Brand: "+t.product.brand}}),e._v(" "),a("vs-list-item",{attrs:{title:"អ្នកផ្គត់ផ្គង់៖ "+t.supplier.name+" ក្រុមហ៊ុន៖ "+t.supplier.company,subtitle:"ទំនាក់ទំនង "+t.supplier.contact}})]}}],null,!0),model:{value:t.id,callback:function(a){e.$set(t,"id",a)},expression:"tr.id"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("product-"+s),expression:"errors.has(`product-${indextr}`)"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("product-"+s)))])],1),e._v(" "),a("td",[e._v("\n                        "+e._s(t.description)+"\n                    ")]),e._v(" "),a("td",["service"===t.inventory_type?a("vs-input-number",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{color:"danger",min:"0",name:"qty-"+s},model:{value:t.qty,callback:function(a){e.$set(t,"qty",a)},expression:"tr.qty"}}):e._e(),e._v(" "),"service"!==t.inventory_type?a("vs-input-number",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{color:"success",min:"0",max:t.remain_qty,name:"qty-"+s},model:{value:t.qty,callback:function(a){e.$set(t,"qty",a)},expression:"tr.qty"}}):e._e(),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("qty-"+s),expression:"errors.has(`qty-${indextr}`)"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("qty-"+s)))])],1),e._v(" "),a("td",[a("vs-input-number",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{color:"danger",min:"0",name:"sale_price-"+s},model:{value:t.sale_price,callback:function(a){e.$set(t,"sale_price",a)},expression:"tr.sale_price"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("sale_price-"+s),expression:"errors.has(`sale_price-${indextr}`)"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("sale_price-"+s)))])],1),e._v(" "),a("td",[e._v("\n                        "+e._s(t.amount=t.sale_price*t.qty)+"\n                    ")]),e._v(" "),a("td",{staticClass:"py-1"},[a("vs-button",{attrs:{icon:"icon-trash-2",color:"warning","icon-pack":"feather",type:"flat"},on:{click:function(t){return e.removeItemLine(s)}}})],1)])})),0)]),e._v(" "),a("vs-button",{staticClass:"rounded-none my-3",attrs:{icon:"icon-plus","icon-pack":"feather",type:"line"},on:{click:e.addItemLine}},[e._v("បន្ថែមទំនិញ")]),e._v(" "),a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("vs-divider",{attrs:{position:"left"}},[e._v("Payment")]),e._v(" "),a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("label",[e._v("ប្រាក់ទិញទំនិញ")]),e._v(" "),a("vs-input-number",{attrs:{color:"warning",min:"0",max:e.invoice.total_balance,label:"ប្រាក់ទិញទំនិញ:"},model:{value:e.invoice.balance,callback:function(t){e.$set(e.invoice,"balance",t)},expression:"invoice.balance"}})],1),e._v(" "),a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("label",[e._v("ទឹកប្រាក់ជំពាក់")]),e._v(" "),a("vs-input",{staticClass:"w-full",attrs:{step:"any",readonly:"",type:"number"},model:{value:e.invoice.due_balance=e.invoice.total_balance-e.invoice.balance,callback:function(t){e.$set(e.invoice.due_balance=e.invoice.total_balance-e.invoice,"balance",t)},expression:"invoice.due_balance = invoice.total_balance - invoice.balance"}})],1)])],1)]),e._v(" "),a("vs-divider"),e._v(" "),a("div",{staticClass:"flex justify-end btn-group"},[a("vs-button",{attrs:{icon:"icon-save","icon-pack":"feather",type:"relief"},on:{click:e.storeInvoice}},[e._v("រក្សាទុក")])],1)],1)],1),e._v(" "),a("add-customer",{ref:"addCustomer"}),e._v(" "),a("add-unit",{ref:"addUnit"}),e._v(" "),a("add-category",{ref:"addCategory"}),e._v(" "),a("add-brand",{ref:"addBrand"})],1)}),[],!1,null,"9edd29a6",null).exports,k={name:"editInvoice",components:{AddCustomer:b,AddBrand:f.a,AddCategory:h.a,AddUnit:m.a,flatPickr:_.a,"v-select":w.a},data:function(){return{invoice:{id:null,customer:null,user_id:this.$store.state.AppActiveUser.uid,invoice_date:null,invoice_status:"pending",description:"",total_balance:null,balance:null,due_balance:0,amount:0,qty:0,items:[{id:"",name:null,description:null,qty:1,sale_price:1,amount:1,inventory_type:"",remain_qty:""}]}}},computed:{all_customer:function(){return this.$store.getters.all_customer},all_purchase_details:function(){return this.$store.getters.all_purchase_detail},total:function(){var e=0;return this.invoice.items.forEach((function(t,a){e+=parseFloat(t.amount)})),this.invoice.total_balance=e,this.invoice.balance=e,e},total_qty:function(){var e=0;return this.invoice.items.forEach((function(t,a){e+=parseFloat(t.qty)})),this.invoice.qty=e,e}},updated:function(){this.total_qty,this.total},methods:{searchCustomer:function(e,t,a){return String(t).toLowerCase().indexOf(a.toLowerCase())>-1||String(e.note).toLowerCase().indexOf(a.toLowerCase())>-1||String(e.contact).toLowerCase().indexOf(a.toLowerCase())>-1},searchProduct:function(e,t,a){return String(t).toLowerCase().indexOf(a.toLowerCase())>-1||String(e.product.id).toLowerCase().indexOf(a.toLowerCase())>-1||String(e.product.unit).toLowerCase().indexOf(a.toLowerCase())>-1||String(e.product.brand).toLowerCase().indexOf(a.toLowerCase())>-1||String(e.supplier.name).toLowerCase().indexOf(a.toLowerCase())>-1||String(e.supplier.company).toLowerCase().indexOf(a.toLowerCase())>-1||String(e.supplier.contact).toLowerCase().indexOf(a.toLowerCase())>-1},addItemLine:function(){this.invoice.items.push({id:"",name:null,description:null,qty:1,sale_price:1,amount:1,inventory_type:"",remain_qty:""})},removeItemLine:function(e){this.invoice.items.splice(e,1)},selectProduct:function(e,t){var a=this.all_purchase_details.filter((function(t){return parseInt(t.id)===parseInt(e.id)}));this.invoice.items[t].name=a[0].product.name,this.invoice.items[t].inventory_type=a[0].product.inventory_type,this.invoice.items[t].remain_qty=a[0].remain_qty,this.invoice.items[t].description=a[0].product.description,this.invoice.items[t].sale_price=a[0].sale},show:function(e){var t=this;this.$modal.show("edit-invoice"),t.invoice.id=e.id,t.invoice.customer=e.customer,t.invoice.invoice_date=e.date,t.invoice.invoice_status=e.invoice_status,t.invoice.description=e.description,t.invoice.items=[],e.invoice_detail.forEach((function(e,a){t.invoice.items.push({id:e.purchase_detail,name:e.purchase_detail.product.name,description:e.purchase_detail.product.description,qty:e.qty,sale_price:e.sale,amount:e.amount,inventory_type:e.inventory_type,remain_qty:e.purchase_detail.remain_qty})}))},updateInvoice:function(){var e=this;this.$validator.validateAll().then((function(t){t?(e.$vs.loading(),e.$store.dispatch("updateInvoice",e.invoice).then((function(t){t?(e.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានបន្ថែម",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),e.$emit("finished")):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"ទិន្នន័យមិនបានបន្ថែម",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"}),e.$vs.loading.close()}))):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"សូមបំពេញទិន្នន័យអោយបានត្រឹមត្រូវ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"})}))},successUpload:function(e,t){this.product.image=t.path}}};function $(e,t,a,s,i,n,r){try{var o=e[n](r),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(s,i)}function q(e){return function(){var t=this,a=arguments;return new Promise((function(s,i){var n=e.apply(t,a);function r(e){$(n,s,i,r,o,"next",e)}function o(e){$(n,s,i,r,o,"throw",e)}r(void 0)}))}}var P,N,S,L,I,A,O,U={name:"Sale",components:{EditInvoice:Object(d.a)(k,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("modal",{attrs:{width:"90%",height:"auto",scrollable:!0,pivotY:.2,clickToClose:!1,name:"edit-invoice"}},[a("div",{staticClass:"flex justify-end"},[a("i",{staticClass:"vs-icon vs-popup--close material-icons text-warning",staticStyle:{background:"rgb(255, 255, 255)"},on:{click:function(t){return e.$modal.hide("edit-invoice")}}},[e._v("close")])]),e._v(" "),a("vx-card",{attrs:{"no-shadow":""}},[a("div",{staticClass:"vx-row my-3"},[a("div",{staticClass:"vx-col md:w-1/3 w-full"},[a("label",[e._v("អតិថិជន")]),e._v(" "),a("vx-input-group",[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{filterBy:e.searchCustomer,label:"name",name:"customer",options:e.all_customer},scopedSlots:e._u([{key:"option",fn:function(e){return[a("vs-list-item",{attrs:{title:"ឈ្មោះ​ "+e.name,subtitle:"ទំនាក់ទំនង "+e.contact+" អាស័យដ្ឋាន "+e.address}})]}}]),model:{value:e.invoice.customer,callback:function(t){e.$set(e.invoice,"customer",t)},expression:"invoice.customer"}}),e._v(" "),a("template",{slot:"append"},[a("div",{staticClass:"append-text btn-addon",on:{click:function(t){return e.$refs.addCustomer.show()}}},[a("vs-button",{staticClass:"rounded-none",attrs:{type:"filled","icon-pack":"feather",icon:"icon-plus"}})],1)])],2),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("customer"),expression:"errors.has('customer')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("customer")))])],1),e._v(" "),a("div",{staticClass:"vx-col md:w-1/3 w-full"},[a("label",[e._v("ថ្ងៃខែឆ្នាំទិញ")]),e._v(" "),a("flat-pickr",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{name:"invoice_date",placeholder:"Choose Date"},model:{value:e.invoice.invoice_date,callback:function(t){e.$set(e.invoice,"invoice_date",t)},expression:"invoice.invoice_date"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("invoice_date"),expression:"errors.has('invoice_date')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("invoice_date")))])],1)]),e._v(" "),a("div",{staticClass:"vx-row my-3"},[a("div",{staticClass:"vx-col md:w-1/3 w-full"},[a("label",[e._v("Invoice Status")]),e._v(" "),a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"invoice_status",options:["received","pending"]},model:{value:e.invoice.invoice_status,callback:function(t){e.$set(e.invoice,"invoice_status",t)},expression:"invoice.invoice_status"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("status"),expression:"errors.has('status')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("status")))])],1),e._v(" "),a("div",{staticClass:"vx-col md:w-1/3 w-full"},[a("label",[e._v("ពិពណ៌នា")]),e._v(" "),a("vs-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{label:"ពិពណ៌នា",name:"description"},model:{value:e.invoice.description,callback:function(t){e.$set(e.invoice,"description",t)},expression:"invoice.description"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("description"),expression:"errors.has('description')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("description")))])],1),e._v(" "),a("div",{staticClass:"vx-col md:w-1/3"},[e._v("\n                    Amount\n                    "),a("span",{staticClass:"text-6xl block"},[e._v("$"+e._s(e.invoice.total_balance))])])]),e._v(" "),a("vs-divider",{attrs:{position:"left"}},[e._v("បញ្ជីទំនិញ")]),e._v(" "),a("table",{staticClass:"vs-table vs-table--tbody-table"},[a("thead",[a("tr",[a("th",[e._v("ល.រ")]),e._v(" "),a("th",[e._v("ឈ្មោះ")]),e._v(" "),a("th",[e._v("ពិពណ៌នា")]),e._v(" "),a("th",[e._v("ចំនួន")]),e._v(" "),a("th",[e._v("តម្លៃលក់")]),e._v(" "),a("th",[e._v("សរុប")]),e._v(" "),a("th")])]),e._v(" "),a("tbody",e._l(e.invoice.items,(function(t,s){return a("tr",{key:s},[a("td",{staticClass:"py-1"},[e._v("\n                        "+e._s(s+1)+"\n                    ")]),e._v(" "),a("td",{attrs:{width:"600"}},[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{filterBy:e.searchProduct,getOptionLabel:function(e){return e.product.name},name:"product-"+s,options:e.all_purchase_details},on:{input:function(a){return e.selectProduct(t.id,s)}},scopedSlots:e._u([{key:"option",fn:function(t){return[a("vs-list-item",{attrs:{title:"កូដ: "+t.product.id+" ឈ្មោះ​៖ "+t.product.name+" តម្លៃលក់ "+t.sale,subtitle:"Unit: "+t.product.unit+" Brand: "+t.product.brand}}),e._v(" "),a("vs-list-item",{attrs:{title:"អ្នកផ្គត់ផ្គង់៖ "+t.supplier.name+" ក្រុមហ៊ុន៖ "+t.supplier.company,subtitle:"ទំនាក់ទំនង "+t.supplier.contact}})]}}],null,!0),model:{value:t.id,callback:function(a){e.$set(t,"id",a)},expression:"tr.id"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("product-"+s),expression:"errors.has(`product-${indextr}`)"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("product-"+s)))])],1),e._v(" "),a("td",[e._v("\n                        "+e._s(t.description)+"\n                    ")]),e._v(" "),a("td",["service"===t.inventory_type?a("vs-input-number",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{color:"danger",min:"0",name:"qty-"+s},model:{value:t.qty,callback:function(a){e.$set(t,"qty",a)},expression:"tr.qty"}}):e._e(),e._v(" "),"service"!==t.inventory_type?a("vs-input-number",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{color:"success",min:"0",max:t.remain_qty,name:"qty-"+s},model:{value:t.qty,callback:function(a){e.$set(t,"qty",a)},expression:"tr.qty"}}):e._e(),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("qty-"+s),expression:"errors.has(`qty-${indextr}`)"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("qty-"+s)))])],1),e._v(" "),a("td",[a("vs-input-number",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{color:"danger",min:"0",name:"sale_price-"+s},model:{value:t.sale_price,callback:function(a){e.$set(t,"sale_price",a)},expression:"tr.sale_price"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("sale_price-"+s),expression:"errors.has(`sale_price-${indextr}`)"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("sale_price-"+s)))])],1),e._v(" "),a("td",[e._v("\n                        "+e._s(t.amount=t.sale_price*t.qty)+"\n                    ")]),e._v(" "),a("td",{staticClass:"py-1"},[a("vs-button",{attrs:{icon:"icon-trash-2",color:"warning","icon-pack":"feather",type:"flat"},on:{click:function(t){return e.removeItemLine(s)}}})],1)])})),0)]),e._v(" "),a("vs-button",{staticClass:"rounded-none my-3",attrs:{icon:"icon-plus","icon-pack":"feather",type:"line"},on:{click:e.addItemLine}},[e._v("បន្ថែមទំនិញ")]),e._v(" "),a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("vs-divider",{attrs:{position:"left"}},[e._v("Payment")]),e._v(" "),a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("label",[e._v("ប្រាក់ទិញទំនិញ")]),e._v(" "),a("vs-input-number",{attrs:{color:"warning",min:"0",max:e.invoice.total_balance,label:"ប្រាក់ទិញទំនិញ:"},model:{value:e.invoice.balance,callback:function(t){e.$set(e.invoice,"balance",t)},expression:"invoice.balance"}})],1),e._v(" "),a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("label",[e._v("ទឹកប្រាក់ជំពាក់")]),e._v(" "),a("vs-input",{staticClass:"w-full",attrs:{step:"any",readonly:"",type:"number"},model:{value:e.invoice.due_balance=e.invoice.total_balance-e.invoice.balance,callback:function(t){e.$set(e.invoice.due_balance=e.invoice.total_balance-e.invoice,"balance",t)},expression:"invoice.due_balance = invoice.total_balance - invoice.balance"}})],1)])],1)]),e._v(" "),a("vs-divider"),e._v(" "),a("div",{staticClass:"flex justify-end btn-group"},[a("vs-button",{attrs:{icon:"icon-edit","icon-pack":"feather",type:"relief"},on:{click:e.updateInvoice}},[e._v("កែប្រែ")])],1)],1),e._v("\n        "+e._s(e.invoice)+"\n    ")],1),e._v(" "),a("add-customer",{ref:"addCustomer"}),e._v(" "),a("add-unit",{ref:"addUnit"}),e._v(" "),a("add-category",{ref:"addCategory"}),e._v(" "),a("add-brand",{ref:"addBrand"})],1)}),[],!1,null,"737ad784",null).exports,AddInvoice:C,ShowInvoice:u.a,AddPayment:v,EditProduct:n.a},data:function(){return{selected_pending:[],selected_received:[]}},computed:{all_invoices:function(){return this.$store.getters.all_invoice},all_product:function(){return this.$store.getters.all_product},all_purchases:function(){return this.$store.getters.all_purchase},all_invoice_received:function(){return this.all_invoices.filter((function(e){return"received"===e.invoice_status}))},all_invoice_pending:function(){return this.all_invoices.filter((function(e){return"pending"===e.invoice_status}))},all_purchase_received:function(){return this.all_purchases.filter((function(e){return"received"===e.purchase_status}))},all_purchase_pending:function(){return this.all_purchases.filter((function(e){return"pending"===e.purchase_status}))}},created:(O=q(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchCustomer();case 2:return e.next=4,this.fetchProduct();case 4:return e.next=6,this.fetchSupplier();case 6:return e.next=8,this.fetchPurchase();case 8:return e.next=10,this.fetchPurchaseDetail();case 10:return e.next=12,this.fetchInvoice();case 12:case"end":return e.stop()}}),e,this)}))),function(){return O.apply(this,arguments)}),methods:{fetchInvoice:function(){var e=q(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("fetchInvoice");case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),fetchCustomer:(A=q(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("fetchCustomer");case 2:case"end":return e.stop()}}),e,this)}))),function(){return A.apply(this,arguments)}),fetchPurchaseDetail:(I=q(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("fetchPurchaseDetail");case 2:case"end":return e.stop()}}),e,this)}))),function(){return I.apply(this,arguments)}),fetchPurchase:(L=q(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("fetchPurchase");case 2:case"end":return e.stop()}}),e,this)}))),function(){return L.apply(this,arguments)}),fetchProduct:(S=q(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("fetchProduct");case 2:case"end":return e.stop()}}),e,this)}))),function(){return S.apply(this,arguments)}),fetchSupplier:(N=q(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("fetchSupplier");case 2:case"end":return e.stop()}}),e,this)}))),function(){return N.apply(this,arguments)}),destroyInvoice:(P=q(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=this).$vs.loading(),a=t.selected_pending.map(function(){var e=q(i.a.mark((function e(a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("destroyInvoice",a.id);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=5,Promise.all(a).then((function(){t.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានលុប",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),t.selected_pending=[],t.$vs.loading.close()}));case 5:case"end":return e.stop()}}),e,this)}))),function(){return P.apply(this,arguments)})}},j=Object(d.a)(U,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("vx-card",{attrs:{"no-shadow":""}},[a("div",{staticClass:"flex btn-group"},[a("vs-button",{attrs:{type:"relief","icon-pack":"feather",icon:"icon-plus-square"},on:{click:function(t){return e.$refs.addInvoice.show()}}},[e._v("បន្ថែម")])],1),e._v(" "),a("vs-tabs",[a("vs-tab",{attrs:{label:"Received"}},[a("div",{staticClass:"flex btn-group"},[1===e.selected_received.length&&e.selected_received[0].due_balance>0?a("vs-button",{attrs:{color:"warning",type:"relief","icon-pack":"feather",icon:"icon-dollar-sign"},on:{click:function(t){return e.$refs.addPayment.show(e.selected_received[0])}}},[e._v("Add Payment")]):e._e(),e._v(" "),1===e.selected_received.length?a("vs-button",{attrs:{type:"relief","icon-pack":"feather",icon:"icon-eye"},on:{click:function(t){return e.$refs.showInvoice.show(e.selected_received[0])}}},[e._v("បង្ហាញ")]):e._e()],1),e._v(" "),a("vs-table",{attrs:{multiple:"",pagination:"","max-items":"10",search:"",data:e.all_invoice_received},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.data;return e._l(s,(function(t,i){return a("vs-tr",{key:i,attrs:{data:t}},[a("vs-td",{attrs:{data:s[i].id}},[e._v("\n                            "+e._s(s[i].id)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:s[i].description}},[e._v("\n                            "+e._s(s[i].description)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:s[i].customer.name}},[e._v("\n                            "+e._s(s[i].customer.name)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:s[i].qty}},[e._v("\n                            "+e._s(s[i].qty)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:s[i].balance}},[e._v("\n                            "+e._s(s[i].balance)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:s[i].amount}},[e._v("\n                            "+e._s(s[i].amount)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:s[i].due_balance}},[e._v("\n                            "+e._s(s[i].due_balance)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:s[i].date}},[e._v("\n                            "+e._s(s[i].date)+"\n                        ")])],1)}))}}]),model:{value:e.selected_received,callback:function(t){e.selected_received=t},expression:"selected_received"}},[a("template",{slot:"thead"},[a("vs-th",{attrs:{"sort-key":"id"}},[e._v("ល.រ")]),e._v(" "),a("vs-th",{attrs:{"sort-key":"description"}},[e._v("Description")]),e._v(" "),a("vs-th",[e._v("Customer")]),e._v(" "),a("vs-th",{attrs:{"sort-key":"qty"}},[e._v("QTY")]),e._v(" "),a("vs-th",{attrs:{"sort-key":"balance"}},[e._v("Balance")]),e._v(" "),a("vs-th",{attrs:{"sort-key":"amount"}},[e._v("Amount")]),e._v(" "),a("vs-th",{attrs:{"sort-key":"due_balance"}},[e._v("Due Balance")]),e._v(" "),a("vs-th",{attrs:{"sort-key":"date"}},[e._v("Date")])],1)],2),e._v(" "),a("add-payment",{ref:"addPayment",on:{finished:function(t){e.selected_received=[]}}})],1),e._v(" "),a("vs-tab",{attrs:{label:"Pending"}},[a("div",{staticClass:"flex btn-group"},[1===e.selected_pending.length&&e.selected_pending[0].due_balance>0?a("vs-button",{attrs:{type:"relief","icon-pack":"feather",icon:"icon-dollar-sign"},on:{click:function(t){return e.$refs.addPaymentPending.show(e.selected_pending[0])}}},[e._v("Add Payment")]):e._e(),e._v(" "),1===e.selected_pending.length?a("vs-button",{attrs:{type:"relief","icon-pack":"feather",icon:"icon-eye"},on:{click:function(t){return e.$refs.showInvoice.show(e.selected_pending[0])}}},[e._v("បង្ហាញ")]):e._e(),e._v(" "),1===e.selected_pending.length?a("vs-button",{attrs:{color:"warning",type:"relief","icon-pack":"feather",icon:"icon-edit"},on:{click:function(t){return e.$refs.editInvoice.show(e.selected_pending[0])}}},[e._v("កែប្រែ")]):e._e(),e._v(" "),e.selected_pending.length?a("vs-button",{attrs:{color:"danger",type:"relief","icon-pack":"feather",icon:"icon-trash-2"},on:{click:e.destroyInvoice}},[e._v("លុប")]):e._e()],1),e._v(" "),a("add-payment",{ref:"addPaymentPending",on:{finished:function(t){e.selected_pending=[]}}}),e._v(" "),a("vs-table",{attrs:{multiple:"",pagination:"","max-items":"10",search:"",data:e.all_invoice_pending},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.data;return e._l(s,(function(t,i){return a("vs-tr",{key:i,attrs:{data:t}},[a("vs-td",{attrs:{data:s[i].id}},[e._v("\n                            "+e._s(s[i].id)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:s[i].description}},[e._v("\n                            "+e._s(s[i].description)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:s[i].customer.name}},[e._v("\n                            "+e._s(s[i].customer.name)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:s[i].qty}},[e._v("\n                            "+e._s(s[i].qty)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:s[i].balance}},[e._v("\n                            "+e._s(s[i].balance)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:s[i].amount}},[e._v("\n                            "+e._s(s[i].amount)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:s[i].due_balance}},[e._v("\n                            "+e._s(s[i].due_balance)+"\n                        ")]),e._v(" "),a("vs-td",{attrs:{data:s[i].date}},[e._v("\n                            "+e._s(s[i].date)+"\n                        ")])],1)}))}}]),model:{value:e.selected_pending,callback:function(t){e.selected_pending=t},expression:"selected_pending"}},[a("template",{slot:"thead"},[a("vs-th",{attrs:{"sort-key":"id"}},[e._v("ល.រ")]),e._v(" "),a("vs-th",{attrs:{"sort-key":"description"}},[e._v("Description")]),e._v(" "),a("vs-th",[e._v("Customer")]),e._v(" "),a("vs-th",{attrs:{"sort-key":"qty"}},[e._v("QTY")]),e._v(" "),a("vs-th",{attrs:{"sort-key":"balance"}},[e._v("Balance")]),e._v(" "),a("vs-th",{attrs:{"sort-key":"amount"}},[e._v("Amount")]),e._v(" "),a("vs-th",{attrs:{"sort-key":"due_balance"}},[e._v("Due Balance")]),e._v(" "),a("vs-th",{attrs:{"sort-key":"date"}},[e._v("Date")])],1)],2)],1)],1),e._v(" "),a("show-invoice",{ref:"showInvoice"}),e._v(" "),a("add-invoice",{ref:"addInvoice"}),e._v(" "),a("edit-invoice",{ref:"editInvoice",on:{finished:function(t){e.selected_pending=[]}}}),e._v(" "),a("edit-product",{ref:"editProduct",on:{finished:function(t){e.selected_received=[]}}})],1)}),[],!1,null,"b0a18414",null);t.default=j.exports},iUSe:function(e,t,a){"use strict";var s=a("XePC");a.n(s).a},mddE:function(e,t,a){"use strict";var s=a("ksP6"),i=a.n(s),n=(a("Hj/Q"),a("Snq/")),r=a.n(n),o=a("yo3J"),c=a("4hyD"),l={name:"editProduct",components:{AddBrand:a("9Dpo").a,AddCategory:c.a,AddUnit:o.a,vueDropzone:i.a,"v-select":r.a},data:function(){return{product:{name:"",description:"",unit:{name:"ដំុ"},category:{name:"RX300"},brand:{name:"Toyota"},inventory_type:"inventory_part",default_purchase:1,default_sale:1,image:"images/placeholder/placeholder.png"},units:[{name:"គីឡូ"},{name:"លីត្រ"},{name:"ដំុ"}],categories:[{name:"គ្រឿងក្រោម"},{name:"ដែក"},{name:"ដំុ"}],brands:[{name:"AKA"},{name:"Snip"}],inventory_type:[{name:"inventory_part"},{name:"service"},{name:"sale_only"},{name:"purchase_only"}],dropzoneOptions:{url:route("file.upload.thumb"),maxFiles:1,addRemoveLinks:!0,dictDefaultMessage:"ដាក់រូបភាពទំនិញបើមាន",thumbnailWidth:150,thumbnailHeight:150}}},computed:{all_units:function(){return this.$store.getters.all_unit},all_categories:function(){return this.$store.getters.all_category},all_brands:function(){return this.$store.getters.all_brand}},methods:{show:function(e){this.$modal.show("edit"),this.product.id=e.id,this.product.name=e.name,this.product.description=e.description,this.product.unit={name:e.unit},this.product.category={name:e.category},this.product.brand={name:e.brand},this.product.inventory_type=e.inventory_type,this.product.default_purchase=e.default_purchase,this.product.default_sale=e.default_sale,this.product.image=e.image},editThumb:function(){this.$refs.image.manuallyAddFile({size:123},this.product.image)},updateProduct:function(){var e=this;this.$validator.validateAll().then((function(t){t?(e.$vs.loading(),e.$store.dispatch("updateProduct",e.product).then((function(t){t?(e.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានកែប្រែ",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),e.$emit("finished")):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"ទិន្នន័យមិនបានកែប្រែ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"}),e.$vs.loading.close()}))):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"សូមបំពេញទិន្នន័យអោយបានត្រឹមត្រូវ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"})}))},successUpload:function(e,t){this.product.image=t.path}}},d=a("KHd+"),v=Object(d.a)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("modal",{attrs:{width:"90%",height:"auto",scrollable:!0,pivotY:.2,clickToClose:!1,name:"edit"}},[a("div",{staticClass:"flex justify-end"},[a("i",{staticClass:"vs-icon vs-popup--close material-icons text-warning",staticStyle:{background:"rgb(255, 255, 255)"},on:{click:function(t){return e.$modal.hide("edit")}}},[e._v("close")])]),e._v(" "),a("vx-card",{attrs:{"no-shadow":""}},[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-1/3 w-full"},[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col w-full"},[a("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{"label-placeholder":"ឈ្មោះ",name:"name"},model:{value:e.product.name,callback:function(t){e.$set(e.product,"name",t)},expression:"product.name"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("name"),expression:"errors.has('name')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("name")))])],1),e._v(" "),a("div",{staticClass:"vx-col w-full my-2"},[a("label",[e._v("ពិពណ៌នា")]),e._v(" "),a("vs-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{label:"ពិពណ៌នា",name:"description"},model:{value:e.product.description,callback:function(t){e.$set(e.product,"description",t)},expression:"product.description"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("description"),expression:"errors.has('description')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("description")))])],1),e._v(" "),a("div",{staticClass:"vx-col w-full"},[a("vs-input-number",{attrs:{min:"0",label:"តម្លៃទិញ:"},model:{value:e.product.default_purchase,callback:function(t){e.$set(e.product,"default_purchase",t)},expression:"product.default_purchase"}})],1),e._v(" "),a("div",{staticClass:"vx-col w-full"},[a("vs-input-number",{attrs:{min:"0",label:"តម្លៃទលក់:"},model:{value:e.product.default_sale,callback:function(t){e.$set(e.product,"default_sale",t)},expression:"product.default_sale"}})],1)])]),e._v(" "),a("div",{staticClass:"vx-col md:w-2/3 w-full"},[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("label",[e._v("Unit")]),e._v(" "),a("vx-input-group",[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"unit",clearable:!1,label:"name",options:e.all_units},model:{value:e.product.unit,callback:function(t){e.$set(e.product,"unit",t)},expression:"product.unit"}}),e._v(" "),a("template",{slot:"append"},[a("div",{staticClass:"append-text btn-addon",on:{click:function(t){return e.$refs.addUnit.show()}}},[a("vs-button",{staticClass:"rounded-none",attrs:{type:"filled","icon-pack":"feather",icon:"icon-plus"}})],1)])],2),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("unit"),expression:"errors.has('unit')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("unit")))])],1),e._v(" "),a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("label",[e._v("ប្រភេទ")]),e._v(" "),a("vx-input-group",[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"category",clearable:!1,label:"name",options:e.all_categories},model:{value:e.product.category,callback:function(t){e.$set(e.product,"category",t)},expression:"product.category"}}),e._v(" "),a("template",{slot:"append"},[a("div",{staticClass:"append-text btn-addon",on:{click:function(t){return e.$refs.addCategory.show()}}},[a("vs-button",{staticClass:"rounded-none",attrs:{type:"filled","icon-pack":"feather",icon:"icon-plus"}})],1)])],2),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("category"),expression:"errors.has('category')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("category")))])],1)]),e._v(" "),a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("label",[e._v("Model")]),e._v(" "),a("vx-input-group",[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"brand",clearable:!1,label:"name",options:e.all_brands},model:{value:e.product.brand,callback:function(t){e.$set(e.product,"brand",t)},expression:"product.brand"}}),e._v(" "),a("template",{slot:"append"},[a("div",{staticClass:"append-text btn-addon",on:{click:function(t){return e.$refs.addBrand.show()}}},[a("vs-button",{staticClass:"rounded-none",attrs:{type:"filled","icon-pack":"feather",icon:"icon-plus"}})],1)])],2),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("brand"),expression:"errors.has('brand')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("brand")))])],1),e._v(" "),a("div",{staticClass:"vx-col md:w-1/2 w-full"},[a("label",[e._v("Inventory Type")]),e._v(" "),a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"inventory_type",options:["inventory_part","service","sale_only","purchase_only"]},model:{value:e.product.inventory_type,callback:function(t){e.$set(e.product,"inventory_type",t)},expression:"product.inventory_type"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("inventory_type"),expression:"errors.has('inventory_type')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("inventory_type")))])],1)]),e._v(" "),a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-1/2 my-2"},[a("vue-dropzone",{ref:"image",staticClass:"max-content p-1",attrs:{duplicateCheck:"",id:"dropzone",options:e.dropzoneOptions},on:{"vdropzone-success":e.successUpload,"vdropzone-mounted":e.editThumb}})],1)])])]),e._v(" "),a("vs-divider"),e._v(" "),a("div",{staticClass:"flex justify-end btn-group"},[a("vs-button",{attrs:{icon:"icon-save","icon-pack":"feather",type:"relief"},on:{click:e.updateProduct}},[e._v("រក្សាទុក")])],1)],1),e._v(" "),a("add-unit",{ref:"addUnit"}),e._v(" "),a("add-category",{ref:"addCategory"}),e._v(" "),a("add-brand",{ref:"addBrand"})],1)}),[],!1,null,"4c13bb72",null);t.a=v.exports},yo3J:function(e,t,a){"use strict";var s={name:"addUnit",data:function(){return{unit:""}},methods:{show:function(){this.$modal.show("add-unit")},storeUnit:function(){var e=this;this.$validator.validateAll().then((function(t){t?(e.$vs.loading(),e.$store.dispatch("storeUnit",{name:e.unit}).then((function(t){t?(e.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានបន្ថែម",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),e.resetField()):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"ទិន្នន័យមិនបានបន្ថែម",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"}),e.$vs.loading.close()}))):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"សូមបំពេញទិន្នន័យអោយបានត្រឹមត្រូវ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"})}))},resetField:function(){this.unit=""}}},i=a("KHd+"),n=Object(i.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("modal",{attrs:{height:"auto",scrollable:!0,pivotY:.2,clickToClose:!1,name:"add-unit"}},[a("div",{staticClass:"flex justify-end"},[a("i",{staticClass:"vs-icon vs-popup--close material-icons text-warning",staticStyle:{background:"rgb(255, 255, 255)"},on:{click:function(t){return e.$modal.hide("add-unit")}}},[e._v("close")])]),e._v(" "),a("vx-card",{attrs:{"no-shadow":""}},[a("div",{staticClass:"vx-row mb-10"},[a("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{"label-placeholder":"ឈ្មោះ",name:"unit"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.storeUnit(t)}},model:{value:e.unit,callback:function(t){e.unit=t},expression:"unit"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("unit"),expression:"errors.has('unit')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("unit")))])],1)])],1)}),[],!1,null,"da88d7b4",null);t.a=n.exports}}]);